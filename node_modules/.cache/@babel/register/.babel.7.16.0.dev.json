{
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/index.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _koa = _interopRequireDefault(require(\"koa\"));\n\nvar _koaJwt = _interopRequireDefault(require(\"koa-jwt\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _cors = _interopRequireDefault(require(\"@koa/cors\"));\n\nvar _koaBody = _interopRequireDefault(require(\"koa-body\"));\n\nvar _koaJson = _interopRequireDefault(require(\"koa-json\"));\n\nvar _koaHelmet = _interopRequireDefault(require(\"koa-helmet\"));\n\nvar _koaStatic = _interopRequireDefault(require(\"koa-static\"));\n\nvar _koaCompose = _interopRequireDefault(require(\"koa-compose\"));\n\nvar _koaCompress = _interopRequireDefault(require(\"koa-compress\"));\n\nvar _routes = _interopRequireDefault(require(\"./routes/routes\"));\n\nvar _index = _interopRequireDefault(require(\"./config/index\"));\n\nvar _errorHandle = _interopRequireDefault(require(\"./common/errorHandle\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst app = new _koa.default();\nconst isDevMode = process.env.NODE_ENV === \"production\" ? false : true; //定义公共的路径，不需要jwt鉴权\n\nconst jwt = (0, _koaJwt.default)({\n  secret: _index.default.JWT_SECRET\n}).unless({\n  path: [/^\\/public/, /\\/login/]\n});\nconst middleware = (0, _koaCompose.default)([(0, _koaBody.default)({\n  multipart: true,\n  formidable: {\n    keepExtensions: true,\n    maxFieldsSize: 5 * 1024 * 1024\n  },\n  onError: err => {\n    console.log(\"koabody TCL: err\", err);\n  }\n}), //处理request的body\n(0, _koaStatic.default)(_path.default.join(__dirname, \"../public\")), (0, _cors.default)(), (0, _koaJson.default)({\n  pretty: false,\n  param: \"pretty\"\n}), (0, _koaHelmet.default)(), _errorHandle.default, jwt]);\n\nif (!isDevMode) {\n  app.use((0, _koaCompress.default)());\n}\n\napp.use(middleware);\napp.use((0, _routes.default)());\napp.listen(3000);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwcCIsIktvYSIsImlzRGV2TW9kZSIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImp3dCIsInNlY3JldCIsImNvbmZpZyIsIkpXVF9TRUNSRVQiLCJ1bmxlc3MiLCJwYXRoIiwibWlkZGxld2FyZSIsIm11bHRpcGFydCIsImZvcm1pZGFibGUiLCJrZWVwRXh0ZW5zaW9ucyIsIm1heEZpZWxkc1NpemUiLCJvbkVycm9yIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImpvaW4iLCJfX2Rpcm5hbWUiLCJwcmV0dHkiLCJwYXJhbSIsImVycm9ySGFuZGxlIiwidXNlIiwibGlzdGVuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLElBQUlDLFlBQUosRUFBWjtBQUVBLE1BQU1DLFNBQVMsR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQVosS0FBeUIsWUFBekIsR0FBd0MsS0FBeEMsR0FBZ0QsSUFBbEUsQyxDQUVBOztBQUNBLE1BQU1DLEdBQUcsR0FBRyxxQkFBSTtBQUFFQyxFQUFBQSxNQUFNLEVBQUVDLGVBQU9DO0FBQWpCLENBQUosRUFBbUNDLE1BQW5DLENBQTBDO0FBQ3BEQyxFQUFBQSxJQUFJLEVBQUUsQ0FBQyxXQUFELEVBQWMsU0FBZDtBQUQ4QyxDQUExQyxDQUFaO0FBSUEsTUFBTUMsVUFBVSxHQUFHLHlCQUFRLENBQ3pCLHNCQUFRO0FBQ05DLEVBQUFBLFNBQVMsRUFBRSxJQURMO0FBRU5DLEVBQUFBLFVBQVUsRUFBRTtBQUNWQyxJQUFBQSxjQUFjLEVBQUUsSUFETjtBQUVWQyxJQUFBQSxhQUFhLEVBQUUsSUFBSSxJQUFKLEdBQVc7QUFGaEIsR0FGTjtBQU1OQyxFQUFBQSxPQUFPLEVBQUdDLEdBQUQsSUFBUztBQUNoQkMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksa0JBQVosRUFBZ0NGLEdBQWhDO0FBQ0Q7QUFSSyxDQUFSLENBRHlCLEVBVXJCO0FBQ0osd0JBQVFQLGNBQUtVLElBQUwsQ0FBVUMsU0FBVixFQUFxQixXQUFyQixDQUFSLENBWHlCLEVBWXpCLG9CQVp5QixFQWF6QixzQkFBSztBQUFFQyxFQUFBQSxNQUFNLEVBQUUsS0FBVjtBQUFpQkMsRUFBQUEsS0FBSyxFQUFFO0FBQXhCLENBQUwsQ0FieUIsRUFjekIseUJBZHlCLEVBZXpCQyxvQkFmeUIsRUFnQnpCbkIsR0FoQnlCLENBQVIsQ0FBbkI7O0FBbUJBLElBQUksQ0FBQ0osU0FBTCxFQUFnQjtBQUNkRixFQUFBQSxHQUFHLENBQUMwQixHQUFKLENBQVEsMkJBQVI7QUFDRDs7QUFFRDFCLEdBQUcsQ0FBQzBCLEdBQUosQ0FBUWQsVUFBUjtBQUNBWixHQUFHLENBQUMwQixHQUFKLENBQVEsc0JBQVI7QUFDQTFCLEdBQUcsQ0FBQzJCLE1BQUosQ0FBVyxJQUFYIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEtvYSBmcm9tIFwia29hXCI7XG5pbXBvcnQgSldUIGZyb20gXCJrb2Etand0XCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IENvcnMgZnJvbSBcIkBrb2EvY29yc1wiO1xuaW1wb3J0IEtvYUJvZHkgZnJvbSBcImtvYS1ib2R5XCI7XG5pbXBvcnQgSnNvbiBmcm9tIFwia29hLWpzb25cIjtcbmltcG9ydCBoZWxtZXQgZnJvbSBcImtvYS1oZWxtZXRcIjtcbmltcG9ydCBzdGF0aWNzIGZyb20gXCJrb2Etc3RhdGljXCI7XG5pbXBvcnQgY29tcG9zZSBmcm9tIFwia29hLWNvbXBvc2VcIjtcbmltcG9ydCBjb21wcmVzcyBmcm9tIFwia29hLWNvbXByZXNzXCI7XG5cbmltcG9ydCByb3V0ZXIgZnJvbSBcIi4vcm91dGVzL3JvdXRlc1wiO1xuaW1wb3J0IGNvbmZpZyBmcm9tIFwiLi9jb25maWcvaW5kZXhcIjtcbmltcG9ydCBlcnJvckhhbmRsZSBmcm9tIFwiLi9jb21tb24vZXJyb3JIYW5kbGVcIjtcblxuY29uc3QgYXBwID0gbmV3IEtvYSgpO1xuXG5jb25zdCBpc0Rldk1vZGUgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBmYWxzZSA6IHRydWU7XG5cbi8v5a6a5LmJ5YWs5YWx55qE6Lev5b6E77yM5LiN6ZyA6KaBand06Ym05p2DXG5jb25zdCBqd3QgPSBKV1QoeyBzZWNyZXQ6IGNvbmZpZy5KV1RfU0VDUkVUIH0pLnVubGVzcyh7XG4gIHBhdGg6IFsvXlxcL3B1YmxpYy8sIC9cXC9sb2dpbi9dLFxufSk7XG5cbmNvbnN0IG1pZGRsZXdhcmUgPSBjb21wb3NlKFtcbiAgS29hQm9keSh7XG4gICAgbXVsdGlwYXJ0OiB0cnVlLFxuICAgIGZvcm1pZGFibGU6IHtcbiAgICAgIGtlZXBFeHRlbnNpb25zOiB0cnVlLFxuICAgICAgbWF4RmllbGRzU2l6ZTogNSAqIDEwMjQgKiAxMDI0LFxuICAgIH0sXG4gICAgb25FcnJvcjogKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJrb2Fib2R5IFRDTDogZXJyXCIsIGVycik7XG4gICAgfSxcbiAgfSksIC8v5aSE55CGcmVxdWVzdOeahGJvZHlcbiAgc3RhdGljcyhwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uL3B1YmxpY1wiKSksXG4gIENvcnMoKSxcbiAgSnNvbih7IHByZXR0eTogZmFsc2UsIHBhcmFtOiBcInByZXR0eVwiIH0pLFxuICBoZWxtZXQoKSxcbiAgZXJyb3JIYW5kbGUsXG4gIGp3dCxcbl0pO1xuXG5pZiAoIWlzRGV2TW9kZSkge1xuICBhcHAudXNlKGNvbXByZXNzKCkpO1xufVxuXG5hcHAudXNlKG1pZGRsZXdhcmUpO1xuYXBwLnVzZShyb3V0ZXIoKSk7XG5hcHAubGlzdGVuKDMwMDApO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "app",
        "Koa",
        "isDevMode",
        "process",
        "env",
        "NODE_ENV",
        "jwt",
        "secret",
        "config",
        "JWT_SECRET",
        "unless",
        "path",
        "middleware",
        "multipart",
        "formidable",
        "keepExtensions",
        "maxFieldsSize",
        "onError",
        "err",
        "console",
        "log",
        "join",
        "__dirname",
        "pretty",
        "param",
        "errorHandle",
        "use",
        "listen"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,IAAIC,YAAJ,EAAZ;AAEA,MAAMC,SAAS,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,KAAxC,GAAgD,IAAlE,C,CAEA;;AACA,MAAMC,GAAG,GAAG,qBAAI;AAAEC,EAAAA,MAAM,EAAEC,eAAOC;AAAjB,CAAJ,EAAmCC,MAAnC,CAA0C;AACpDC,EAAAA,IAAI,EAAE,CAAC,WAAD,EAAc,SAAd;AAD8C,CAA1C,CAAZ;AAIA,MAAMC,UAAU,GAAG,yBAAQ,CACzB,sBAAQ;AACNC,EAAAA,SAAS,EAAE,IADL;AAENC,EAAAA,UAAU,EAAE;AACVC,IAAAA,cAAc,EAAE,IADN;AAEVC,IAAAA,aAAa,EAAE,IAAI,IAAJ,GAAW;AAFhB,GAFN;AAMNC,EAAAA,OAAO,EAAGC,GAAD,IAAS;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCF,GAAhC;AACD;AARK,CAAR,CADyB,EAUrB;AACJ,wBAAQP,cAAKU,IAAL,CAAUC,SAAV,EAAqB,WAArB,CAAR,CAXyB,EAYzB,oBAZyB,EAazB,sBAAK;AAAEC,EAAAA,MAAM,EAAE,KAAV;AAAiBC,EAAAA,KAAK,EAAE;AAAxB,CAAL,CAbyB,EAczB,yBAdyB,EAezBC,oBAfyB,EAgBzBnB,GAhByB,CAAR,CAAnB;;AAmBA,IAAI,CAACJ,SAAL,EAAgB;AACdF,EAAAA,GAAG,CAAC0B,GAAJ,CAAQ,2BAAR;AACD;;AAED1B,GAAG,CAAC0B,GAAJ,CAAQd,UAAR;AACAZ,GAAG,CAAC0B,GAAJ,CAAQ,sBAAR;AACA1B,GAAG,CAAC2B,MAAJ,CAAW,IAAX",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/",
      "sourcesContent": [
        "import Koa from \"koa\";\nimport JWT from \"koa-jwt\";\nimport path from \"path\";\nimport Cors from \"@koa/cors\";\nimport KoaBody from \"koa-body\";\nimport Json from \"koa-json\";\nimport helmet from \"koa-helmet\";\nimport statics from \"koa-static\";\nimport compose from \"koa-compose\";\nimport compress from \"koa-compress\";\n\nimport router from \"./routes/routes\";\nimport config from \"./config/index\";\nimport errorHandle from \"./common/errorHandle\";\n\nconst app = new Koa();\n\nconst isDevMode = process.env.NODE_ENV === \"production\" ? false : true;\n\n//定义公共的路径，不需要jwt鉴权\nconst jwt = JWT({ secret: config.JWT_SECRET }).unless({\n  path: [/^\\/public/, /\\/login/],\n});\n\nconst middleware = compose([\n  KoaBody({\n    multipart: true,\n    formidable: {\n      keepExtensions: true,\n      maxFieldsSize: 5 * 1024 * 1024,\n    },\n    onError: (err) => {\n      console.log(\"koabody TCL: err\", err);\n    },\n  }), //处理request的body\n  statics(path.join(__dirname, \"../public\")),\n  Cors(),\n  Json({ pretty: false, param: \"pretty\" }),\n  helmet(),\n  errorHandle,\n  jwt,\n]);\n\nif (!isDevMode) {\n  app.use(compress());\n}\n\napp.use(middleware);\napp.use(router());\napp.listen(3000);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640332186071
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "routes.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaCombineRouters = _interopRequireDefault(require(\"koa-combine-routers\"));\n\nvar _publicRouter = _interopRequireDefault(require(\"./publicRouter\"));\n\nvar _loginRouter = _interopRequireDefault(require(\"./loginRouter\"));\n\nvar _userRouter = _interopRequireDefault(require(\"./userRouter\"));\n\nvar _contentRouter = _interopRequireDefault(require(\"./contentRouter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = (0, _koaCombineRouters.default)(_publicRouter.default, _loginRouter.default, _userRouter.default, _contentRouter.default);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJwdWJsaWNSb3V0ZXIiLCJsb2dpblJvdXRlciIsInVzZXJSb3V0ZXIiLCJjb250ZW50Um91dGVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7ZUFFZSxnQ0FDYkEscUJBRGEsRUFFYkMsb0JBRmEsRUFHYkMsbUJBSGEsRUFJYkMsc0JBSmEsQyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29tYmluZVJvdXRlcyBmcm9tIFwia29hLWNvbWJpbmUtcm91dGVyc1wiO1xuXG5pbXBvcnQgcHVibGljUm91dGVyIGZyb20gXCIuL3B1YmxpY1JvdXRlclwiO1xuaW1wb3J0IGxvZ2luUm91dGVyIGZyb20gXCIuL2xvZ2luUm91dGVyXCI7XG5pbXBvcnQgdXNlclJvdXRlciBmcm9tIFwiLi91c2VyUm91dGVyXCI7XG5pbXBvcnQgY29udGVudFJvdXRlciBmcm9tIFwiLi9jb250ZW50Um91dGVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbWJpbmVSb3V0ZXMoXG4gIHB1YmxpY1JvdXRlcixcbiAgbG9naW5Sb3V0ZXIsXG4gIHVzZXJSb3V0ZXIsXG4gIGNvbnRlbnRSb3V0ZXJcbik7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "routes.js"
      ],
      "names": [
        "publicRouter",
        "loginRouter",
        "userRouter",
        "contentRouter"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;;;eAEe,gCACbA,qBADa,EAEbC,oBAFa,EAGbC,mBAHa,EAIbC,sBAJa,C",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import combineRoutes from \"koa-combine-routers\";\n\nimport publicRouter from \"./publicRouter\";\nimport loginRouter from \"./loginRouter\";\nimport userRouter from \"./userRouter\";\nimport contentRouter from \"./contentRouter\";\n\nexport default combineRoutes(\n  publicRouter,\n  loginRouter,\n  userRouter,\n  contentRouter\n);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640264403856
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/demoRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/demoRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/demoRouter.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/demoRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "demoRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _demoController = _interopRequireDefault(require(\"../api/demoController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.get(\"/demo\", _demoController.default.demo);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbW9Sb3V0ZXIuanMiXSwibmFtZXMiOlsicm91dGVyIiwiUm91dGVyIiwiZ2V0IiwiZGVtb0NvbnRyb2xsZXIiLCJkZW1vIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsa0JBQUosRUFBZjtBQUVBRCxNQUFNLENBQUNFLEdBQVAsQ0FBVyxPQUFYLEVBQW9CQyx3QkFBZUMsSUFBbkM7ZUFFZUosTSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUm91dGVyIGZyb20gXCJrb2Etcm91dGVyXCI7XG5pbXBvcnQgZGVtb0NvbnRyb2xsZXIgZnJvbSBcIi4uL2FwaS9kZW1vQ29udHJvbGxlclwiO1xuXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKCk7XG5cbnJvdXRlci5nZXQoXCIvZGVtb1wiLCBkZW1vQ29udHJvbGxlci5kZW1vKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "demoRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "get",
        "demoController",
        "demo"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,OAAX,EAAoBC,wBAAeC,IAAnC;eAEeJ,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport demoController from \"../api/demoController\";\n\nconst router = new Router();\n\nrouter.get(\"/demo\", demoController.demo);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1637846863772
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/demoController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/demoController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/demoController.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/demoController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "demoController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nclass DemoController {\n  constructor() {}\n\n  async demo(ctx) {\n    ctx.body = {\n      msg: \"body message!!\"\n    };\n  }\n\n}\n\nvar _default = new DemoController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbW9Db250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkRlbW9Db250cm9sbGVyIiwiY29uc3RydWN0b3IiLCJkZW1vIiwiY3R4IiwiYm9keSIsIm1zZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLE1BQU1BLGNBQU4sQ0FBcUI7QUFDbkJDLEVBQUFBLFdBQVcsR0FBRyxDQUFFOztBQUNOLFFBQUpDLElBQUksQ0FBQ0MsR0FBRCxFQUFNO0FBQ2RBLElBQUFBLEdBQUcsQ0FBQ0MsSUFBSixHQUFXO0FBQ1RDLE1BQUFBLEdBQUcsRUFBRTtBQURJLEtBQVg7QUFHRDs7QUFOa0I7O2VBU04sSUFBSUwsY0FBSixFIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvYXBpLyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIERlbW9Db250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoKSB7fVxuICBhc3luYyBkZW1vKGN0eCkge1xuICAgIGN0eC5ib2R5ID0ge1xuICAgICAgbXNnOiBcImJvZHkgbWVzc2FnZSEhXCIsXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgRGVtb0NvbnRyb2xsZXIoKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "demoController.js"
      ],
      "names": [
        "DemoController",
        "constructor",
        "demo",
        "ctx",
        "body",
        "msg"
      ],
      "mappings": ";;;;;;;AAAA,MAAMA,cAAN,CAAqB;AACnBC,EAAAA,WAAW,GAAG,CAAE;;AACN,QAAJC,IAAI,CAACC,GAAD,EAAM;AACdA,IAAAA,GAAG,CAACC,IAAJ,GAAW;AACTC,MAAAA,GAAG,EAAE;AADI,KAAX;AAGD;;AANkB;;eASN,IAAIL,cAAJ,E",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "class DemoController {\n  constructor() {}\n  async demo(ctx) {\n    ctx.body = {\n      msg: \"body message!!\",\n    };\n  }\n}\n\nexport default new DemoController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1637846995063
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "routes.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaCombineRouters = _interopRequireDefault(require(\"koa-combine-routers\"));\n\nvar _publicRouter = _interopRequireDefault(require(\"./publicRouter\"));\n\nvar _loginRouter = _interopRequireDefault(require(\"./loginRouter\"));\n\nvar _userRouter = _interopRequireDefault(require(\"./userRouter\"));\n\nvar _contentRouter = _interopRequireDefault(require(\"./contentRouter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = (0, _koaCombineRouters.default)(_publicRouter.default, _loginRouter.default, _userRouter.default, _contentRouter.default);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJwdWJsaWNSb3V0ZXIiLCJsb2dpblJvdXRlciIsInVzZXJSb3V0ZXIiLCJjb250ZW50Um91dGVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7ZUFFZSxnQ0FDYkEscUJBRGEsRUFFYkMsb0JBRmEsRUFHYkMsbUJBSGEsRUFJYkMsc0JBSmEsQyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29tYmluZVJvdXRlcyBmcm9tIFwia29hLWNvbWJpbmUtcm91dGVyc1wiO1xuXG5pbXBvcnQgcHVibGljUm91dGVyIGZyb20gXCIuL3B1YmxpY1JvdXRlclwiO1xuaW1wb3J0IGxvZ2luUm91dGVyIGZyb20gXCIuL2xvZ2luUm91dGVyXCI7XG5pbXBvcnQgdXNlclJvdXRlciBmcm9tIFwiLi91c2VyUm91dGVyXCI7XG5pbXBvcnQgY29udGVudFJvdXRlciBmcm9tIFwiLi9jb250ZW50Um91dGVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbWJpbmVSb3V0ZXMoXG4gIHB1YmxpY1JvdXRlcixcbiAgbG9naW5Sb3V0ZXIsXG4gIHVzZXJSb3V0ZXIsXG4gIGNvbnRlbnRSb3V0ZXJcbik7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "routes.js"
      ],
      "names": [
        "publicRouter",
        "loginRouter",
        "userRouter",
        "contentRouter"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;;;eAEe,gCACbA,qBADa,EAEbC,oBAFa,EAGbC,mBAHa,EAIbC,sBAJa,C",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import combineRoutes from \"koa-combine-routers\";\n\nimport publicRouter from \"./publicRouter\";\nimport loginRouter from \"./loginRouter\";\nimport userRouter from \"./userRouter\";\nimport contentRouter from \"./contentRouter\";\n\nexport default combineRoutes(\n  publicRouter,\n  loginRouter,\n  userRouter,\n  contentRouter\n);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640264403856
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/demoRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/demoRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/demoRouter.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/demoRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "demoRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _demoController = _interopRequireDefault(require(\"../api/demoController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.get(\"/demo\", _demoController.default.demo);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbW9Sb3V0ZXIuanMiXSwibmFtZXMiOlsicm91dGVyIiwiUm91dGVyIiwiZ2V0IiwiZGVtb0NvbnRyb2xsZXIiLCJkZW1vIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsa0JBQUosRUFBZjtBQUVBRCxNQUFNLENBQUNFLEdBQVAsQ0FBVyxPQUFYLEVBQW9CQyx3QkFBZUMsSUFBbkM7ZUFFZUosTSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUm91dGVyIGZyb20gXCJrb2Etcm91dGVyXCI7XG5pbXBvcnQgZGVtb0NvbnRyb2xsZXIgZnJvbSBcIi4uL2FwaS9kZW1vQ29udHJvbGxlclwiO1xuXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKCk7XG5cbnJvdXRlci5nZXQoXCIvZGVtb1wiLCBkZW1vQ29udHJvbGxlci5kZW1vKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "demoRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "get",
        "demoController",
        "demo"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,OAAX,EAAoBC,wBAAeC,IAAnC;eAEeJ,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport demoController from \"../api/demoController\";\n\nconst router = new Router();\n\nrouter.get(\"/demo\", demoController.demo);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1637846863772
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/demoController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/demoController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/demoController.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/demoController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "demoController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nclass DemoController {\n  constructor() {}\n\n  async demo(ctx) {\n    ctx.body = {\n      msg: \"body message!!\"\n    };\n  }\n\n}\n\nvar _default = new DemoController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbW9Db250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkRlbW9Db250cm9sbGVyIiwiY29uc3RydWN0b3IiLCJkZW1vIiwiY3R4IiwiYm9keSIsIm1zZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLE1BQU1BLGNBQU4sQ0FBcUI7QUFDbkJDLEVBQUFBLFdBQVcsR0FBRyxDQUFFOztBQUNOLFFBQUpDLElBQUksQ0FBQ0MsR0FBRCxFQUFNO0FBQ2RBLElBQUFBLEdBQUcsQ0FBQ0MsSUFBSixHQUFXO0FBQ1RDLE1BQUFBLEdBQUcsRUFBRTtBQURJLEtBQVg7QUFHRDs7QUFOa0I7O2VBU04sSUFBSUwsY0FBSixFIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvYXBpLyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIERlbW9Db250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoKSB7fVxuICBhc3luYyBkZW1vKGN0eCkge1xuICAgIGN0eC5ib2R5ID0ge1xuICAgICAgbXNnOiBcImJvZHkgbWVzc2FnZSEhXCIsXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgRGVtb0NvbnRyb2xsZXIoKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "demoController.js"
      ],
      "names": [
        "DemoController",
        "constructor",
        "demo",
        "ctx",
        "body",
        "msg"
      ],
      "mappings": ";;;;;;;AAAA,MAAMA,cAAN,CAAqB;AACnBC,EAAAA,WAAW,GAAG,CAAE;;AACN,QAAJC,IAAI,CAACC,GAAD,EAAM;AACdA,IAAAA,GAAG,CAACC,IAAJ,GAAW;AACTC,MAAAA,GAAG,EAAE;AADI,KAAX;AAGD;;AANkB;;eASN,IAAIL,cAAJ,E",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "class DemoController {\n  constructor() {}\n  async demo(ctx) {\n    ctx.body = {\n      msg: \"body message!!\",\n    };\n  }\n}\n\nexport default new DemoController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1637846995063
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "publicRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _publicController = _interopRequireDefault(require(\"../api/publicController\"));\n\nvar _contentController = _interopRequireDefault(require(\"../api/contentController\"));\n\nvar _userController = _interopRequireDefault(require(\"../api/userController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.prefix(\"/public\"); // 获取图形验证码\n\nrouter.get(\"/getCaptcha\", _publicController.default.getCaptcha); // 获取文章列表\n\nrouter.get(\"/list\", _contentController.default.getPostList); // 友情链接\n\nrouter.get(\"/links\", _contentController.default.getLinks); // 友情链接\n\nrouter.get(\"/tips\", _contentController.default.getTips); // 本周热议\n\nrouter.get(\"/topWeek\", _contentController.default.getTopWeek); // 确认修改邮件\n\nrouter.get(\"/reset-email\", _userController.default.updateUsername);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpY1JvdXRlci5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwcmVmaXgiLCJnZXQiLCJwdWJsaWNDb250cm9sbGVyIiwiZ2V0Q2FwdGNoYSIsImNvbnRlbnRDb250cm9sbGVyIiwiZ2V0UG9zdExpc3QiLCJnZXRMaW5rcyIsImdldFRpcHMiLCJnZXRUb3BXZWVrIiwidXNlckNvbnRyb2xsZXIiLCJ1cGRhdGVVc2VybmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLElBQUlDLGtCQUFKLEVBQWY7QUFFQUQsTUFBTSxDQUFDRSxNQUFQLENBQWMsU0FBZCxFLENBQ0E7O0FBQ0FGLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLGFBQVgsRUFBMEJDLDBCQUFpQkMsVUFBM0MsRSxDQUVBOztBQUNBTCxNQUFNLENBQUNHLEdBQVAsQ0FBVyxPQUFYLEVBQW9CRywyQkFBa0JDLFdBQXRDLEUsQ0FFQTs7QUFDQVAsTUFBTSxDQUFDRyxHQUFQLENBQVcsUUFBWCxFQUFxQkcsMkJBQWtCRSxRQUF2QyxFLENBRUE7O0FBQ0FSLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLE9BQVgsRUFBb0JHLDJCQUFrQkcsT0FBdEMsRSxDQUVBOztBQUNBVCxNQUFNLENBQUNHLEdBQVAsQ0FBVyxVQUFYLEVBQXVCRywyQkFBa0JJLFVBQXpDLEUsQ0FFQTs7QUFDQVYsTUFBTSxDQUFDRyxHQUFQLENBQVcsY0FBWCxFQUEyQlEsd0JBQWVDLGNBQTFDO2VBRWVaLE0iLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9yb3V0ZXMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJvdXRlciBmcm9tIFwia29hLXJvdXRlclwiO1xuaW1wb3J0IHB1YmxpY0NvbnRyb2xsZXIgZnJvbSBcIi4uL2FwaS9wdWJsaWNDb250cm9sbGVyXCI7XG5pbXBvcnQgY29udGVudENvbnRyb2xsZXIgZnJvbSBcIi4uL2FwaS9jb250ZW50Q29udHJvbGxlclwiO1xuaW1wb3J0IHVzZXJDb250cm9sbGVyIGZyb20gXCIuLi9hcGkvdXNlckNvbnRyb2xsZXJcIjtcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuXG5yb3V0ZXIucHJlZml4KFwiL3B1YmxpY1wiKTtcbi8vIOiOt+WPluWbvuW9oumqjOivgeeggVxucm91dGVyLmdldChcIi9nZXRDYXB0Y2hhXCIsIHB1YmxpY0NvbnRyb2xsZXIuZ2V0Q2FwdGNoYSk7XG5cbi8vIOiOt+WPluaWh+eroOWIl+ihqFxucm91dGVyLmdldChcIi9saXN0XCIsIGNvbnRlbnRDb250cm9sbGVyLmdldFBvc3RMaXN0KTtcblxuLy8g5Y+L5oOF6ZO+5o6lXG5yb3V0ZXIuZ2V0KFwiL2xpbmtzXCIsIGNvbnRlbnRDb250cm9sbGVyLmdldExpbmtzKTtcblxuLy8g5Y+L5oOF6ZO+5o6lXG5yb3V0ZXIuZ2V0KFwiL3RpcHNcIiwgY29udGVudENvbnRyb2xsZXIuZ2V0VGlwcyk7XG5cbi8vIOacrOWRqOeDreiurlxucm91dGVyLmdldChcIi90b3BXZWVrXCIsIGNvbnRlbnRDb250cm9sbGVyLmdldFRvcFdlZWspO1xuXG4vLyDnoa7orqTkv67mlLnpgq7ku7ZcbnJvdXRlci5nZXQoXCIvcmVzZXQtZW1haWxcIiwgdXNlckNvbnRyb2xsZXIudXBkYXRlVXNlcm5hbWUpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "publicRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "get",
        "publicController",
        "getCaptcha",
        "contentController",
        "getPostList",
        "getLinks",
        "getTips",
        "getTopWeek",
        "userController",
        "updateUsername"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,SAAd,E,CACA;;AACAF,MAAM,CAACG,GAAP,CAAW,aAAX,EAA0BC,0BAAiBC,UAA3C,E,CAEA;;AACAL,MAAM,CAACG,GAAP,CAAW,OAAX,EAAoBG,2BAAkBC,WAAtC,E,CAEA;;AACAP,MAAM,CAACG,GAAP,CAAW,QAAX,EAAqBG,2BAAkBE,QAAvC,E,CAEA;;AACAR,MAAM,CAACG,GAAP,CAAW,OAAX,EAAoBG,2BAAkBG,OAAtC,E,CAEA;;AACAT,MAAM,CAACG,GAAP,CAAW,UAAX,EAAuBG,2BAAkBI,UAAzC,E,CAEA;;AACAV,MAAM,CAACG,GAAP,CAAW,cAAX,EAA2BQ,wBAAeC,cAA1C;eAEeZ,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport publicController from \"../api/publicController\";\nimport contentController from \"../api/contentController\";\nimport userController from \"../api/userController\";\n\nconst router = new Router();\n\nrouter.prefix(\"/public\");\n// 获取图形验证码\nrouter.get(\"/getCaptcha\", publicController.getCaptcha);\n\n// 获取文章列表\nrouter.get(\"/list\", contentController.getPostList);\n\n// 友情链接\nrouter.get(\"/links\", contentController.getLinks);\n\n// 友情链接\nrouter.get(\"/tips\", contentController.getTips);\n\n// 本周热议\nrouter.get(\"/topWeek\", contentController.getTopWeek);\n\n// 确认修改邮件\nrouter.get(\"/reset-email\", userController.updateUsername);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640274688613
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/publicController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "publicController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _svgCaptcha = _interopRequireDefault(require(\"svg-captcha\"));\n\nvar _RedisConfig = require(\"../config/RedisConfig\");\n\nvar _Post = _interopRequireDefault(require(\"../model/Post\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 业务层\nclass PublicController {\n  constructor() {} // 获取图片验证码\n\n\n  async getCaptcha(ctx) {\n    const body = ctx.request.query;\n\n    const newCaptcha = _svgCaptcha.default.create({\n      size: 4,\n      ignoreChars: \"0o1il\",\n      color: true,\n      noise: Math.floor(Math.random() * 5),\n      width: 150,\n      height: 38\n    }); // 图片有效期为 10 * 60 秒\n\n\n    (0, _RedisConfig.setValue)(body.sid, newCaptcha.text, 10 * 60);\n    ctx.body = {\n      code: 200,\n      data: newCaptcha.data\n    };\n  } // 获取热门文章\n  // async getHotPost (ctx) {\n  // }\n  // 获取热门评论/最新评论\n  // async getHotComments (ctx) {\n  // }\n\n\n}\n\nvar _default = new PublicController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpY0NvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiUHVibGljQ29udHJvbGxlciIsImNvbnN0cnVjdG9yIiwiZ2V0Q2FwdGNoYSIsImN0eCIsImJvZHkiLCJyZXF1ZXN0IiwicXVlcnkiLCJuZXdDYXB0Y2hhIiwic3ZnQ2FwdGNoYSIsImNyZWF0ZSIsInNpemUiLCJpZ25vcmVDaGFycyIsImNvbG9yIiwibm9pc2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ3aWR0aCIsImhlaWdodCIsInNpZCIsInRleHQiLCJjb2RlIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOztBQUNBOzs7O0FBSEE7QUFLQSxNQUFNQSxnQkFBTixDQUF1QjtBQUNyQkMsRUFBQUEsV0FBVyxHQUFHLENBQUUsQ0FESyxDQUVyQjs7O0FBQ2dCLFFBQVZDLFVBQVUsQ0FBQ0MsR0FBRCxFQUFNO0FBQ3BCLFVBQU1DLElBQUksR0FBR0QsR0FBRyxDQUFDRSxPQUFKLENBQVlDLEtBQXpCOztBQUNBLFVBQU1DLFVBQVUsR0FBR0Msb0JBQVdDLE1BQVgsQ0FBa0I7QUFDbkNDLE1BQUFBLElBQUksRUFBRSxDQUQ2QjtBQUVuQ0MsTUFBQUEsV0FBVyxFQUFFLE9BRnNCO0FBR25DQyxNQUFBQSxLQUFLLEVBQUUsSUFINEI7QUFJbkNDLE1BQUFBLEtBQUssRUFBRUMsSUFBSSxDQUFDQyxLQUFMLENBQVdELElBQUksQ0FBQ0UsTUFBTCxLQUFnQixDQUEzQixDQUo0QjtBQUtuQ0MsTUFBQUEsS0FBSyxFQUFFLEdBTDRCO0FBTW5DQyxNQUFBQSxNQUFNLEVBQUU7QUFOMkIsS0FBbEIsQ0FBbkIsQ0FGb0IsQ0FVcEI7OztBQUNBLCtCQUFTZCxJQUFJLENBQUNlLEdBQWQsRUFBbUJaLFVBQVUsQ0FBQ2EsSUFBOUIsRUFBb0MsS0FBSyxFQUF6QztBQUNBakIsSUFBQUEsR0FBRyxDQUFDQyxJQUFKLEdBQVc7QUFDVGlCLE1BQUFBLElBQUksRUFBRSxHQURHO0FBRVRDLE1BQUFBLElBQUksRUFBRWYsVUFBVSxDQUFDZTtBQUZSLEtBQVg7QUFJRCxHQW5Cb0IsQ0FvQnJCO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7O0FBM0JxQjs7ZUE4QlIsSUFBSXRCLGdCQUFKLEUiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9hcGkvIiwic291cmNlc0NvbnRlbnQiOlsiLy8g5Lia5Yqh5bGCXG5pbXBvcnQgc3ZnQ2FwdGNoYSBmcm9tIFwic3ZnLWNhcHRjaGFcIjtcbmltcG9ydCB7IHNldFZhbHVlLCBnZXRWYWx1ZSB9IGZyb20gXCIuLi9jb25maWcvUmVkaXNDb25maWdcIjtcbmltcG9ydCBQb3N0IGZyb20gXCIuLi9tb2RlbC9Qb3N0XCI7XG5cbmNsYXNzIFB1YmxpY0NvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG4gIC8vIOiOt+WPluWbvueJh+mqjOivgeeggVxuICBhc3luYyBnZXRDYXB0Y2hhKGN0eCkge1xuICAgIGNvbnN0IGJvZHkgPSBjdHgucmVxdWVzdC5xdWVyeTtcbiAgICBjb25zdCBuZXdDYXB0Y2hhID0gc3ZnQ2FwdGNoYS5jcmVhdGUoe1xuICAgICAgc2l6ZTogNCxcbiAgICAgIGlnbm9yZUNoYXJzOiBcIjBvMWlsXCIsXG4gICAgICBjb2xvcjogdHJ1ZSxcbiAgICAgIG5vaXNlOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSxcbiAgICAgIHdpZHRoOiAxNTAsXG4gICAgICBoZWlnaHQ6IDM4LFxuICAgIH0pO1xuICAgIC8vIOWbvueJh+acieaViOacn+S4uiAxMCAqIDYwIOenklxuICAgIHNldFZhbHVlKGJvZHkuc2lkLCBuZXdDYXB0Y2hhLnRleHQsIDEwICogNjApO1xuICAgIGN0eC5ib2R5ID0ge1xuICAgICAgY29kZTogMjAwLFxuICAgICAgZGF0YTogbmV3Q2FwdGNoYS5kYXRhLFxuICAgIH07XG4gIH1cbiAgLy8g6I635Y+W54Ot6Zeo5paH56ugXG4gIC8vIGFzeW5jIGdldEhvdFBvc3QgKGN0eCkge1xuXG4gIC8vIH1cbiAgLy8g6I635Y+W54Ot6Zeo6K+E6K66L+acgOaWsOivhOiuulxuICAvLyBhc3luYyBnZXRIb3RDb21tZW50cyAoY3R4KSB7XG5cbiAgLy8gfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgUHVibGljQ29udHJvbGxlcigpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "publicController.js"
      ],
      "names": [
        "PublicController",
        "constructor",
        "getCaptcha",
        "ctx",
        "body",
        "request",
        "query",
        "newCaptcha",
        "svgCaptcha",
        "create",
        "size",
        "ignoreChars",
        "color",
        "noise",
        "Math",
        "floor",
        "random",
        "width",
        "height",
        "sid",
        "text",
        "code",
        "data"
      ],
      "mappings": ";;;;;;;AACA;;AACA;;AACA;;;;AAHA;AAKA,MAAMA,gBAAN,CAAuB;AACrBC,EAAAA,WAAW,GAAG,CAAE,CADK,CAErB;;;AACgB,QAAVC,UAAU,CAACC,GAAD,EAAM;AACpB,UAAMC,IAAI,GAAGD,GAAG,CAACE,OAAJ,CAAYC,KAAzB;;AACA,UAAMC,UAAU,GAAGC,oBAAWC,MAAX,CAAkB;AACnCC,MAAAA,IAAI,EAAE,CAD6B;AAEnCC,MAAAA,WAAW,EAAE,OAFsB;AAGnCC,MAAAA,KAAK,EAAE,IAH4B;AAInCC,MAAAA,KAAK,EAAEC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,CAA3B,CAJ4B;AAKnCC,MAAAA,KAAK,EAAE,GAL4B;AAMnCC,MAAAA,MAAM,EAAE;AAN2B,KAAlB,CAAnB,CAFoB,CAUpB;;;AACA,+BAASd,IAAI,CAACe,GAAd,EAAmBZ,UAAU,CAACa,IAA9B,EAAoC,KAAK,EAAzC;AACAjB,IAAAA,GAAG,CAACC,IAAJ,GAAW;AACTiB,MAAAA,IAAI,EAAE,GADG;AAETC,MAAAA,IAAI,EAAEf,UAAU,CAACe;AAFR,KAAX;AAID,GAnBoB,CAoBrB;AACA;AAEA;AACA;AACA;AAEA;;;AA3BqB;;eA8BR,IAAItB,gBAAJ,E",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "// 业务层\nimport svgCaptcha from \"svg-captcha\";\nimport { setValue, getValue } from \"../config/RedisConfig\";\nimport Post from \"../model/Post\";\n\nclass PublicController {\n  constructor() {}\n  // 获取图片验证码\n  async getCaptcha(ctx) {\n    const body = ctx.request.query;\n    const newCaptcha = svgCaptcha.create({\n      size: 4,\n      ignoreChars: \"0o1il\",\n      color: true,\n      noise: Math.floor(Math.random() * 5),\n      width: 150,\n      height: 38,\n    });\n    // 图片有效期为 10 * 60 秒\n    setValue(body.sid, newCaptcha.text, 10 * 60);\n    ctx.body = {\n      code: 200,\n      data: newCaptcha.data,\n    };\n  }\n  // 获取热门文章\n  // async getHotPost (ctx) {\n\n  // }\n  // 获取热门评论/最新评论\n  // async getHotComments (ctx) {\n\n  // }\n}\n\nexport default new PublicController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640096677411
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "publicRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _publicController = _interopRequireDefault(require(\"../api/publicController\"));\n\nvar _contentController = _interopRequireDefault(require(\"../api/contentController\"));\n\nvar _userController = _interopRequireDefault(require(\"../api/userController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.prefix(\"/public\"); // 获取图形验证码\n\nrouter.get(\"/getCaptcha\", _publicController.default.getCaptcha); // 获取文章列表\n\nrouter.get(\"/list\", _contentController.default.getPostList); // 友情链接\n\nrouter.get(\"/links\", _contentController.default.getLinks); // 友情链接\n\nrouter.get(\"/tips\", _contentController.default.getTips); // 本周热议\n\nrouter.get(\"/topWeek\", _contentController.default.getTopWeek); // 确认修改邮件\n\nrouter.get(\"/reset-email\", _userController.default.updateUsername);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpY1JvdXRlci5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwcmVmaXgiLCJnZXQiLCJwdWJsaWNDb250cm9sbGVyIiwiZ2V0Q2FwdGNoYSIsImNvbnRlbnRDb250cm9sbGVyIiwiZ2V0UG9zdExpc3QiLCJnZXRMaW5rcyIsImdldFRpcHMiLCJnZXRUb3BXZWVrIiwidXNlckNvbnRyb2xsZXIiLCJ1cGRhdGVVc2VybmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLElBQUlDLGtCQUFKLEVBQWY7QUFFQUQsTUFBTSxDQUFDRSxNQUFQLENBQWMsU0FBZCxFLENBQ0E7O0FBQ0FGLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLGFBQVgsRUFBMEJDLDBCQUFpQkMsVUFBM0MsRSxDQUVBOztBQUNBTCxNQUFNLENBQUNHLEdBQVAsQ0FBVyxPQUFYLEVBQW9CRywyQkFBa0JDLFdBQXRDLEUsQ0FFQTs7QUFDQVAsTUFBTSxDQUFDRyxHQUFQLENBQVcsUUFBWCxFQUFxQkcsMkJBQWtCRSxRQUF2QyxFLENBRUE7O0FBQ0FSLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLE9BQVgsRUFBb0JHLDJCQUFrQkcsT0FBdEMsRSxDQUVBOztBQUNBVCxNQUFNLENBQUNHLEdBQVAsQ0FBVyxVQUFYLEVBQXVCRywyQkFBa0JJLFVBQXpDLEUsQ0FFQTs7QUFDQVYsTUFBTSxDQUFDRyxHQUFQLENBQVcsY0FBWCxFQUEyQlEsd0JBQWVDLGNBQTFDO2VBRWVaLE0iLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9yb3V0ZXMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJvdXRlciBmcm9tIFwia29hLXJvdXRlclwiO1xuaW1wb3J0IHB1YmxpY0NvbnRyb2xsZXIgZnJvbSBcIi4uL2FwaS9wdWJsaWNDb250cm9sbGVyXCI7XG5pbXBvcnQgY29udGVudENvbnRyb2xsZXIgZnJvbSBcIi4uL2FwaS9jb250ZW50Q29udHJvbGxlclwiO1xuaW1wb3J0IHVzZXJDb250cm9sbGVyIGZyb20gXCIuLi9hcGkvdXNlckNvbnRyb2xsZXJcIjtcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuXG5yb3V0ZXIucHJlZml4KFwiL3B1YmxpY1wiKTtcbi8vIOiOt+WPluWbvuW9oumqjOivgeeggVxucm91dGVyLmdldChcIi9nZXRDYXB0Y2hhXCIsIHB1YmxpY0NvbnRyb2xsZXIuZ2V0Q2FwdGNoYSk7XG5cbi8vIOiOt+WPluaWh+eroOWIl+ihqFxucm91dGVyLmdldChcIi9saXN0XCIsIGNvbnRlbnRDb250cm9sbGVyLmdldFBvc3RMaXN0KTtcblxuLy8g5Y+L5oOF6ZO+5o6lXG5yb3V0ZXIuZ2V0KFwiL2xpbmtzXCIsIGNvbnRlbnRDb250cm9sbGVyLmdldExpbmtzKTtcblxuLy8g5Y+L5oOF6ZO+5o6lXG5yb3V0ZXIuZ2V0KFwiL3RpcHNcIiwgY29udGVudENvbnRyb2xsZXIuZ2V0VGlwcyk7XG5cbi8vIOacrOWRqOeDreiurlxucm91dGVyLmdldChcIi90b3BXZWVrXCIsIGNvbnRlbnRDb250cm9sbGVyLmdldFRvcFdlZWspO1xuXG4vLyDnoa7orqTkv67mlLnpgq7ku7ZcbnJvdXRlci5nZXQoXCIvcmVzZXQtZW1haWxcIiwgdXNlckNvbnRyb2xsZXIudXBkYXRlVXNlcm5hbWUpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "publicRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "get",
        "publicController",
        "getCaptcha",
        "contentController",
        "getPostList",
        "getLinks",
        "getTips",
        "getTopWeek",
        "userController",
        "updateUsername"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,SAAd,E,CACA;;AACAF,MAAM,CAACG,GAAP,CAAW,aAAX,EAA0BC,0BAAiBC,UAA3C,E,CAEA;;AACAL,MAAM,CAACG,GAAP,CAAW,OAAX,EAAoBG,2BAAkBC,WAAtC,E,CAEA;;AACAP,MAAM,CAACG,GAAP,CAAW,QAAX,EAAqBG,2BAAkBE,QAAvC,E,CAEA;;AACAR,MAAM,CAACG,GAAP,CAAW,OAAX,EAAoBG,2BAAkBG,OAAtC,E,CAEA;;AACAT,MAAM,CAACG,GAAP,CAAW,UAAX,EAAuBG,2BAAkBI,UAAzC,E,CAEA;;AACAV,MAAM,CAACG,GAAP,CAAW,cAAX,EAA2BQ,wBAAeC,cAA1C;eAEeZ,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport publicController from \"../api/publicController\";\nimport contentController from \"../api/contentController\";\nimport userController from \"../api/userController\";\n\nconst router = new Router();\n\nrouter.prefix(\"/public\");\n// 获取图形验证码\nrouter.get(\"/getCaptcha\", publicController.getCaptcha);\n\n// 获取文章列表\nrouter.get(\"/list\", contentController.getPostList);\n\n// 友情链接\nrouter.get(\"/links\", contentController.getLinks);\n\n// 友情链接\nrouter.get(\"/tips\", contentController.getTips);\n\n// 本周热议\nrouter.get(\"/topWeek\", contentController.getTopWeek);\n\n// 确认修改邮件\nrouter.get(\"/reset-email\", userController.updateUsername);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640274688613
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/publicController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "publicController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _svgCaptcha = _interopRequireDefault(require(\"svg-captcha\"));\n\nvar _RedisConfig = require(\"../config/RedisConfig\");\n\nvar _Post = _interopRequireDefault(require(\"../model/Post\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 业务层\nclass PublicController {\n  constructor() {} // 获取图片验证码\n\n\n  async getCaptcha(ctx) {\n    const body = ctx.request.query;\n\n    const newCaptcha = _svgCaptcha.default.create({\n      size: 4,\n      ignoreChars: \"0o1il\",\n      color: true,\n      noise: Math.floor(Math.random() * 5),\n      width: 150,\n      height: 38\n    }); // 图片有效期为 10 * 60 秒\n\n\n    (0, _RedisConfig.setValue)(body.sid, newCaptcha.text, 10 * 60);\n    ctx.body = {\n      code: 200,\n      data: newCaptcha.data\n    };\n  } // 获取热门文章\n  // async getHotPost (ctx) {\n  // }\n  // 获取热门评论/最新评论\n  // async getHotComments (ctx) {\n  // }\n\n\n}\n\nvar _default = new PublicController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpY0NvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiUHVibGljQ29udHJvbGxlciIsImNvbnN0cnVjdG9yIiwiZ2V0Q2FwdGNoYSIsImN0eCIsImJvZHkiLCJyZXF1ZXN0IiwicXVlcnkiLCJuZXdDYXB0Y2hhIiwic3ZnQ2FwdGNoYSIsImNyZWF0ZSIsInNpemUiLCJpZ25vcmVDaGFycyIsImNvbG9yIiwibm9pc2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ3aWR0aCIsImhlaWdodCIsInNpZCIsInRleHQiLCJjb2RlIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOztBQUNBOzs7O0FBSEE7QUFLQSxNQUFNQSxnQkFBTixDQUF1QjtBQUNyQkMsRUFBQUEsV0FBVyxHQUFHLENBQUUsQ0FESyxDQUVyQjs7O0FBQ2dCLFFBQVZDLFVBQVUsQ0FBQ0MsR0FBRCxFQUFNO0FBQ3BCLFVBQU1DLElBQUksR0FBR0QsR0FBRyxDQUFDRSxPQUFKLENBQVlDLEtBQXpCOztBQUNBLFVBQU1DLFVBQVUsR0FBR0Msb0JBQVdDLE1BQVgsQ0FBa0I7QUFDbkNDLE1BQUFBLElBQUksRUFBRSxDQUQ2QjtBQUVuQ0MsTUFBQUEsV0FBVyxFQUFFLE9BRnNCO0FBR25DQyxNQUFBQSxLQUFLLEVBQUUsSUFINEI7QUFJbkNDLE1BQUFBLEtBQUssRUFBRUMsSUFBSSxDQUFDQyxLQUFMLENBQVdELElBQUksQ0FBQ0UsTUFBTCxLQUFnQixDQUEzQixDQUo0QjtBQUtuQ0MsTUFBQUEsS0FBSyxFQUFFLEdBTDRCO0FBTW5DQyxNQUFBQSxNQUFNLEVBQUU7QUFOMkIsS0FBbEIsQ0FBbkIsQ0FGb0IsQ0FVcEI7OztBQUNBLCtCQUFTZCxJQUFJLENBQUNlLEdBQWQsRUFBbUJaLFVBQVUsQ0FBQ2EsSUFBOUIsRUFBb0MsS0FBSyxFQUF6QztBQUNBakIsSUFBQUEsR0FBRyxDQUFDQyxJQUFKLEdBQVc7QUFDVGlCLE1BQUFBLElBQUksRUFBRSxHQURHO0FBRVRDLE1BQUFBLElBQUksRUFBRWYsVUFBVSxDQUFDZTtBQUZSLEtBQVg7QUFJRCxHQW5Cb0IsQ0FvQnJCO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7O0FBM0JxQjs7ZUE4QlIsSUFBSXRCLGdCQUFKLEUiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9hcGkvIiwic291cmNlc0NvbnRlbnQiOlsiLy8g5Lia5Yqh5bGCXG5pbXBvcnQgc3ZnQ2FwdGNoYSBmcm9tIFwic3ZnLWNhcHRjaGFcIjtcbmltcG9ydCB7IHNldFZhbHVlLCBnZXRWYWx1ZSB9IGZyb20gXCIuLi9jb25maWcvUmVkaXNDb25maWdcIjtcbmltcG9ydCBQb3N0IGZyb20gXCIuLi9tb2RlbC9Qb3N0XCI7XG5cbmNsYXNzIFB1YmxpY0NvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG4gIC8vIOiOt+WPluWbvueJh+mqjOivgeeggVxuICBhc3luYyBnZXRDYXB0Y2hhKGN0eCkge1xuICAgIGNvbnN0IGJvZHkgPSBjdHgucmVxdWVzdC5xdWVyeTtcbiAgICBjb25zdCBuZXdDYXB0Y2hhID0gc3ZnQ2FwdGNoYS5jcmVhdGUoe1xuICAgICAgc2l6ZTogNCxcbiAgICAgIGlnbm9yZUNoYXJzOiBcIjBvMWlsXCIsXG4gICAgICBjb2xvcjogdHJ1ZSxcbiAgICAgIG5vaXNlOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSxcbiAgICAgIHdpZHRoOiAxNTAsXG4gICAgICBoZWlnaHQ6IDM4LFxuICAgIH0pO1xuICAgIC8vIOWbvueJh+acieaViOacn+S4uiAxMCAqIDYwIOenklxuICAgIHNldFZhbHVlKGJvZHkuc2lkLCBuZXdDYXB0Y2hhLnRleHQsIDEwICogNjApO1xuICAgIGN0eC5ib2R5ID0ge1xuICAgICAgY29kZTogMjAwLFxuICAgICAgZGF0YTogbmV3Q2FwdGNoYS5kYXRhLFxuICAgIH07XG4gIH1cbiAgLy8g6I635Y+W54Ot6Zeo5paH56ugXG4gIC8vIGFzeW5jIGdldEhvdFBvc3QgKGN0eCkge1xuXG4gIC8vIH1cbiAgLy8g6I635Y+W54Ot6Zeo6K+E6K66L+acgOaWsOivhOiuulxuICAvLyBhc3luYyBnZXRIb3RDb21tZW50cyAoY3R4KSB7XG5cbiAgLy8gfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgUHVibGljQ29udHJvbGxlcigpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "publicController.js"
      ],
      "names": [
        "PublicController",
        "constructor",
        "getCaptcha",
        "ctx",
        "body",
        "request",
        "query",
        "newCaptcha",
        "svgCaptcha",
        "create",
        "size",
        "ignoreChars",
        "color",
        "noise",
        "Math",
        "floor",
        "random",
        "width",
        "height",
        "sid",
        "text",
        "code",
        "data"
      ],
      "mappings": ";;;;;;;AACA;;AACA;;AACA;;;;AAHA;AAKA,MAAMA,gBAAN,CAAuB;AACrBC,EAAAA,WAAW,GAAG,CAAE,CADK,CAErB;;;AACgB,QAAVC,UAAU,CAACC,GAAD,EAAM;AACpB,UAAMC,IAAI,GAAGD,GAAG,CAACE,OAAJ,CAAYC,KAAzB;;AACA,UAAMC,UAAU,GAAGC,oBAAWC,MAAX,CAAkB;AACnCC,MAAAA,IAAI,EAAE,CAD6B;AAEnCC,MAAAA,WAAW,EAAE,OAFsB;AAGnCC,MAAAA,KAAK,EAAE,IAH4B;AAInCC,MAAAA,KAAK,EAAEC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,CAA3B,CAJ4B;AAKnCC,MAAAA,KAAK,EAAE,GAL4B;AAMnCC,MAAAA,MAAM,EAAE;AAN2B,KAAlB,CAAnB,CAFoB,CAUpB;;;AACA,+BAASd,IAAI,CAACe,GAAd,EAAmBZ,UAAU,CAACa,IAA9B,EAAoC,KAAK,EAAzC;AACAjB,IAAAA,GAAG,CAACC,IAAJ,GAAW;AACTiB,MAAAA,IAAI,EAAE,GADG;AAETC,MAAAA,IAAI,EAAEf,UAAU,CAACe;AAFR,KAAX;AAID,GAnBoB,CAoBrB;AACA;AAEA;AACA;AACA;AAEA;;;AA3BqB;;eA8BR,IAAItB,gBAAJ,E",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "// 业务层\nimport svgCaptcha from \"svg-captcha\";\nimport { setValue, getValue } from \"../config/RedisConfig\";\nimport Post from \"../model/Post\";\n\nclass PublicController {\n  constructor() {}\n  // 获取图片验证码\n  async getCaptcha(ctx) {\n    const body = ctx.request.query;\n    const newCaptcha = svgCaptcha.create({\n      size: 4,\n      ignoreChars: \"0o1il\",\n      color: true,\n      noise: Math.floor(Math.random() * 5),\n      width: 150,\n      height: 38,\n    });\n    // 图片有效期为 10 * 60 秒\n    setValue(body.sid, newCaptcha.text, 10 * 60);\n    ctx.body = {\n      code: 200,\n      data: newCaptcha.data,\n    };\n  }\n  // 获取热门文章\n  // async getHotPost (ctx) {\n\n  // }\n  // 获取热门评论/最新评论\n  // async getHotComments (ctx) {\n\n  // }\n}\n\nexport default new PublicController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640096677411
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/index.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _koa = _interopRequireDefault(require(\"koa\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _cors = _interopRequireDefault(require(\"@koa/cors\"));\n\nvar _koaBody = _interopRequireDefault(require(\"koa-body\"));\n\nvar _koaJson = _interopRequireDefault(require(\"koa-json\"));\n\nvar _koaHelmet = _interopRequireDefault(require(\"koa-helmet\"));\n\nvar _koaStatic = _interopRequireDefault(require(\"koa-static\"));\n\nvar _koaCompose = _interopRequireDefault(require(\"koa-compose\"));\n\nvar _koaCompress = _interopRequireDefault(require(\"koa-compress\"));\n\nvar _routes = _interopRequireDefault(require(\"./routes/routes\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst app = new _koa.default();\nconst isDevMode = process.env.NODE_ENV === \"production\" ? false : true;\nconst middleware = (0, _koaCompose.default)([(0, _koaBody.default)(), //处理request的body\n(0, _koaStatic.default)(_path.default.join(__dirname, \"../public\")), (0, _cors.default)(), (0, _koaJson.default)({\n  pretty: false,\n  param: \"pretty\"\n}), (0, _koaHelmet.default)()]);\n\nif (!isDevMode) {\n  app.use((0, _koaCompress.default)());\n}\n\napp.use(middleware);\napp.use((0, _routes.default)());\napp.listen(3000);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwcCIsIktvYSIsImlzRGV2TW9kZSIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIm1pZGRsZXdhcmUiLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsInByZXR0eSIsInBhcmFtIiwidXNlIiwibGlzdGVuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLElBQUlDLFlBQUosRUFBWjtBQUVBLE1BQU1DLFNBQVMsR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQVosS0FBeUIsWUFBekIsR0FBd0MsS0FBeEMsR0FBZ0QsSUFBbEU7QUFFQSxNQUFNQyxVQUFVLEdBQUcseUJBQVEsQ0FDekIsdUJBRHlCLEVBQ2Q7QUFDWCx3QkFBUUMsY0FBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFdBQXJCLENBQVIsQ0FGeUIsRUFHekIsb0JBSHlCLEVBSXpCLHNCQUFLO0FBQUVDLEVBQUFBLE1BQU0sRUFBRSxLQUFWO0FBQWlCQyxFQUFBQSxLQUFLLEVBQUU7QUFBeEIsQ0FBTCxDQUp5QixFQUt6Qix5QkFMeUIsQ0FBUixDQUFuQjs7QUFRQSxJQUFJLENBQUNULFNBQUwsRUFBZ0I7QUFDZEYsRUFBQUEsR0FBRyxDQUFDWSxHQUFKLENBQVEsMkJBQVI7QUFDRDs7QUFFRFosR0FBRyxDQUFDWSxHQUFKLENBQVFOLFVBQVI7QUFDQU4sR0FBRyxDQUFDWSxHQUFKLENBQVEsc0JBQVI7QUFDQVosR0FBRyxDQUFDYSxNQUFKLENBQVcsSUFBWCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBLb2EgZnJvbSBcImtvYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBDb3JzIGZyb20gXCJAa29hL2NvcnNcIjtcbmltcG9ydCBLb2FCb2R5IGZyb20gXCJrb2EtYm9keVwiO1xuaW1wb3J0IEpzb24gZnJvbSBcImtvYS1qc29uXCI7XG5pbXBvcnQgaGVsbWV0IGZyb20gXCJrb2EtaGVsbWV0XCI7XG5pbXBvcnQgc3RhdGljcyBmcm9tIFwia29hLXN0YXRpY1wiO1xuaW1wb3J0IGNvbXBvc2UgZnJvbSBcImtvYS1jb21wb3NlXCI7XG5pbXBvcnQgY29tcHJlc3MgZnJvbSBcImtvYS1jb21wcmVzc1wiO1xuXG5pbXBvcnQgcm91dGVyIGZyb20gXCIuL3JvdXRlcy9yb3V0ZXNcIjtcblxuY29uc3QgYXBwID0gbmV3IEtvYSgpO1xuXG5jb25zdCBpc0Rldk1vZGUgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBmYWxzZSA6IHRydWU7XG5cbmNvbnN0IG1pZGRsZXdhcmUgPSBjb21wb3NlKFtcbiAgS29hQm9keSgpLCAvL+WkhOeQhnJlcXVlc3TnmoRib2R5XG4gIHN0YXRpY3MocGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLi9wdWJsaWNcIikpLFxuICBDb3JzKCksXG4gIEpzb24oeyBwcmV0dHk6IGZhbHNlLCBwYXJhbTogXCJwcmV0dHlcIiB9KSxcbiAgaGVsbWV0KCksXG5dKTtcblxuaWYgKCFpc0Rldk1vZGUpIHtcbiAgYXBwLnVzZShjb21wcmVzcygpKTtcbn1cblxuYXBwLnVzZShtaWRkbGV3YXJlKTtcbmFwcC51c2Uocm91dGVyKCkpO1xuYXBwLmxpc3RlbigzMDAwKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "app",
        "Koa",
        "isDevMode",
        "process",
        "env",
        "NODE_ENV",
        "middleware",
        "path",
        "join",
        "__dirname",
        "pretty",
        "param",
        "use",
        "listen"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;AAEA,MAAMA,GAAG,GAAG,IAAIC,YAAJ,EAAZ;AAEA,MAAMC,SAAS,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,KAAxC,GAAgD,IAAlE;AAEA,MAAMC,UAAU,GAAG,yBAAQ,CACzB,uBADyB,EACd;AACX,wBAAQC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,WAArB,CAAR,CAFyB,EAGzB,oBAHyB,EAIzB,sBAAK;AAAEC,EAAAA,MAAM,EAAE,KAAV;AAAiBC,EAAAA,KAAK,EAAE;AAAxB,CAAL,CAJyB,EAKzB,yBALyB,CAAR,CAAnB;;AAQA,IAAI,CAACT,SAAL,EAAgB;AACdF,EAAAA,GAAG,CAACY,GAAJ,CAAQ,2BAAR;AACD;;AAEDZ,GAAG,CAACY,GAAJ,CAAQN,UAAR;AACAN,GAAG,CAACY,GAAJ,CAAQ,sBAAR;AACAZ,GAAG,CAACa,MAAJ,CAAW,IAAX",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/",
      "sourcesContent": [
        "import Koa from \"koa\";\nimport path from \"path\";\nimport Cors from \"@koa/cors\";\nimport KoaBody from \"koa-body\";\nimport Json from \"koa-json\";\nimport helmet from \"koa-helmet\";\nimport statics from \"koa-static\";\nimport compose from \"koa-compose\";\nimport compress from \"koa-compress\";\n\nimport router from \"./routes/routes\";\n\nconst app = new Koa();\n\nconst isDevMode = process.env.NODE_ENV === \"production\" ? false : true;\n\nconst middleware = compose([\n  KoaBody(), //处理request的body\n  statics(path.join(__dirname, \"../public\")),\n  Cors(),\n  Json({ pretty: false, param: \"pretty\" }),\n  helmet(),\n]);\n\nif (!isDevMode) {\n  app.use(compress());\n}\n\napp.use(middleware);\napp.use(router());\napp.listen(3000);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1637847174642
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "routes.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaCombineRouters = _interopRequireDefault(require(\"koa-combine-routers\"));\n\nvar _publicRouter = _interopRequireDefault(require(\"./publicRouter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = (0, _koaCombineRouters.default)(_publicRouter.default);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJwdWJsaWNSb3V0ZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7OztlQUVlLGdDQUFjQSxxQkFBZCxDIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb21iaW5lUm91dGVzIGZyb20gXCJrb2EtY29tYmluZS1yb3V0ZXJzXCI7XG5cbmltcG9ydCBwdWJsaWNSb3V0ZXIgZnJvbSBcIi4vcHVibGljUm91dGVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbWJpbmVSb3V0ZXMocHVibGljUm91dGVyKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "routes.js"
      ],
      "names": [
        "publicRouter"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;;;eAEe,gCAAcA,qBAAd,C",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import combineRoutes from \"koa-combine-routers\";\n\nimport publicRouter from \"./publicRouter\";\n\nexport default combineRoutes(publicRouter);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1637847560191
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "publicRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _publicController = _interopRequireDefault(require(\"../api/publicController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.get(\"/getCaptcha\", _publicController.default.getCaptcha);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpY1JvdXRlci5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJnZXQiLCJwdWJsaWNDb250cm9sbGVyIiwiZ2V0Q2FwdGNoYSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLElBQUlDLGtCQUFKLEVBQWY7QUFFQUQsTUFBTSxDQUFDRSxHQUFQLENBQVcsYUFBWCxFQUEwQkMsMEJBQWlCQyxVQUEzQztlQUVlSixNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb3V0ZXIgZnJvbSBcImtvYS1yb3V0ZXJcIjtcbmltcG9ydCBwdWJsaWNDb250cm9sbGVyIGZyb20gXCIuLi9hcGkvcHVibGljQ29udHJvbGxlclwiO1xuXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKCk7XG5cbnJvdXRlci5nZXQoXCIvZ2V0Q2FwdGNoYVwiLCBwdWJsaWNDb250cm9sbGVyLmdldENhcHRjaGEpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "publicRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "get",
        "publicController",
        "getCaptcha"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,aAAX,EAA0BC,0BAAiBC,UAA3C;eAEeJ,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport publicController from \"../api/publicController\";\n\nconst router = new Router();\n\nrouter.get(\"/getCaptcha\", publicController.getCaptcha);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1637847727889
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/publicController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "publicController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _svgCaptcha = _interopRequireDefault(require(\"svg-captcha\"));\n\nvar _RedisConfig = require(\"@/config/RedisConfig\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 业务层\nclass PublicController {\n  constructor() {}\n\n  async getCaptcha(ctx) {\n    const body = ctx.request.query;\n\n    const newCaptcha = _svgCaptcha.default.create({\n      size: 4,\n      ignoreChars: \"0o1il\",\n      color: true,\n      noise: Math.floor(Math.random() * 5),\n      width: 150,\n      height: 38\n    }); // 图片有效期为 10 * 60 秒\n\n\n    (0, _RedisConfig.setValue)(body.sid, newCaptcha.text, 10 * 60);\n    ctx.body = {\n      code: 200,\n      data: newCaptcha.data\n    };\n  }\n\n}\n\nvar _default = new PublicController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpY0NvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiUHVibGljQ29udHJvbGxlciIsImNvbnN0cnVjdG9yIiwiZ2V0Q2FwdGNoYSIsImN0eCIsImJvZHkiLCJyZXF1ZXN0IiwicXVlcnkiLCJuZXdDYXB0Y2hhIiwic3ZnQ2FwdGNoYSIsImNyZWF0ZSIsInNpemUiLCJpZ25vcmVDaGFycyIsImNvbG9yIiwibm9pc2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ3aWR0aCIsImhlaWdodCIsInNpZCIsInRleHQiLCJjb2RlIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOzs7O0FBRkE7QUFJQSxNQUFNQSxnQkFBTixDQUF1QjtBQUNyQkMsRUFBQUEsV0FBVyxHQUFHLENBQUU7O0FBQ0EsUUFBVkMsVUFBVSxDQUFDQyxHQUFELEVBQU07QUFDcEIsVUFBTUMsSUFBSSxHQUFHRCxHQUFHLENBQUNFLE9BQUosQ0FBWUMsS0FBekI7O0FBQ0EsVUFBTUMsVUFBVSxHQUFHQyxvQkFBV0MsTUFBWCxDQUFrQjtBQUNuQ0MsTUFBQUEsSUFBSSxFQUFFLENBRDZCO0FBRW5DQyxNQUFBQSxXQUFXLEVBQUUsT0FGc0I7QUFHbkNDLE1BQUFBLEtBQUssRUFBRSxJQUg0QjtBQUluQ0MsTUFBQUEsS0FBSyxFQUFFQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0QsSUFBSSxDQUFDRSxNQUFMLEtBQWdCLENBQTNCLENBSjRCO0FBS25DQyxNQUFBQSxLQUFLLEVBQUUsR0FMNEI7QUFNbkNDLE1BQUFBLE1BQU0sRUFBRTtBQU4yQixLQUFsQixDQUFuQixDQUZvQixDQVVwQjs7O0FBQ0EsK0JBQVNkLElBQUksQ0FBQ2UsR0FBZCxFQUFtQlosVUFBVSxDQUFDYSxJQUE5QixFQUFvQyxLQUFLLEVBQXpDO0FBQ0FqQixJQUFBQSxHQUFHLENBQUNDLElBQUosR0FBVztBQUNUaUIsTUFBQUEsSUFBSSxFQUFFLEdBREc7QUFFVEMsTUFBQUEsSUFBSSxFQUFFZixVQUFVLENBQUNlO0FBRlIsS0FBWDtBQUlEOztBQWxCb0I7O2VBcUJSLElBQUl0QixnQkFBSixFIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvYXBpLyIsInNvdXJjZXNDb250ZW50IjpbIi8vIOS4muWKoeWxglxuaW1wb3J0IHN2Z0NhcHRjaGEgZnJvbSBcInN2Zy1jYXB0Y2hhXCI7XG5pbXBvcnQgeyBzZXRWYWx1ZSwgZ2V0VmFsdWUgfSBmcm9tIFwiQC9jb25maWcvUmVkaXNDb25maWdcIjtcblxuY2xhc3MgUHVibGljQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKCkge31cbiAgYXN5bmMgZ2V0Q2FwdGNoYShjdHgpIHtcbiAgICBjb25zdCBib2R5ID0gY3R4LnJlcXVlc3QucXVlcnk7XG4gICAgY29uc3QgbmV3Q2FwdGNoYSA9IHN2Z0NhcHRjaGEuY3JlYXRlKHtcbiAgICAgIHNpemU6IDQsXG4gICAgICBpZ25vcmVDaGFyczogXCIwbzFpbFwiLFxuICAgICAgY29sb3I6IHRydWUsXG4gICAgICBub2lzZTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSksXG4gICAgICB3aWR0aDogMTUwLFxuICAgICAgaGVpZ2h0OiAzOCxcbiAgICB9KTtcbiAgICAvLyDlm77niYfmnInmlYjmnJ/kuLogMTAgKiA2MCDnp5JcbiAgICBzZXRWYWx1ZShib2R5LnNpZCwgbmV3Q2FwdGNoYS50ZXh0LCAxMCAqIDYwKTtcbiAgICBjdHguYm9keSA9IHtcbiAgICAgIGNvZGU6IDIwMCxcbiAgICAgIGRhdGE6IG5ld0NhcHRjaGEuZGF0YSxcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBQdWJsaWNDb250cm9sbGVyKCk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "publicController.js"
      ],
      "names": [
        "PublicController",
        "constructor",
        "getCaptcha",
        "ctx",
        "body",
        "request",
        "query",
        "newCaptcha",
        "svgCaptcha",
        "create",
        "size",
        "ignoreChars",
        "color",
        "noise",
        "Math",
        "floor",
        "random",
        "width",
        "height",
        "sid",
        "text",
        "code",
        "data"
      ],
      "mappings": ";;;;;;;AACA;;AACA;;;;AAFA;AAIA,MAAMA,gBAAN,CAAuB;AACrBC,EAAAA,WAAW,GAAG,CAAE;;AACA,QAAVC,UAAU,CAACC,GAAD,EAAM;AACpB,UAAMC,IAAI,GAAGD,GAAG,CAACE,OAAJ,CAAYC,KAAzB;;AACA,UAAMC,UAAU,GAAGC,oBAAWC,MAAX,CAAkB;AACnCC,MAAAA,IAAI,EAAE,CAD6B;AAEnCC,MAAAA,WAAW,EAAE,OAFsB;AAGnCC,MAAAA,KAAK,EAAE,IAH4B;AAInCC,MAAAA,KAAK,EAAEC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,CAA3B,CAJ4B;AAKnCC,MAAAA,KAAK,EAAE,GAL4B;AAMnCC,MAAAA,MAAM,EAAE;AAN2B,KAAlB,CAAnB,CAFoB,CAUpB;;;AACA,+BAASd,IAAI,CAACe,GAAd,EAAmBZ,UAAU,CAACa,IAA9B,EAAoC,KAAK,EAAzC;AACAjB,IAAAA,GAAG,CAACC,IAAJ,GAAW;AACTiB,MAAAA,IAAI,EAAE,GADG;AAETC,MAAAA,IAAI,EAAEf,UAAU,CAACe;AAFR,KAAX;AAID;;AAlBoB;;eAqBR,IAAItB,gBAAJ,E",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "// 业务层\nimport svgCaptcha from \"svg-captcha\";\nimport { setValue, getValue } from \"@/config/RedisConfig\";\n\nclass PublicController {\n  constructor() {}\n  async getCaptcha(ctx) {\n    const body = ctx.request.query;\n    const newCaptcha = svgCaptcha.create({\n      size: 4,\n      ignoreChars: \"0o1il\",\n      color: true,\n      noise: Math.floor(Math.random() * 5),\n      width: 150,\n      height: 38,\n    });\n    // 图片有效期为 10 * 60 秒\n    setValue(body.sid, newCaptcha.text, 10 * 60);\n    ctx.body = {\n      code: 200,\n      data: newCaptcha.data,\n    };\n  }\n}\n\nexport default new PublicController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638786921919
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/routes.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "routes.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaCombineRouters = _interopRequireDefault(require(\"koa-combine-routers\"));\n\nvar _publicRouter = _interopRequireDefault(require(\"./publicRouter\"));\n\nvar _loginRouter = _interopRequireDefault(require(\"./loginRouter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = (0, _koaCombineRouters.default)(_publicRouter.default, _loginRouter.default);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJwdWJsaWNSb3V0ZXIiLCJsb2dpblJvdXRlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBOztBQUNBOzs7O2VBRWUsZ0NBQWNBLHFCQUFkLEVBQTRCQyxvQkFBNUIsQyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29tYmluZVJvdXRlcyBmcm9tIFwia29hLWNvbWJpbmUtcm91dGVyc1wiO1xuXG5pbXBvcnQgcHVibGljUm91dGVyIGZyb20gXCIuL3B1YmxpY1JvdXRlclwiO1xuaW1wb3J0IGxvZ2luUm91dGVyIGZyb20gXCIuL2xvZ2luUm91dGVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbWJpbmVSb3V0ZXMocHVibGljUm91dGVyLCBsb2dpblJvdXRlcik7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "routes.js"
      ],
      "names": [
        "publicRouter",
        "loginRouter"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;;;eAEe,gCAAcA,qBAAd,EAA4BC,oBAA5B,C",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import combineRoutes from \"koa-combine-routers\";\n\nimport publicRouter from \"./publicRouter\";\nimport loginRouter from \"./loginRouter\";\n\nexport default combineRoutes(publicRouter, loginRouter);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638789375019
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/publicRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "publicRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _publicController = _interopRequireDefault(require(\"../api/publicController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.get(\"/getCaptcha\", _publicController.default.getCaptcha);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpY1JvdXRlci5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJnZXQiLCJwdWJsaWNDb250cm9sbGVyIiwiZ2V0Q2FwdGNoYSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLElBQUlDLGtCQUFKLEVBQWY7QUFFQUQsTUFBTSxDQUFDRSxHQUFQLENBQVcsYUFBWCxFQUEwQkMsMEJBQWlCQyxVQUEzQztlQUVlSixNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb3V0ZXIgZnJvbSBcImtvYS1yb3V0ZXJcIjtcbmltcG9ydCBwdWJsaWNDb250cm9sbGVyIGZyb20gXCIuLi9hcGkvcHVibGljQ29udHJvbGxlclwiO1xuXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKCk7XG5cbnJvdXRlci5nZXQoXCIvZ2V0Q2FwdGNoYVwiLCBwdWJsaWNDb250cm9sbGVyLmdldENhcHRjaGEpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "publicRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "get",
        "publicController",
        "getCaptcha"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,aAAX,EAA0BC,0BAAiBC,UAA3C;eAEeJ,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport publicController from \"../api/publicController\";\n\nconst router = new Router();\n\nrouter.get(\"/getCaptcha\", publicController.getCaptcha);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1637847727889
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/publicController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/publicController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "publicController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _svgCaptcha = _interopRequireDefault(require(\"svg-captcha\"));\n\nvar _RedisConfig = require(\"../config/RedisConfig\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 业务层\nclass PublicController {\n  constructor() {}\n\n  async getCaptcha(ctx) {\n    const body = ctx.request.query;\n\n    const newCaptcha = _svgCaptcha.default.create({\n      size: 4,\n      ignoreChars: \"0o1il\",\n      color: true,\n      noise: Math.floor(Math.random() * 5),\n      width: 150,\n      height: 38\n    }); // 图片有效期为 10 * 60 秒\n\n\n    (0, _RedisConfig.setValue)(body.sid, newCaptcha.text, 10 * 60);\n    ctx.body = {\n      code: 200,\n      data: newCaptcha.data\n    };\n  }\n\n}\n\nvar _default = new PublicController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpY0NvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiUHVibGljQ29udHJvbGxlciIsImNvbnN0cnVjdG9yIiwiZ2V0Q2FwdGNoYSIsImN0eCIsImJvZHkiLCJyZXF1ZXN0IiwicXVlcnkiLCJuZXdDYXB0Y2hhIiwic3ZnQ2FwdGNoYSIsImNyZWF0ZSIsInNpemUiLCJpZ25vcmVDaGFycyIsImNvbG9yIiwibm9pc2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ3aWR0aCIsImhlaWdodCIsInNpZCIsInRleHQiLCJjb2RlIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOzs7O0FBRkE7QUFJQSxNQUFNQSxnQkFBTixDQUF1QjtBQUNyQkMsRUFBQUEsV0FBVyxHQUFHLENBQUU7O0FBQ0EsUUFBVkMsVUFBVSxDQUFDQyxHQUFELEVBQU07QUFDcEIsVUFBTUMsSUFBSSxHQUFHRCxHQUFHLENBQUNFLE9BQUosQ0FBWUMsS0FBekI7O0FBQ0EsVUFBTUMsVUFBVSxHQUFHQyxvQkFBV0MsTUFBWCxDQUFrQjtBQUNuQ0MsTUFBQUEsSUFBSSxFQUFFLENBRDZCO0FBRW5DQyxNQUFBQSxXQUFXLEVBQUUsT0FGc0I7QUFHbkNDLE1BQUFBLEtBQUssRUFBRSxJQUg0QjtBQUluQ0MsTUFBQUEsS0FBSyxFQUFFQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0QsSUFBSSxDQUFDRSxNQUFMLEtBQWdCLENBQTNCLENBSjRCO0FBS25DQyxNQUFBQSxLQUFLLEVBQUUsR0FMNEI7QUFNbkNDLE1BQUFBLE1BQU0sRUFBRTtBQU4yQixLQUFsQixDQUFuQixDQUZvQixDQVVwQjs7O0FBQ0EsK0JBQVNkLElBQUksQ0FBQ2UsR0FBZCxFQUFtQlosVUFBVSxDQUFDYSxJQUE5QixFQUFvQyxLQUFLLEVBQXpDO0FBQ0FqQixJQUFBQSxHQUFHLENBQUNDLElBQUosR0FBVztBQUNUaUIsTUFBQUEsSUFBSSxFQUFFLEdBREc7QUFFVEMsTUFBQUEsSUFBSSxFQUFFZixVQUFVLENBQUNlO0FBRlIsS0FBWDtBQUlEOztBQWxCb0I7O2VBcUJSLElBQUl0QixnQkFBSixFIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvYXBpLyIsInNvdXJjZXNDb250ZW50IjpbIi8vIOS4muWKoeWxglxuaW1wb3J0IHN2Z0NhcHRjaGEgZnJvbSBcInN2Zy1jYXB0Y2hhXCI7XG5pbXBvcnQgeyBzZXRWYWx1ZSwgZ2V0VmFsdWUgfSBmcm9tIFwiLi4vY29uZmlnL1JlZGlzQ29uZmlnXCI7XG5cbmNsYXNzIFB1YmxpY0NvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG4gIGFzeW5jIGdldENhcHRjaGEoY3R4KSB7XG4gICAgY29uc3QgYm9keSA9IGN0eC5yZXF1ZXN0LnF1ZXJ5O1xuICAgIGNvbnN0IG5ld0NhcHRjaGEgPSBzdmdDYXB0Y2hhLmNyZWF0ZSh7XG4gICAgICBzaXplOiA0LFxuICAgICAgaWdub3JlQ2hhcnM6IFwiMG8xaWxcIixcbiAgICAgIGNvbG9yOiB0cnVlLFxuICAgICAgbm9pc2U6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUpLFxuICAgICAgd2lkdGg6IDE1MCxcbiAgICAgIGhlaWdodDogMzgsXG4gICAgfSk7XG4gICAgLy8g5Zu+54mH5pyJ5pWI5pyf5Li6IDEwICogNjAg56eSXG4gICAgc2V0VmFsdWUoYm9keS5zaWQsIG5ld0NhcHRjaGEudGV4dCwgMTAgKiA2MCk7XG4gICAgY3R4LmJvZHkgPSB7XG4gICAgICBjb2RlOiAyMDAsXG4gICAgICBkYXRhOiBuZXdDYXB0Y2hhLmRhdGEsXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgUHVibGljQ29udHJvbGxlcigpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "publicController.js"
      ],
      "names": [
        "PublicController",
        "constructor",
        "getCaptcha",
        "ctx",
        "body",
        "request",
        "query",
        "newCaptcha",
        "svgCaptcha",
        "create",
        "size",
        "ignoreChars",
        "color",
        "noise",
        "Math",
        "floor",
        "random",
        "width",
        "height",
        "sid",
        "text",
        "code",
        "data"
      ],
      "mappings": ";;;;;;;AACA;;AACA;;;;AAFA;AAIA,MAAMA,gBAAN,CAAuB;AACrBC,EAAAA,WAAW,GAAG,CAAE;;AACA,QAAVC,UAAU,CAACC,GAAD,EAAM;AACpB,UAAMC,IAAI,GAAGD,GAAG,CAACE,OAAJ,CAAYC,KAAzB;;AACA,UAAMC,UAAU,GAAGC,oBAAWC,MAAX,CAAkB;AACnCC,MAAAA,IAAI,EAAE,CAD6B;AAEnCC,MAAAA,WAAW,EAAE,OAFsB;AAGnCC,MAAAA,KAAK,EAAE,IAH4B;AAInCC,MAAAA,KAAK,EAAEC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,CAA3B,CAJ4B;AAKnCC,MAAAA,KAAK,EAAE,GAL4B;AAMnCC,MAAAA,MAAM,EAAE;AAN2B,KAAlB,CAAnB,CAFoB,CAUpB;;;AACA,+BAASd,IAAI,CAACe,GAAd,EAAmBZ,UAAU,CAACa,IAA9B,EAAoC,KAAK,EAAzC;AACAjB,IAAAA,GAAG,CAACC,IAAJ,GAAW;AACTiB,MAAAA,IAAI,EAAE,GADG;AAETC,MAAAA,IAAI,EAAEf,UAAU,CAACe;AAFR,KAAX;AAID;;AAlBoB;;eAqBR,IAAItB,gBAAJ,E",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "// 业务层\nimport svgCaptcha from \"svg-captcha\";\nimport { setValue, getValue } from \"../config/RedisConfig\";\n\nclass PublicController {\n  constructor() {}\n  async getCaptcha(ctx) {\n    const body = ctx.request.query;\n    const newCaptcha = svgCaptcha.create({\n      size: 4,\n      ignoreChars: \"0o1il\",\n      color: true,\n      noise: Math.floor(Math.random() * 5),\n      width: 150,\n      height: 38,\n    });\n    // 图片有效期为 10 * 60 秒\n    setValue(body.sid, newCaptcha.text, 10 * 60);\n    ctx.body = {\n      code: 200,\n      data: newCaptcha.data,\n    };\n  }\n}\n\nexport default new PublicController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638792649803
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
        "sourceFileName": "RedisConfig.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setValue = exports.getValue = void 0;\n\nvar _redis = require(\"redis\");\n\n// (async () => {\nconst client = (0, _redis.createClient)({\n  url: \"redis://:123456@47.96.40.132:15002\"\n});\nclient.on(\"error\", err => console.log(\"Redis Client Error\", err));\nclient.connect();\n\nconst setValue = async (key, value, time) => {\n  if (time) return await client.set(key, value, {\n    EX: time\n  });else return await client.set(key, value);\n};\n\nexports.setValue = setValue;\n\nconst getValue = async key => {\n  return await client.get(key);\n};\n\nexports.getValue = getValue;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlZGlzQ29uZmlnLmpzIl0sIm5hbWVzIjpbImNsaWVudCIsInVybCIsIm9uIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3QiLCJzZXRWYWx1ZSIsImtleSIsInZhbHVlIiwidGltZSIsInNldCIsIkVYIiwiZ2V0VmFsdWUiLCJnZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTtBQUNBLE1BQU1BLE1BQU0sR0FBRyx5QkFBYTtBQUMxQkMsRUFBQUEsR0FBRyxFQUFFO0FBRHFCLENBQWIsQ0FBZjtBQUlBRCxNQUFNLENBQUNFLEVBQVAsQ0FBVSxPQUFWLEVBQW9CQyxHQUFELElBQVNDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG9CQUFaLEVBQWtDRixHQUFsQyxDQUE1QjtBQUVBSCxNQUFNLENBQUNNLE9BQVA7O0FBRUEsTUFBTUMsUUFBUSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsS0FBWixFQUFtQkMsSUFBbkIsS0FBNEI7QUFDM0MsTUFBSUEsSUFBSixFQUFVLE9BQU8sTUFBTVYsTUFBTSxDQUFDVyxHQUFQLENBQVdILEdBQVgsRUFBZ0JDLEtBQWhCLEVBQXVCO0FBQUVHLElBQUFBLEVBQUUsRUFBRUY7QUFBTixHQUF2QixDQUFiLENBQVYsS0FDSyxPQUFPLE1BQU1WLE1BQU0sQ0FBQ1csR0FBUCxDQUFXSCxHQUFYLEVBQWdCQyxLQUFoQixDQUFiO0FBQ04sQ0FIRDs7OztBQUtBLE1BQU1JLFFBQVEsR0FBRyxNQUFPTCxHQUFQLElBQWU7QUFDOUIsU0FBTyxNQUFNUixNQUFNLENBQUNjLEdBQVAsQ0FBV04sR0FBWCxDQUFiO0FBQ0QsQ0FGRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL2NvbmZpZy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwicmVkaXNcIjtcblxuLy8gKGFzeW5jICgpID0+IHtcbmNvbnN0IGNsaWVudCA9IGNyZWF0ZUNsaWVudCh7XG4gIHVybDogXCJyZWRpczovLzoxMjM0NTZANDcuOTYuNDAuMTMyOjE1MDAyXCIsXG59KTtcblxuY2xpZW50Lm9uKFwiZXJyb3JcIiwgKGVycikgPT4gY29uc29sZS5sb2coXCJSZWRpcyBDbGllbnQgRXJyb3JcIiwgZXJyKSk7XG5cbmNsaWVudC5jb25uZWN0KCk7XG5cbmNvbnN0IHNldFZhbHVlID0gYXN5bmMgKGtleSwgdmFsdWUsIHRpbWUpID0+IHtcbiAgaWYgKHRpbWUpIHJldHVybiBhd2FpdCBjbGllbnQuc2V0KGtleSwgdmFsdWUsIHsgRVg6IHRpbWUgfSk7XG4gIGVsc2UgcmV0dXJuIGF3YWl0IGNsaWVudC5zZXQoa2V5LCB2YWx1ZSk7XG59O1xuXG5jb25zdCBnZXRWYWx1ZSA9IGFzeW5jIChrZXkpID0+IHtcbiAgcmV0dXJuIGF3YWl0IGNsaWVudC5nZXQoa2V5KTtcbn07XG5cbmV4cG9ydCB7IHNldFZhbHVlLCBnZXRWYWx1ZSB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "RedisConfig.js"
      ],
      "names": [
        "client",
        "url",
        "on",
        "err",
        "console",
        "log",
        "connect",
        "setValue",
        "key",
        "value",
        "time",
        "set",
        "EX",
        "getValue",
        "get"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;AACA,MAAMA,MAAM,GAAG,yBAAa;AAC1BC,EAAAA,GAAG,EAAE;AADqB,CAAb,CAAf;AAIAD,MAAM,CAACE,EAAP,CAAU,OAAV,EAAoBC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,GAAlC,CAA5B;AAEAH,MAAM,CAACM,OAAP;;AAEA,MAAMC,QAAQ,GAAG,OAAOC,GAAP,EAAYC,KAAZ,EAAmBC,IAAnB,KAA4B;AAC3C,MAAIA,IAAJ,EAAU,OAAO,MAAMV,MAAM,CAACW,GAAP,CAAWH,GAAX,EAAgBC,KAAhB,EAAuB;AAAEG,IAAAA,EAAE,EAAEF;AAAN,GAAvB,CAAb,CAAV,KACK,OAAO,MAAMV,MAAM,CAACW,GAAP,CAAWH,GAAX,EAAgBC,KAAhB,CAAb;AACN,CAHD;;;;AAKA,MAAMI,QAAQ,GAAG,MAAOL,GAAP,IAAe;AAC9B,SAAO,MAAMR,MAAM,CAACc,GAAP,CAAWN,GAAX,CAAb;AACD,CAFD",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "sourcesContent": [
        "import { createClient } from \"redis\";\n\n// (async () => {\nconst client = createClient({\n  url: \"redis://:123456@47.96.40.132:15002\",\n});\n\nclient.on(\"error\", (err) => console.log(\"Redis Client Error\", err));\n\nclient.connect();\n\nconst setValue = async (key, value, time) => {\n  if (time) return await client.set(key, value, { EX: time });\n  else return await client.set(key, value);\n};\n\nconst getValue = async (key) => {\n  return await client.get(key);\n};\n\nexport { setValue, getValue };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638786352336
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
        "sourceFileName": "RedisConfig.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setValue = exports.getValue = void 0;\n\nvar _redis = require(\"redis\");\n\n// (async () => {\nconst client = (0, _redis.createClient)({\n  url: \"redis://:123456@47.96.40.132:15002\"\n});\nclient.on(\"error\", err => console.log(\"Redis Client Error\", err));\nclient.connect();\n\nconst setValue = async (key, value, time) => {\n  if (time) return await client.set(key, value, {\n    EX: time\n  });else return await client.set(key, value);\n};\n\nexports.setValue = setValue;\n\nconst getValue = async key => {\n  return await client.get(key);\n};\n\nexports.getValue = getValue;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlZGlzQ29uZmlnLmpzIl0sIm5hbWVzIjpbImNsaWVudCIsInVybCIsIm9uIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3QiLCJzZXRWYWx1ZSIsImtleSIsInZhbHVlIiwidGltZSIsInNldCIsIkVYIiwiZ2V0VmFsdWUiLCJnZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTtBQUNBLE1BQU1BLE1BQU0sR0FBRyx5QkFBYTtBQUMxQkMsRUFBQUEsR0FBRyxFQUFFO0FBRHFCLENBQWIsQ0FBZjtBQUlBRCxNQUFNLENBQUNFLEVBQVAsQ0FBVSxPQUFWLEVBQW9CQyxHQUFELElBQVNDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG9CQUFaLEVBQWtDRixHQUFsQyxDQUE1QjtBQUVBSCxNQUFNLENBQUNNLE9BQVA7O0FBRUEsTUFBTUMsUUFBUSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsS0FBWixFQUFtQkMsSUFBbkIsS0FBNEI7QUFDM0MsTUFBSUEsSUFBSixFQUFVLE9BQU8sTUFBTVYsTUFBTSxDQUFDVyxHQUFQLENBQVdILEdBQVgsRUFBZ0JDLEtBQWhCLEVBQXVCO0FBQUVHLElBQUFBLEVBQUUsRUFBRUY7QUFBTixHQUF2QixDQUFiLENBQVYsS0FDSyxPQUFPLE1BQU1WLE1BQU0sQ0FBQ1csR0FBUCxDQUFXSCxHQUFYLEVBQWdCQyxLQUFoQixDQUFiO0FBQ04sQ0FIRDs7OztBQUtBLE1BQU1JLFFBQVEsR0FBRyxNQUFPTCxHQUFQLElBQWU7QUFDOUIsU0FBTyxNQUFNUixNQUFNLENBQUNjLEdBQVAsQ0FBV04sR0FBWCxDQUFiO0FBQ0QsQ0FGRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL2NvbmZpZy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwicmVkaXNcIjtcblxuLy8gKGFzeW5jICgpID0+IHtcbmNvbnN0IGNsaWVudCA9IGNyZWF0ZUNsaWVudCh7XG4gIHVybDogXCJyZWRpczovLzoxMjM0NTZANDcuOTYuNDAuMTMyOjE1MDAyXCIsXG59KTtcblxuY2xpZW50Lm9uKFwiZXJyb3JcIiwgKGVycikgPT4gY29uc29sZS5sb2coXCJSZWRpcyBDbGllbnQgRXJyb3JcIiwgZXJyKSk7XG5cbmNsaWVudC5jb25uZWN0KCk7XG5cbmNvbnN0IHNldFZhbHVlID0gYXN5bmMgKGtleSwgdmFsdWUsIHRpbWUpID0+IHtcbiAgaWYgKHRpbWUpIHJldHVybiBhd2FpdCBjbGllbnQuc2V0KGtleSwgdmFsdWUsIHsgRVg6IHRpbWUgfSk7XG4gIGVsc2UgcmV0dXJuIGF3YWl0IGNsaWVudC5zZXQoa2V5LCB2YWx1ZSk7XG59O1xuXG5jb25zdCBnZXRWYWx1ZSA9IGFzeW5jIChrZXkpID0+IHtcbiAgcmV0dXJuIGF3YWl0IGNsaWVudC5nZXQoa2V5KTtcbn07XG5cbmV4cG9ydCB7IHNldFZhbHVlLCBnZXRWYWx1ZSB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "RedisConfig.js"
      ],
      "names": [
        "client",
        "url",
        "on",
        "err",
        "console",
        "log",
        "connect",
        "setValue",
        "key",
        "value",
        "time",
        "set",
        "EX",
        "getValue",
        "get"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;AACA,MAAMA,MAAM,GAAG,yBAAa;AAC1BC,EAAAA,GAAG,EAAE;AADqB,CAAb,CAAf;AAIAD,MAAM,CAACE,EAAP,CAAU,OAAV,EAAoBC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,GAAlC,CAA5B;AAEAH,MAAM,CAACM,OAAP;;AAEA,MAAMC,QAAQ,GAAG,OAAOC,GAAP,EAAYC,KAAZ,EAAmBC,IAAnB,KAA4B;AAC3C,MAAIA,IAAJ,EAAU,OAAO,MAAMV,MAAM,CAACW,GAAP,CAAWH,GAAX,EAAgBC,KAAhB,EAAuB;AAAEG,IAAAA,EAAE,EAAEF;AAAN,GAAvB,CAAb,CAAV,KACK,OAAO,MAAMV,MAAM,CAACW,GAAP,CAAWH,GAAX,EAAgBC,KAAhB,CAAb;AACN,CAHD;;;;AAKA,MAAMI,QAAQ,GAAG,MAAOL,GAAP,IAAe;AAC9B,SAAO,MAAMR,MAAM,CAACc,GAAP,CAAWN,GAAX,CAAb;AACD,CAFD",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "sourcesContent": [
        "import { createClient } from \"redis\";\n\n// (async () => {\nconst client = createClient({\n  url: \"redis://:123456@47.96.40.132:15002\",\n});\n\nclient.on(\"error\", (err) => console.log(\"Redis Client Error\", err));\n\nclient.connect();\n\nconst setValue = async (key, value, time) => {\n  if (time) return await client.set(key, value, { EX: time });\n  else return await client.set(key, value);\n};\n\nconst getValue = async (key) => {\n  return await client.get(key);\n};\n\nexport { setValue, getValue };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638786352336
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "loginRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _LoginController = _interopRequireDefault(require(\"../api/LoginController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.post('/forget', _LoginController.default.forget);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luUm91dGVyLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsIlJvdXRlciIsInBvc3QiLCJsb2dpbkNvbnRyb2xsZXIiLCJmb3JnZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQyxrQkFBSixFQUFmO0FBRUFELE1BQU0sQ0FBQ0UsSUFBUCxDQUFZLFNBQVosRUFBdUJDLHlCQUFnQkMsTUFBdkM7ZUFFZUosTSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUm91dGVyIGZyb20gJ2tvYS1yb3V0ZXInXG5pbXBvcnQgbG9naW5Db250cm9sbGVyIGZyb20gJy4uL2FwaS9Mb2dpbkNvbnRyb2xsZXInXG5cbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKVxuXG5yb3V0ZXIucG9zdCgnL2ZvcmdldCcsIGxvZ2luQ29udHJvbGxlci5mb3JnZXQpXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlclxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "loginRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "post",
        "loginController",
        "forget"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,IAAP,CAAY,SAAZ,EAAuBC,yBAAgBC,MAAvC;eAEeJ,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from 'koa-router'\nimport loginController from '../api/LoginController'\n\nconst router = new Router()\n\nrouter.post('/forget', loginController.forget)\n\nexport default router\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638789338262
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "LoginController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _MailConfig = _interopRequireDefault(require(\"../config/MailConfig\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass LoginController {\n  constructor() {}\n\n  async forget(ctx) {\n    const {\n      body\n    } = ctx.request;\n    console.log(body);\n\n    try {\n      // body.username -> database -> email\n      let result = await (0, _MailConfig.default)({\n        code: \"1234\",\n        expire: (0, _moment.default)().add(30, \"minutes\").format(\"YYYY-MM-DD HH:mm:ss\"),\n        email: body.username,\n        user: \"Brian\"\n      });\n      ctx.body = {\n        code: 200,\n        data: result,\n        msg: \"邮件发送成功\"\n      };\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async login(ctx) {// 接收用户的数据\n    // 验证图片验证码的时效性，正确性\n    // 验证用户账号密码是否正确\n    // 返回token\n  }\n\n}\n\nvar _default = new LoginController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxvZ2luQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJMb2dpbkNvbnRyb2xsZXIiLCJjb25zdHJ1Y3RvciIsImZvcmdldCIsImN0eCIsImJvZHkiLCJyZXF1ZXN0IiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsImNvZGUiLCJleHBpcmUiLCJhZGQiLCJmb3JtYXQiLCJlbWFpbCIsInVzZXJuYW1lIiwidXNlciIsImRhdGEiLCJtc2ciLCJlIiwibG9naW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLGVBQU4sQ0FBc0I7QUFDcEJDLEVBQUFBLFdBQVcsR0FBRyxDQUFFOztBQUNKLFFBQU5DLE1BQU0sQ0FBQ0MsR0FBRCxFQUFNO0FBQ2hCLFVBQU07QUFBRUMsTUFBQUE7QUFBRixRQUFXRCxHQUFHLENBQUNFLE9BQXJCO0FBQ0FDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSCxJQUFaOztBQUNBLFFBQUk7QUFDRjtBQUNBLFVBQUlJLE1BQU0sR0FBRyxNQUFNLHlCQUFLO0FBQ3RCQyxRQUFBQSxJQUFJLEVBQUUsTUFEZ0I7QUFFdEJDLFFBQUFBLE1BQU0sRUFBRSx1QkFBU0MsR0FBVCxDQUFhLEVBQWIsRUFBaUIsU0FBakIsRUFBNEJDLE1BQTVCLENBQW1DLHFCQUFuQyxDQUZjO0FBR3RCQyxRQUFBQSxLQUFLLEVBQUVULElBQUksQ0FBQ1UsUUFIVTtBQUl0QkMsUUFBQUEsSUFBSSxFQUFFO0FBSmdCLE9BQUwsQ0FBbkI7QUFNQVosTUFBQUEsR0FBRyxDQUFDQyxJQUFKLEdBQVc7QUFDVEssUUFBQUEsSUFBSSxFQUFFLEdBREc7QUFFVE8sUUFBQUEsSUFBSSxFQUFFUixNQUZHO0FBR1RTLFFBQUFBLEdBQUcsRUFBRTtBQUhJLE9BQVg7QUFLRCxLQWJELENBYUUsT0FBT0MsQ0FBUCxFQUFVO0FBQ1ZaLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZVyxDQUFaO0FBQ0Q7QUFDRjs7QUFFVSxRQUFMQyxLQUFLLENBQUNoQixHQUFELEVBQU0sQ0FDZjtBQUNBO0FBQ0E7QUFDQTtBQUNEOztBQTVCbUI7O2VBK0JQLElBQUlILGVBQUosRSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL2FwaS8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc2VuZCBmcm9tIFwiLi4vY29uZmlnL01haWxDb25maWdcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xuXG5jbGFzcyBMb2dpbkNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG4gIGFzeW5jIGZvcmdldChjdHgpIHtcbiAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgIGNvbnNvbGUubG9nKGJvZHkpO1xuICAgIHRyeSB7XG4gICAgICAvLyBib2R5LnVzZXJuYW1lIC0+IGRhdGFiYXNlIC0+IGVtYWlsXG4gICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgc2VuZCh7XG4gICAgICAgIGNvZGU6IFwiMTIzNFwiLFxuICAgICAgICBleHBpcmU6IG1vbWVudCgpLmFkZCgzMCwgXCJtaW51dGVzXCIpLmZvcm1hdChcIllZWVktTU0tREQgSEg6bW06c3NcIiksXG4gICAgICAgIGVtYWlsOiBib2R5LnVzZXJuYW1lLFxuICAgICAgICB1c2VyOiBcIkJyaWFuXCIsXG4gICAgICB9KTtcbiAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgbXNnOiBcIumCruS7tuWPkemAgeaIkOWKn1wiLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2dpbihjdHgpIHtcbiAgICAvLyDmjqXmlLbnlKjmiLfnmoTmlbDmja5cbiAgICAvLyDpqozor4Hlm77niYfpqozor4HnoIHnmoTml7bmlYjmgKfvvIzmraPnoa7mgKdcbiAgICAvLyDpqozor4HnlKjmiLfotKblj7flr4bnoIHmmK/lkKbmraPnoa5cbiAgICAvLyDov5Tlm550b2tlblxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBMb2dpbkNvbnRyb2xsZXIoKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "LoginController.js"
      ],
      "names": [
        "LoginController",
        "constructor",
        "forget",
        "ctx",
        "body",
        "request",
        "console",
        "log",
        "result",
        "code",
        "expire",
        "add",
        "format",
        "email",
        "username",
        "user",
        "data",
        "msg",
        "e",
        "login"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,eAAN,CAAsB;AACpBC,EAAAA,WAAW,GAAG,CAAE;;AACJ,QAANC,MAAM,CAACC,GAAD,EAAM;AAChB,UAAM;AAAEC,MAAAA;AAAF,QAAWD,GAAG,CAACE,OAArB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;;AACA,QAAI;AACF;AACA,UAAII,MAAM,GAAG,MAAM,yBAAK;AACtBC,QAAAA,IAAI,EAAE,MADgB;AAEtBC,QAAAA,MAAM,EAAE,uBAASC,GAAT,CAAa,EAAb,EAAiB,SAAjB,EAA4BC,MAA5B,CAAmC,qBAAnC,CAFc;AAGtBC,QAAAA,KAAK,EAAET,IAAI,CAACU,QAHU;AAItBC,QAAAA,IAAI,EAAE;AAJgB,OAAL,CAAnB;AAMAZ,MAAAA,GAAG,CAACC,IAAJ,GAAW;AACTK,QAAAA,IAAI,EAAE,GADG;AAETO,QAAAA,IAAI,EAAER,MAFG;AAGTS,QAAAA,GAAG,EAAE;AAHI,OAAX;AAKD,KAbD,CAaE,OAAOC,CAAP,EAAU;AACVZ,MAAAA,OAAO,CAACC,GAAR,CAAYW,CAAZ;AACD;AACF;;AAEU,QAALC,KAAK,CAAChB,GAAD,EAAM,CACf;AACA;AACA;AACA;AACD;;AA5BmB;;eA+BP,IAAIH,eAAJ,E",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "import send from \"../config/MailConfig\";\nimport moment from \"moment\";\n\nclass LoginController {\n  constructor() {}\n  async forget(ctx) {\n    const { body } = ctx.request;\n    console.log(body);\n    try {\n      // body.username -> database -> email\n      let result = await send({\n        code: \"1234\",\n        expire: moment().add(30, \"minutes\").format(\"YYYY-MM-DD HH:mm:ss\"),\n        email: body.username,\n        user: \"Brian\",\n      });\n      ctx.body = {\n        code: 200,\n        data: result,\n        msg: \"邮件发送成功\",\n      };\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async login(ctx) {\n    // 接收用户的数据\n    // 验证图片验证码的时效性，正确性\n    // 验证用户账号密码是否正确\n    // 返回token\n  }\n}\n\nexport default new LoginController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638789304013
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
        "sourceFileName": "MailConfig.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _nodemailer = _interopRequireDefault(require(\"nodemailer\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// async..await is not allowed in global scope, must use a wrapper\nasync function send(sendInfo) {\n  // Generate test SMTP service account from ethereal.email\n  // Only needed if you don't have a real mail account for testing\n  // let testAccount = await nodemailer.createTestAccount()\n  // create reusable transporter object using the default SMTP transport\n  let transporter = _nodemailer.default.createTransport({\n    host: \"smtp.qq.com\",\n    port: 587,\n    secure: false,\n    // true for 465, false for other ports\n    auth: {\n      user: \"imoocbrian@qq.com\",\n      // generated ethereal user\n      pass: \"rbkcbxwrurygjfca\" // generated ethereal password\n\n    }\n  }); // let sendInfo = {\n  //   code: '1234',\n  //   expire: '2019-10-01',\n  //   email: 'imoocbrian@qq.com',\n  //   user: 'Brian',\n  // }\n\n\n  let url = \"http://47.96.40.132\"; // send mail with defined transport object\n\n  let info = await transporter.sendMail({\n    from: '\"认证邮件\" <imoocbrian@qq.com>',\n    // sender address\n    to: sendInfo.email,\n    // list of receivers\n    subject: sendInfo.user !== \"\" ? `你好开发者，${sendInfo.user}！《慕课网前端全栈实践》注册码` : \"《慕课网前端全栈实践》注册码\",\n    // Subject line\n    text: `您在《慕课网前端全栈实践》课程中注册，您的邀请码是${sendInfo.code},邀请码的过期时间: ${sendInfo.expire}`,\n    // plain text body\n    html: `\n        <div style=\"border: 1px solid #dcdcdc;color: #676767;width: 600px; margin: 0 auto; padding-bottom: 50px;position: relative;\">\n        <div style=\"height: 60px; background: #393d49; line-height: 60px; color: #58a36f; font-size: 18px;padding-left: 10px;\">Imooc社区——欢迎来到官方社区</div>\n        <div style=\"padding: 25px\">\n          <div>您好，${sendInfo.user}童鞋，重置链接有效时间30分钟，请在${sendInfo.expire}之前重置您的密码：</div>\n          <a href=\"${url}\" style=\"padding: 10px 20px; color: #fff; background: #009e94; display: inline-block;margin: 15px 0;\">立即重置密码</a>\n          <div style=\"padding: 5px; background: #f2f2f2;\">如果该邮件不是由你本人操作，请勿进行激活！否则你的邮箱将会被他人绑定。</div>\n        </div>\n        <div style=\"background: #fafafa; color: #b4b4b4;text-align: center; line-height: 45px; height: 45px; position: absolute; left: 0; bottom: 0;width: 100%;\">系统邮件，请勿直接回复</div>\n    </div>\n    ` // html body\n\n  });\n  return \"Message sent: %s\", info.messageId; // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n  // Preview only available when sending through an Ethereal account\n  // console.log('Preview URL: %s', nodemailer.getTestMessageUrl(info))\n  // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n} // main().catch(console.error)\n\n\nvar _default = send;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1haWxDb25maWcuanMiXSwibmFtZXMiOlsic2VuZCIsInNlbmRJbmZvIiwidHJhbnNwb3J0ZXIiLCJub2RlbWFpbGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiaG9zdCIsInBvcnQiLCJzZWN1cmUiLCJhdXRoIiwidXNlciIsInBhc3MiLCJ1cmwiLCJpbmZvIiwic2VuZE1haWwiLCJmcm9tIiwidG8iLCJlbWFpbCIsInN1YmplY3QiLCJ0ZXh0IiwiY29kZSIsImV4cGlyZSIsImh0bWwiLCJtZXNzYWdlSWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBO0FBQ0EsZUFBZUEsSUFBZixDQUFvQkMsUUFBcEIsRUFBOEI7QUFDNUI7QUFDQTtBQUNBO0FBRUE7QUFDQSxNQUFJQyxXQUFXLEdBQUdDLG9CQUFXQyxlQUFYLENBQTJCO0FBQzNDQyxJQUFBQSxJQUFJLEVBQUUsYUFEcUM7QUFFM0NDLElBQUFBLElBQUksRUFBRSxHQUZxQztBQUczQ0MsSUFBQUEsTUFBTSxFQUFFLEtBSG1DO0FBRzVCO0FBQ2ZDLElBQUFBLElBQUksRUFBRTtBQUNKQyxNQUFBQSxJQUFJLEVBQUUsbUJBREY7QUFDdUI7QUFDM0JDLE1BQUFBLElBQUksRUFBRSxrQkFGRixDQUVzQjs7QUFGdEI7QUFKcUMsR0FBM0IsQ0FBbEIsQ0FONEIsQ0FnQjVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUEsTUFBSUMsR0FBRyxHQUFHLHFCQUFWLENBdkI0QixDQXlCNUI7O0FBQ0EsTUFBSUMsSUFBSSxHQUFHLE1BQU1WLFdBQVcsQ0FBQ1csUUFBWixDQUFxQjtBQUNwQ0MsSUFBQUEsSUFBSSxFQUFFLDRCQUQ4QjtBQUNBO0FBQ3BDQyxJQUFBQSxFQUFFLEVBQUVkLFFBQVEsQ0FBQ2UsS0FGdUI7QUFFaEI7QUFDcEJDLElBQUFBLE9BQU8sRUFDTGhCLFFBQVEsQ0FBQ1EsSUFBVCxLQUFrQixFQUFsQixHQUNLLFNBQVFSLFFBQVEsQ0FBQ1EsSUFBSyxpQkFEM0IsR0FFSSxnQkFOOEI7QUFNWjtBQUN4QlMsSUFBQUEsSUFBSSxFQUFHLDRCQUEyQmpCLFFBQVEsQ0FBQ2tCLElBQUssY0FBYWxCLFFBQVEsQ0FBQ21CLE1BQU8sRUFQekM7QUFPNEM7QUFDaEZDLElBQUFBLElBQUksRUFBRztBQUNYO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQnBCLFFBQVEsQ0FBQ1EsSUFBSyxxQkFBb0JSLFFBQVEsQ0FBQ21CLE1BQU87QUFDdEUscUJBQXFCVCxHQUFJO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FsQndDLENBa0JqQzs7QUFsQmlDLEdBQXJCLENBQWpCO0FBcUJBLFNBQU8sb0JBQW9CQyxJQUFJLENBQUNVLFNBQWhDLENBL0M0QixDQWdENUI7QUFFQTtBQUNBO0FBQ0E7QUFDRCxDLENBRUQ7OztlQUVldEIsSSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL2NvbmZpZy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbm9kZW1haWxlciBmcm9tIFwibm9kZW1haWxlclwiO1xuXG4vLyBhc3luYy4uYXdhaXQgaXMgbm90IGFsbG93ZWQgaW4gZ2xvYmFsIHNjb3BlLCBtdXN0IHVzZSBhIHdyYXBwZXJcbmFzeW5jIGZ1bmN0aW9uIHNlbmQoc2VuZEluZm8pIHtcbiAgLy8gR2VuZXJhdGUgdGVzdCBTTVRQIHNlcnZpY2UgYWNjb3VudCBmcm9tIGV0aGVyZWFsLmVtYWlsXG4gIC8vIE9ubHkgbmVlZGVkIGlmIHlvdSBkb24ndCBoYXZlIGEgcmVhbCBtYWlsIGFjY291bnQgZm9yIHRlc3RpbmdcbiAgLy8gbGV0IHRlc3RBY2NvdW50ID0gYXdhaXQgbm9kZW1haWxlci5jcmVhdGVUZXN0QWNjb3VudCgpXG5cbiAgLy8gY3JlYXRlIHJldXNhYmxlIHRyYW5zcG9ydGVyIG9iamVjdCB1c2luZyB0aGUgZGVmYXVsdCBTTVRQIHRyYW5zcG9ydFxuICBsZXQgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XG4gICAgaG9zdDogXCJzbXRwLnFxLmNvbVwiLFxuICAgIHBvcnQ6IDU4NyxcbiAgICBzZWN1cmU6IGZhbHNlLCAvLyB0cnVlIGZvciA0NjUsIGZhbHNlIGZvciBvdGhlciBwb3J0c1xuICAgIGF1dGg6IHtcbiAgICAgIHVzZXI6IFwiaW1vb2NicmlhbkBxcS5jb21cIiwgLy8gZ2VuZXJhdGVkIGV0aGVyZWFsIHVzZXJcbiAgICAgIHBhc3M6IFwicmJrY2J4d3J1cnlnamZjYVwiLCAvLyBnZW5lcmF0ZWQgZXRoZXJlYWwgcGFzc3dvcmRcbiAgICB9LFxuICB9KTtcblxuICAvLyBsZXQgc2VuZEluZm8gPSB7XG4gIC8vICAgY29kZTogJzEyMzQnLFxuICAvLyAgIGV4cGlyZTogJzIwMTktMTAtMDEnLFxuICAvLyAgIGVtYWlsOiAnaW1vb2NicmlhbkBxcS5jb20nLFxuICAvLyAgIHVzZXI6ICdCcmlhbicsXG4gIC8vIH1cblxuICBsZXQgdXJsID0gXCJodHRwOi8vNDcuOTYuNDAuMTMyXCI7XG5cbiAgLy8gc2VuZCBtYWlsIHdpdGggZGVmaW5lZCB0cmFuc3BvcnQgb2JqZWN0XG4gIGxldCBpbmZvID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwoe1xuICAgIGZyb206ICdcIuiupOivgemCruS7tlwiIDxpbW9vY2JyaWFuQHFxLmNvbT4nLCAvLyBzZW5kZXIgYWRkcmVzc1xuICAgIHRvOiBzZW5kSW5mby5lbWFpbCwgLy8gbGlzdCBvZiByZWNlaXZlcnNcbiAgICBzdWJqZWN0OlxuICAgICAgc2VuZEluZm8udXNlciAhPT0gXCJcIlxuICAgICAgICA/IGDkvaDlpb3lvIDlj5HogIXvvIwke3NlbmRJbmZvLnVzZXJ977yB44CK5oWV6K++572R5YmN56uv5YWo5qCI5a6e6Le144CL5rOo5YaM56CBYFxuICAgICAgICA6IFwi44CK5oWV6K++572R5YmN56uv5YWo5qCI5a6e6Le144CL5rOo5YaM56CBXCIsIC8vIFN1YmplY3QgbGluZVxuICAgIHRleHQ6IGDmgqjlnKjjgIrmhZXor77nvZHliY3nq6/lhajmoIjlrp7ot7XjgIvor77nqIvkuK3ms6jlhozvvIzmgqjnmoTpgoDor7fnoIHmmK8ke3NlbmRJbmZvLmNvZGV9LOmCgOivt+eggeeahOi/h+acn+aXtumXtDogJHtzZW5kSW5mby5leHBpcmV9YCwgLy8gcGxhaW4gdGV4dCBib2R5XG4gICAgaHRtbDogYFxuICAgICAgICA8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgI2RjZGNkYztjb2xvcjogIzY3Njc2Nzt3aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nLWJvdHRvbTogNTBweDtwb3NpdGlvbjogcmVsYXRpdmU7XCI+XG4gICAgICAgIDxkaXYgc3R5bGU9XCJoZWlnaHQ6IDYwcHg7IGJhY2tncm91bmQ6ICMzOTNkNDk7IGxpbmUtaGVpZ2h0OiA2MHB4OyBjb2xvcjogIzU4YTM2ZjsgZm9udC1zaXplOiAxOHB4O3BhZGRpbmctbGVmdDogMTBweDtcIj5JbW9vY+ekvuWMuuKAlOKAlOasoui/juadpeWIsOWumOaWueekvuWMujwvZGl2PlxuICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjVweFwiPlxuICAgICAgICAgIDxkaXY+5oKo5aW977yMJHtzZW5kSW5mby51c2Vyfeerpemei++8jOmHjee9rumTvuaOpeacieaViOaXtumXtDMw5YiG6ZKf77yM6K+35ZyoJHtzZW5kSW5mby5leHBpcmV95LmL5YmN6YeN572u5oKo55qE5a+G56CB77yaPC9kaXY+XG4gICAgICAgICAgPGEgaHJlZj1cIiR7dXJsfVwiIHN0eWxlPVwicGFkZGluZzogMTBweCAyMHB4OyBjb2xvcjogI2ZmZjsgYmFja2dyb3VuZDogIzAwOWU5NDsgZGlzcGxheTogaW5saW5lLWJsb2NrO21hcmdpbjogMTVweCAwO1wiPueri+WNs+mHjee9ruWvhueggTwvYT5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogNXB4OyBiYWNrZ3JvdW5kOiAjZjJmMmYyO1wiPuWmguaenOivpemCruS7tuS4jeaYr+eUseS9oOacrOS6uuaTjeS9nO+8jOivt+WLv+i/m+ihjOa/gOa0u++8geWQpuWImeS9oOeahOmCrueuseWwhuS8muiiq+S7luS6uue7keWumuOAgjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6ICNmYWZhZmE7IGNvbG9yOiAjYjRiNGI0O3RleHQtYWxpZ246IGNlbnRlcjsgbGluZS1oZWlnaHQ6IDQ1cHg7IGhlaWdodDogNDVweDsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwOyBib3R0b206IDA7d2lkdGg6IDEwMCU7XCI+57O757uf6YKu5Lu277yM6K+35Yu/55u05o6l5Zue5aSNPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgYCwgLy8gaHRtbCBib2R5XG4gIH0pO1xuXG4gIHJldHVybiBcIk1lc3NhZ2Ugc2VudDogJXNcIiwgaW5mby5tZXNzYWdlSWQ7XG4gIC8vIE1lc3NhZ2Ugc2VudDogPGI2NThmOGNhLTYyOTYtY2NmNC04MzA2LTg3ZDU3YTBiNDMyMUBleGFtcGxlLmNvbT5cblxuICAvLyBQcmV2aWV3IG9ubHkgYXZhaWxhYmxlIHdoZW4gc2VuZGluZyB0aHJvdWdoIGFuIEV0aGVyZWFsIGFjY291bnRcbiAgLy8gY29uc29sZS5sb2coJ1ByZXZpZXcgVVJMOiAlcycsIG5vZGVtYWlsZXIuZ2V0VGVzdE1lc3NhZ2VVcmwoaW5mbykpXG4gIC8vIFByZXZpZXcgVVJMOiBodHRwczovL2V0aGVyZWFsLmVtYWlsL21lc3NhZ2UvV2FRS01nS2RkeFFEb291Li4uXG59XG5cbi8vIG1haW4oKS5jYXRjaChjb25zb2xlLmVycm9yKVxuXG5leHBvcnQgZGVmYXVsdCBzZW5kO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "MailConfig.js"
      ],
      "names": [
        "send",
        "sendInfo",
        "transporter",
        "nodemailer",
        "createTransport",
        "host",
        "port",
        "secure",
        "auth",
        "user",
        "pass",
        "url",
        "info",
        "sendMail",
        "from",
        "to",
        "email",
        "subject",
        "text",
        "code",
        "expire",
        "html",
        "messageId"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEA;AACA,eAAeA,IAAf,CAAoBC,QAApB,EAA8B;AAC5B;AACA;AACA;AAEA;AACA,MAAIC,WAAW,GAAGC,oBAAWC,eAAX,CAA2B;AAC3CC,IAAAA,IAAI,EAAE,aADqC;AAE3CC,IAAAA,IAAI,EAAE,GAFqC;AAG3CC,IAAAA,MAAM,EAAE,KAHmC;AAG5B;AACfC,IAAAA,IAAI,EAAE;AACJC,MAAAA,IAAI,EAAE,mBADF;AACuB;AAC3BC,MAAAA,IAAI,EAAE,kBAFF,CAEsB;;AAFtB;AAJqC,GAA3B,CAAlB,CAN4B,CAgB5B;AACA;AACA;AACA;AACA;AACA;;;AAEA,MAAIC,GAAG,GAAG,qBAAV,CAvB4B,CAyB5B;;AACA,MAAIC,IAAI,GAAG,MAAMV,WAAW,CAACW,QAAZ,CAAqB;AACpCC,IAAAA,IAAI,EAAE,4BAD8B;AACA;AACpCC,IAAAA,EAAE,EAAEd,QAAQ,CAACe,KAFuB;AAEhB;AACpBC,IAAAA,OAAO,EACLhB,QAAQ,CAACQ,IAAT,KAAkB,EAAlB,GACK,SAAQR,QAAQ,CAACQ,IAAK,iBAD3B,GAEI,gBAN8B;AAMZ;AACxBS,IAAAA,IAAI,EAAG,4BAA2BjB,QAAQ,CAACkB,IAAK,cAAalB,QAAQ,CAACmB,MAAO,EAPzC;AAO4C;AAChFC,IAAAA,IAAI,EAAG;AACX;AACA;AACA;AACA,oBAAoBpB,QAAQ,CAACQ,IAAK,qBAAoBR,QAAQ,CAACmB,MAAO;AACtE,qBAAqBT,GAAI;AACzB;AACA;AACA;AACA;AACA,KAlBwC,CAkBjC;;AAlBiC,GAArB,CAAjB;AAqBA,SAAO,oBAAoBC,IAAI,CAACU,SAAhC,CA/C4B,CAgD5B;AAEA;AACA;AACA;AACD,C,CAED;;;eAEetB,I",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "sourcesContent": [
        "import nodemailer from \"nodemailer\";\n\n// async..await is not allowed in global scope, must use a wrapper\nasync function send(sendInfo) {\n  // Generate test SMTP service account from ethereal.email\n  // Only needed if you don't have a real mail account for testing\n  // let testAccount = await nodemailer.createTestAccount()\n\n  // create reusable transporter object using the default SMTP transport\n  let transporter = nodemailer.createTransport({\n    host: \"smtp.qq.com\",\n    port: 587,\n    secure: false, // true for 465, false for other ports\n    auth: {\n      user: \"imoocbrian@qq.com\", // generated ethereal user\n      pass: \"rbkcbxwrurygjfca\", // generated ethereal password\n    },\n  });\n\n  // let sendInfo = {\n  //   code: '1234',\n  //   expire: '2019-10-01',\n  //   email: 'imoocbrian@qq.com',\n  //   user: 'Brian',\n  // }\n\n  let url = \"http://47.96.40.132\";\n\n  // send mail with defined transport object\n  let info = await transporter.sendMail({\n    from: '\"认证邮件\" <imoocbrian@qq.com>', // sender address\n    to: sendInfo.email, // list of receivers\n    subject:\n      sendInfo.user !== \"\"\n        ? `你好开发者，${sendInfo.user}！《慕课网前端全栈实践》注册码`\n        : \"《慕课网前端全栈实践》注册码\", // Subject line\n    text: `您在《慕课网前端全栈实践》课程中注册，您的邀请码是${sendInfo.code},邀请码的过期时间: ${sendInfo.expire}`, // plain text body\n    html: `\n        <div style=\"border: 1px solid #dcdcdc;color: #676767;width: 600px; margin: 0 auto; padding-bottom: 50px;position: relative;\">\n        <div style=\"height: 60px; background: #393d49; line-height: 60px; color: #58a36f; font-size: 18px;padding-left: 10px;\">Imooc社区——欢迎来到官方社区</div>\n        <div style=\"padding: 25px\">\n          <div>您好，${sendInfo.user}童鞋，重置链接有效时间30分钟，请在${sendInfo.expire}之前重置您的密码：</div>\n          <a href=\"${url}\" style=\"padding: 10px 20px; color: #fff; background: #009e94; display: inline-block;margin: 15px 0;\">立即重置密码</a>\n          <div style=\"padding: 5px; background: #f2f2f2;\">如果该邮件不是由你本人操作，请勿进行激活！否则你的邮箱将会被他人绑定。</div>\n        </div>\n        <div style=\"background: #fafafa; color: #b4b4b4;text-align: center; line-height: 45px; height: 45px; position: absolute; left: 0; bottom: 0;width: 100%;\">系统邮件，请勿直接回复</div>\n    </div>\n    `, // html body\n  });\n\n  return \"Message sent: %s\", info.messageId;\n  // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n\n  // Preview only available when sending through an Ethereal account\n  // console.log('Preview URL: %s', nodemailer.getTestMessageUrl(info))\n  // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n}\n\n// main().catch(console.error)\n\nexport default send;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638792457064
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-static-block",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-private-property-in-object",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-chaining",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
        "plugins": [
          "classStaticBlock",
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "loginRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _LoginController = _interopRequireDefault(require(\"../api/LoginController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.post('/forget', _LoginController.default.forget);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luUm91dGVyLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsIlJvdXRlciIsInBvc3QiLCJsb2dpbkNvbnRyb2xsZXIiLCJmb3JnZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQyxrQkFBSixFQUFmO0FBRUFELE1BQU0sQ0FBQ0UsSUFBUCxDQUFZLFNBQVosRUFBdUJDLHlCQUFnQkMsTUFBdkM7ZUFFZUosTSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUm91dGVyIGZyb20gJ2tvYS1yb3V0ZXInXG5pbXBvcnQgbG9naW5Db250cm9sbGVyIGZyb20gJy4uL2FwaS9Mb2dpbkNvbnRyb2xsZXInXG5cbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKVxuXG5yb3V0ZXIucG9zdCgnL2ZvcmdldCcsIGxvZ2luQ29udHJvbGxlci5mb3JnZXQpXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlclxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "loginRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "post",
        "loginController",
        "forget"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,IAAP,CAAY,SAAZ,EAAuBC,yBAAgBC,MAAvC;eAEeJ,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from 'koa-router'\nimport loginController from '../api/LoginController'\n\nconst router = new Router()\n\nrouter.post('/forget', loginController.forget)\n\nexport default router\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638789338262
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
        "sourceFileName": "RedisConfig.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setValue = exports.getValue = void 0;\n\nvar _redis = require(\"redis\");\n\nvar _index = _interopRequireDefault(require(\"./index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// (async () => {\nconst client = (0, _redis.createClient)({\n  url: `redis://:${_index.default.REDIS.password}@${_index.default.REDIS.host}:${_index.default.REDIS.port}`\n});\nclient.on(\"error\", err => console.log(\"Redis Client Error\", err));\nclient.connect();\n\nconst setValue = async (key, value, time) => {\n  if (time) return await client.set(key, value, {\n    EX: time\n  });else return await client.set(key, value);\n};\n\nexports.setValue = setValue;\n\nconst getValue = async key => {\n  return await client.get(key);\n};\n\nexports.getValue = getValue;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlZGlzQ29uZmlnLmpzIl0sIm5hbWVzIjpbImNsaWVudCIsInVybCIsImNvbmZpZyIsIlJFRElTIiwicGFzc3dvcmQiLCJob3N0IiwicG9ydCIsIm9uIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3QiLCJzZXRWYWx1ZSIsImtleSIsInZhbHVlIiwidGltZSIsInNldCIsIkVYIiwiZ2V0VmFsdWUiLCJnZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBO0FBQ0EsTUFBTUEsTUFBTSxHQUFHLHlCQUFhO0FBQzFCQyxFQUFBQSxHQUFHLEVBQUcsWUFBV0MsZUFBT0MsS0FBUCxDQUFhQyxRQUFTLElBQUdGLGVBQU9DLEtBQVAsQ0FBYUUsSUFBSyxJQUFHSCxlQUFPQyxLQUFQLENBQWFHLElBQUs7QUFEdkQsQ0FBYixDQUFmO0FBSUFOLE1BQU0sQ0FBQ08sRUFBUCxDQUFVLE9BQVYsRUFBb0JDLEdBQUQsSUFBU0MsT0FBTyxDQUFDQyxHQUFSLENBQVksb0JBQVosRUFBa0NGLEdBQWxDLENBQTVCO0FBRUFSLE1BQU0sQ0FBQ1csT0FBUDs7QUFFQSxNQUFNQyxRQUFRLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxLQUFaLEVBQW1CQyxJQUFuQixLQUE0QjtBQUMzQyxNQUFJQSxJQUFKLEVBQVUsT0FBTyxNQUFNZixNQUFNLENBQUNnQixHQUFQLENBQVdILEdBQVgsRUFBZ0JDLEtBQWhCLEVBQXVCO0FBQUVHLElBQUFBLEVBQUUsRUFBRUY7QUFBTixHQUF2QixDQUFiLENBQVYsS0FDSyxPQUFPLE1BQU1mLE1BQU0sQ0FBQ2dCLEdBQVAsQ0FBV0gsR0FBWCxFQUFnQkMsS0FBaEIsQ0FBYjtBQUNOLENBSEQ7Ozs7QUFLQSxNQUFNSSxRQUFRLEdBQUcsTUFBT0wsR0FBUCxJQUFlO0FBQzlCLFNBQU8sTUFBTWIsTUFBTSxDQUFDbUIsR0FBUCxDQUFXTixHQUFYLENBQWI7QUFDRCxDQUZEIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvY29uZmlnLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gXCJyZWRpc1wiO1xuaW1wb3J0IGNvbmZpZyBmcm9tIFwiLi9pbmRleFwiO1xuXG4vLyAoYXN5bmMgKCkgPT4ge1xuY29uc3QgY2xpZW50ID0gY3JlYXRlQ2xpZW50KHtcbiAgdXJsOiBgcmVkaXM6Ly86JHtjb25maWcuUkVESVMucGFzc3dvcmR9QCR7Y29uZmlnLlJFRElTLmhvc3R9OiR7Y29uZmlnLlJFRElTLnBvcnR9YCxcbn0pO1xuXG5jbGllbnQub24oXCJlcnJvclwiLCAoZXJyKSA9PiBjb25zb2xlLmxvZyhcIlJlZGlzIENsaWVudCBFcnJvclwiLCBlcnIpKTtcblxuY2xpZW50LmNvbm5lY3QoKTtcblxuY29uc3Qgc2V0VmFsdWUgPSBhc3luYyAoa2V5LCB2YWx1ZSwgdGltZSkgPT4ge1xuICBpZiAodGltZSkgcmV0dXJuIGF3YWl0IGNsaWVudC5zZXQoa2V5LCB2YWx1ZSwgeyBFWDogdGltZSB9KTtcbiAgZWxzZSByZXR1cm4gYXdhaXQgY2xpZW50LnNldChrZXksIHZhbHVlKTtcbn07XG5cbmNvbnN0IGdldFZhbHVlID0gYXN5bmMgKGtleSkgPT4ge1xuICByZXR1cm4gYXdhaXQgY2xpZW50LmdldChrZXkpO1xufTtcblxuZXhwb3J0IHsgc2V0VmFsdWUsIGdldFZhbHVlIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "RedisConfig.js"
      ],
      "names": [
        "client",
        "url",
        "config",
        "REDIS",
        "password",
        "host",
        "port",
        "on",
        "err",
        "console",
        "log",
        "connect",
        "setValue",
        "key",
        "value",
        "time",
        "set",
        "EX",
        "getValue",
        "get"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA;AACA,MAAMA,MAAM,GAAG,yBAAa;AAC1BC,EAAAA,GAAG,EAAG,YAAWC,eAAOC,KAAP,CAAaC,QAAS,IAAGF,eAAOC,KAAP,CAAaE,IAAK,IAAGH,eAAOC,KAAP,CAAaG,IAAK;AADvD,CAAb,CAAf;AAIAN,MAAM,CAACO,EAAP,CAAU,OAAV,EAAoBC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,GAAlC,CAA5B;AAEAR,MAAM,CAACW,OAAP;;AAEA,MAAMC,QAAQ,GAAG,OAAOC,GAAP,EAAYC,KAAZ,EAAmBC,IAAnB,KAA4B;AAC3C,MAAIA,IAAJ,EAAU,OAAO,MAAMf,MAAM,CAACgB,GAAP,CAAWH,GAAX,EAAgBC,KAAhB,EAAuB;AAAEG,IAAAA,EAAE,EAAEF;AAAN,GAAvB,CAAb,CAAV,KACK,OAAO,MAAMf,MAAM,CAACgB,GAAP,CAAWH,GAAX,EAAgBC,KAAhB,CAAb;AACN,CAHD;;;;AAKA,MAAMI,QAAQ,GAAG,MAAOL,GAAP,IAAe;AAC9B,SAAO,MAAMb,MAAM,CAACmB,GAAP,CAAWN,GAAX,CAAb;AACD,CAFD",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "sourcesContent": [
        "import { createClient } from \"redis\";\nimport config from \"./index\";\n\n// (async () => {\nconst client = createClient({\n  url: `redis://:${config.REDIS.password}@${config.REDIS.host}:${config.REDIS.port}`,\n});\n\nclient.on(\"error\", (err) => console.log(\"Redis Client Error\", err));\n\nclient.connect();\n\nconst setValue = async (key, value, time) => {\n  if (time) return await client.set(key, value, { EX: time });\n  else return await client.set(key, value);\n};\n\nconst getValue = async (key) => {\n  return await client.get(key);\n};\n\nexport { setValue, getValue };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638870093614
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/config/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/config/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/config/index.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/config/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst DB_URL = \"mongodb://root:root@47.96.40.132:27018/admin\";\nconst REDIS = {\n  host: \"47.96.40.132\",\n  port: 15002,\n  password: \"123456\"\n};\nconst JWT_SECRET = \"hahaha!\";\nconst baseUrl = process.env.NODE_ENV === \"production\" ? \"xxx\" : \"http://localhost:8080\";\nconst uploadPath = process.env.NODE_ENV === \"production\" ? \"app/public\" : _path.default.join(_path.default.resolve(__dirname), \"../../public\");\nvar _default = {\n  DB_URL,\n  REDIS,\n  JWT_SECRET,\n  baseUrl,\n  uploadPath\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkRCX1VSTCIsIlJFRElTIiwiaG9zdCIsInBvcnQiLCJwYXNzd29yZCIsIkpXVF9TRUNSRVQiLCJiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwidXBsb2FkUGF0aCIsInBhdGgiLCJqb2luIiwicmVzb2x2ZSIsIl9fZGlybmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ0EsTUFBTUEsTUFBTSxHQUFHLDhDQUFmO0FBRUEsTUFBTUMsS0FBSyxHQUFHO0FBQ1pDLEVBQUFBLElBQUksRUFBRSxjQURNO0FBRVpDLEVBQUFBLElBQUksRUFBRSxLQUZNO0FBR1pDLEVBQUFBLFFBQVEsRUFBRTtBQUhFLENBQWQ7QUFNQSxNQUFNQyxVQUFVLEdBQUcsU0FBbkI7QUFFQSxNQUFNQyxPQUFPLEdBQ1hDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxRQUFaLEtBQXlCLFlBQXpCLEdBQXdDLEtBQXhDLEdBQWdELHVCQURsRDtBQUdBLE1BQU1DLFVBQVUsR0FDZEgsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQVosS0FBeUIsWUFBekIsR0FDSSxZQURKLEdBRUlFLGNBQUtDLElBQUwsQ0FBVUQsY0FBS0UsT0FBTCxDQUFhQyxTQUFiLENBQVYsRUFBbUMsY0FBbkMsQ0FITjtlQUtlO0FBQ2JkLEVBQUFBLE1BRGE7QUFFYkMsRUFBQUEsS0FGYTtBQUdiSSxFQUFBQSxVQUhhO0FBSWJDLEVBQUFBLE9BSmE7QUFLYkksRUFBQUE7QUFMYSxDIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvY29uZmlnLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5jb25zdCBEQl9VUkwgPSBcIm1vbmdvZGI6Ly9yb290OnJvb3RANDcuOTYuNDAuMTMyOjI3MDE4L2FkbWluXCI7XG5cbmNvbnN0IFJFRElTID0ge1xuICBob3N0OiBcIjQ3Ljk2LjQwLjEzMlwiLFxuICBwb3J0OiAxNTAwMixcbiAgcGFzc3dvcmQ6IFwiMTIzNDU2XCIsXG59O1xuXG5jb25zdCBKV1RfU0VDUkVUID0gXCJoYWhhaGEhXCI7XG5cbmNvbnN0IGJhc2VVcmwgPVxuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBcInh4eFwiIDogXCJodHRwOi8vbG9jYWxob3N0OjgwODBcIjtcblxuY29uc3QgdXBsb2FkUGF0aCA9XG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIlxuICAgID8gXCJhcHAvcHVibGljXCJcbiAgICA6IHBhdGguam9pbihwYXRoLnJlc29sdmUoX19kaXJuYW1lKSwgXCIuLi8uLi9wdWJsaWNcIik7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgREJfVVJMLFxuICBSRURJUyxcbiAgSldUX1NFQ1JFVCxcbiAgYmFzZVVybCxcbiAgdXBsb2FkUGF0aCxcbn07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "DB_URL",
        "REDIS",
        "host",
        "port",
        "password",
        "JWT_SECRET",
        "baseUrl",
        "process",
        "env",
        "NODE_ENV",
        "uploadPath",
        "path",
        "join",
        "resolve",
        "__dirname"
      ],
      "mappings": ";;;;;;;AAAA;;;;AACA,MAAMA,MAAM,GAAG,8CAAf;AAEA,MAAMC,KAAK,GAAG;AACZC,EAAAA,IAAI,EAAE,cADM;AAEZC,EAAAA,IAAI,EAAE,KAFM;AAGZC,EAAAA,QAAQ,EAAE;AAHE,CAAd;AAMA,MAAMC,UAAU,GAAG,SAAnB;AAEA,MAAMC,OAAO,GACXC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,KAAxC,GAAgD,uBADlD;AAGA,MAAMC,UAAU,GACdH,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACI,YADJ,GAEIE,cAAKC,IAAL,CAAUD,cAAKE,OAAL,CAAaC,SAAb,CAAV,EAAmC,cAAnC,CAHN;eAKe;AACbd,EAAAA,MADa;AAEbC,EAAAA,KAFa;AAGbI,EAAAA,UAHa;AAIbC,EAAAA,OAJa;AAKbI,EAAAA;AALa,C",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "sourcesContent": [
        "import path from \"path\";\nconst DB_URL = \"mongodb://root:root@47.96.40.132:27018/admin\";\n\nconst REDIS = {\n  host: \"47.96.40.132\",\n  port: 15002,\n  password: \"123456\",\n};\n\nconst JWT_SECRET = \"hahaha!\";\n\nconst baseUrl =\n  process.env.NODE_ENV === \"production\" ? \"xxx\" : \"http://localhost:8080\";\n\nconst uploadPath =\n  process.env.NODE_ENV === \"production\"\n    ? \"app/public\"\n    : path.join(path.resolve(__dirname), \"../../public\");\n\nexport default {\n  DB_URL,\n  REDIS,\n  JWT_SECRET,\n  baseUrl,\n  uploadPath,\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640331850279
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "loginRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _LoginController = _interopRequireDefault(require(\"../api/LoginController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.prefix(\"/login\");\nrouter.post(\"/forget\", _LoginController.default.forget);\nrouter.post(\"/login\", _LoginController.default.login);\nrouter.post(\"/reg\", _LoginController.default.reg);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luUm91dGVyLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsIlJvdXRlciIsInByZWZpeCIsInBvc3QiLCJsb2dpbkNvbnRyb2xsZXIiLCJmb3JnZXQiLCJsb2dpbiIsInJlZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLElBQUlDLGtCQUFKLEVBQWY7QUFFQUQsTUFBTSxDQUFDRSxNQUFQLENBQWMsUUFBZDtBQUNBRixNQUFNLENBQUNHLElBQVAsQ0FBWSxTQUFaLEVBQXVCQyx5QkFBZ0JDLE1BQXZDO0FBQ0FMLE1BQU0sQ0FBQ0csSUFBUCxDQUFZLFFBQVosRUFBc0JDLHlCQUFnQkUsS0FBdEM7QUFDQU4sTUFBTSxDQUFDRyxJQUFQLENBQVksTUFBWixFQUFvQkMseUJBQWdCRyxHQUFwQztlQUVlUCxNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb3V0ZXIgZnJvbSBcImtvYS1yb3V0ZXJcIjtcbmltcG9ydCBsb2dpbkNvbnRyb2xsZXIgZnJvbSBcIi4uL2FwaS9Mb2dpbkNvbnRyb2xsZXJcIjtcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuXG5yb3V0ZXIucHJlZml4KFwiL2xvZ2luXCIpO1xucm91dGVyLnBvc3QoXCIvZm9yZ2V0XCIsIGxvZ2luQ29udHJvbGxlci5mb3JnZXQpO1xucm91dGVyLnBvc3QoXCIvbG9naW5cIiwgbG9naW5Db250cm9sbGVyLmxvZ2luKTtcbnJvdXRlci5wb3N0KFwiL3JlZ1wiLCBsb2dpbkNvbnRyb2xsZXIucmVnKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "loginRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "post",
        "loginController",
        "forget",
        "login",
        "reg"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,QAAd;AACAF,MAAM,CAACG,IAAP,CAAY,SAAZ,EAAuBC,yBAAgBC,MAAvC;AACAL,MAAM,CAACG,IAAP,CAAY,QAAZ,EAAsBC,yBAAgBE,KAAtC;AACAN,MAAM,CAACG,IAAP,CAAY,MAAZ,EAAoBC,yBAAgBG,GAApC;eAEeP,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport loginController from \"../api/LoginController\";\n\nconst router = new Router();\n\nrouter.prefix(\"/login\");\nrouter.post(\"/forget\", loginController.forget);\nrouter.post(\"/login\", loginController.login);\nrouter.post(\"/reg\", loginController.reg);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640264455359
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "LoginController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _MailConfig = _interopRequireDefault(require(\"../config/MailConfig\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nvar _utils = require(\"../common/utils\");\n\nvar _User = _interopRequireDefault(require(\"../model/User\"));\n\nvar _SignRecord = _interopRequireDefault(require(\"../model/SignRecord\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass LoginController {\n  constructor() {}\n\n  async forget(ctx) {\n    const {\n      body\n    } = ctx.request;\n\n    try {\n      // body.username -> database -> email\n      // 发送邮件\n      let result = await (0, _MailConfig.default)({\n        code: \"1234\",\n        expire: (0, _moment.default)().add(30, \"minutes\").format(\"YYYY-MM-DD HH:mm:ss\"),\n        email: body.username,\n        user: \"Brian\"\n      });\n      ctx.body = {\n        code: 200,\n        data: result,\n        msg: \"邮件发送成功\"\n      };\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async login(ctx) {\n    // 接收用户的数据\n    const {\n      body\n    } = ctx.request;\n    let sid = body.sid;\n    let code = body.code; // 验证图片验证码的时效性，正确性\n\n    if (await (0, _utils.checkCode)(sid, code)) {\n      // 验证用户账号密码是否正确\n      // mongoDB查库\n      let checkUserPasswd = false;\n      let user = await _User.default.findOne({\n        username: body.username\n      });\n\n      if (await _bcrypt.default.compare(body.password, user.password)) {\n        checkUserPasswd = true;\n      }\n\n      if (checkUserPasswd) {\n        const userObj = user.toJSON();\n        const arr = [\"password\", \"username\", \"roles\"];\n        arr.map(item => delete userObj[item]); // 返回token\n\n        let token = _jsonwebtoken.default.sign({\n          _id: userObj._id\n        }, _config.default.JWT_SECRET, {\n          expiresIn: \"1d\" // 一天有效期\n\n        }); // 加入isSign属性\n\n\n        const signRecord = await _SignRecord.default.findByUid(userObj._id);\n\n        if (signRecord) {\n          if ((0, _moment.default)(signRecord.created).format(\"YYYY-MM-DD\") === (0, _moment.default)().format(\"YYYY-MM-DD\")) {\n            userObj.isSign = true;\n          } else {\n            userObj.isSign = false;\n          }\n\n          userObj.lastSign = signRecord.created;\n        } else {\n          // 用户无签到记录\n          userObj.isSign = false;\n        }\n\n        ctx.body = {\n          code: 200,\n          data: userObj,\n          token: token\n        };\n      } else {\n        // 用户名，密码验证失败，返回提示\n        ctx.body = {\n          code: 404,\n          msg: \"用户名或密码错误\"\n        };\n      }\n    } else {\n      ctx.body = {\n        code: 401,\n        msg: \"图片验证码错误\"\n      };\n    }\n  }\n\n  async reg(ctx) {\n    // 接受客户端的数据\n    const {\n      body\n    } = ctx.request; // 校验验证码（时效性，有效性）\n\n    let sid = body.sid;\n    let code = body.code;\n    let msg = {};\n    let check = true;\n\n    if (await (0, _utils.checkCode)(sid, code)) {\n      // 查库，看username是否被注册\n      let user1 = await _User.default.findOne({\n        username: body.username\n      });\n\n      if (user1 !== null && typeof user1.username !== \"undefined\") {\n        msg.username = [\"此邮箱已经注册！\"];\n        check = false;\n      } // 查库，看name是否被注册\n\n\n      let user2 = await _User.default.findOne({\n        name: body.name\n      });\n\n      if (user2 !== null && typeof user2.name !== \"undefined\") {\n        msg.name = [\"此昵称已经注册！\"];\n        check = false;\n      }\n\n      if (check) {\n        // 写入数据库\n        body.password = await _bcrypt.default.hash(body.password, 5);\n        let user = new _User.default({\n          username: body.username,\n          name: body.name,\n          // 密码加密\n          password: body.password,\n          created: (0, _moment.default)().format(\"YYYY-MM-DD HH:mm:ss\")\n        });\n        let result = await user.save();\n        ctx.body = {\n          code: 200,\n          data: result,\n          msg: \"注册成功\"\n        };\n        return;\n      }\n\n      ctx.body = {\n        code: 500,\n        msg: msg\n      };\n    } else {\n      msg.code = [\"验证码已失效，请重新获取！\"];\n      ctx.body = {\n        code: 500,\n        msg: msg\n      };\n    }\n  }\n\n}\n\nvar _default = new LoginController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxvZ2luQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJMb2dpbkNvbnRyb2xsZXIiLCJjb25zdHJ1Y3RvciIsImZvcmdldCIsImN0eCIsImJvZHkiLCJyZXF1ZXN0IiwicmVzdWx0IiwiY29kZSIsImV4cGlyZSIsImFkZCIsImZvcm1hdCIsImVtYWlsIiwidXNlcm5hbWUiLCJ1c2VyIiwiZGF0YSIsIm1zZyIsImUiLCJjb25zb2xlIiwibG9nIiwibG9naW4iLCJzaWQiLCJjaGVja1VzZXJQYXNzd2QiLCJVc2VyIiwiZmluZE9uZSIsImJjcnlwdCIsImNvbXBhcmUiLCJwYXNzd29yZCIsInVzZXJPYmoiLCJ0b0pTT04iLCJhcnIiLCJtYXAiLCJpdGVtIiwidG9rZW4iLCJqc29ud2VidG9rZW4iLCJzaWduIiwiX2lkIiwiY29uZmlnIiwiSldUX1NFQ1JFVCIsImV4cGlyZXNJbiIsInNpZ25SZWNvcmQiLCJTaWduUmVjb3JkIiwiZmluZEJ5VWlkIiwiY3JlYXRlZCIsImlzU2lnbiIsImxhc3RTaWduIiwicmVnIiwiY2hlY2siLCJ1c2VyMSIsInVzZXIyIiwibmFtZSIsImhhc2giLCJzYXZlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxlQUFOLENBQXNCO0FBQ3BCQyxFQUFBQSxXQUFXLEdBQUcsQ0FBRTs7QUFDSixRQUFOQyxNQUFNLENBQUNDLEdBQUQsRUFBTTtBQUNoQixVQUFNO0FBQUVDLE1BQUFBO0FBQUYsUUFBV0QsR0FBRyxDQUFDRSxPQUFyQjs7QUFDQSxRQUFJO0FBQ0Y7QUFDQTtBQUNBLFVBQUlDLE1BQU0sR0FBRyxNQUFNLHlCQUFLO0FBQ3RCQyxRQUFBQSxJQUFJLEVBQUUsTUFEZ0I7QUFFdEJDLFFBQUFBLE1BQU0sRUFBRSx1QkFBU0MsR0FBVCxDQUFhLEVBQWIsRUFBaUIsU0FBakIsRUFBNEJDLE1BQTVCLENBQW1DLHFCQUFuQyxDQUZjO0FB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Zy93ZWIvZW5kL3NyYy9hcGkvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNlbmQgZnJvbSBcIi4uL2NvbmZpZy9NYWlsQ29uZmlnXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xuaW1wb3J0IGpzb253ZWJ0b2tlbiBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWdcIjtcbmltcG9ydCB7IGNoZWNrQ29kZSB9IGZyb20gXCIuLi9jb21tb24vdXRpbHNcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbC9Vc2VyXCI7XG5pbXBvcnQgU2lnblJlY29yZCBmcm9tIFwiLi4vbW9kZWwvU2lnblJlY29yZFwiO1xuXG5jbGFzcyBMb2dpbkNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG4gIGFzeW5jIGZvcmdldChjdHgpIHtcbiAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgIHRyeSB7XG4gICAgICAvLyBib2R5LnVzZXJuYW1lIC0+IGRhdGFiYXNlIC0+IGVtYWlsXG4gICAgICAvLyDlj5HpgIHpgq7ku7ZcbiAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBzZW5kKHtcbiAgICAgICAgY29kZTogXCIxMjM0XCIsXG4gICAgICAgIGV4cGlyZTogbW9tZW50KCkuYWRkKDMwLCBcIm1pbnV0ZXNcIikuZm9ybWF0KFwiWVlZWS1NTS1ERCBISDptbTpzc1wiKSxcbiAgICAgICAgZW1haWw6IGJvZHkudXNlcm5hbWUsXG4gICAgICAgIHVzZXI6IFwiQnJpYW5cIixcbiAgICAgIH0pO1xuICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICBtc2c6IFwi6YKu5Lu25Y+R6YCB5oiQ5YqfXCIsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvZ2luKGN0eCkge1xuICAgIC8vIOaOpeaUtueUqOaIt+eahOaVsOaNrlxuICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgbGV0IHNpZCA9IGJvZHkuc2lkO1xuICAgIGxldCBjb2RlID0gYm9keS5jb2RlO1xuICAgIC8vIOmqjOivgeWbvueJh+mqjOivgeeggeeahOaXtuaViOaAp++8jOato+ehruaAp1xuICAgIGlmIChhd2FpdCBjaGVja0NvZGUoc2lkLCBjb2RlKSkge1xuICAgICAgLy8g6aqM6K+B55So5oi36LSm5Y+35a+G56CB5piv5ZCm5q2j56GuXG4gICAgICAvLyBtb25nb0RC5p+l5bqTXG4gICAgICBsZXQgY2hlY2tVc2VyUGFzc3dkID0gZmFsc2U7XG4gICAgICBsZXQgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lIH0pO1xuICAgICAgaWYgKGF3YWl0IGJjcnlwdC5jb21wYXJlKGJvZHkucGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSB7XG4gICAgICAgIGNoZWNrVXNlclBhc3N3ZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoY2hlY2tVc2VyUGFzc3dkKSB7XG4gICAgICAgIGNvbnN0IHVzZXJPYmogPSB1c2VyLnRvSlNPTigpO1xuICAgICAgICBjb25zdCBhcnIgPSBbXCJwYXNzd29yZFwiLCBcInVzZXJuYW1lXCIsIFwicm9sZXNcIl07XG4gICAgICAgIGFyci5tYXAoKGl0ZW0pID0+IGRlbGV0ZSB1c2VyT2JqW2l0ZW1dKTtcbiAgICAgICAgLy8g6L+U5ZuedG9rZW5cbiAgICAgICAgbGV0IHRva2VuID0ganNvbndlYnRva2VuLnNpZ24oeyBfaWQ6IHVzZXJPYmouX2lkIH0sIGNvbmZpZy5KV1RfU0VDUkVULCB7XG4gICAgICAgICAgZXhwaXJlc0luOiBcIjFkXCIsIC8vIOS4gOWkqeacieaViOacn1xuICAgICAgICB9KTtcbiAgICAgICAgLy8g5Yqg5YWlaXNTaWdu5bGe5oCnXG4gICAgICAgIGNvbnN0IHNpZ25SZWNvcmQgPSBhd2FpdCBTaWduUmVjb3JkLmZpbmRCeVVpZCh1c2VyT2JqLl9pZCk7XG4gICAgICAgIGlmIChzaWduUmVjb3JkKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbW9tZW50KHNpZ25SZWNvcmQuY3JlYXRlZCkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKSA9PT1cbiAgICAgICAgICAgIG1vbWVudCgpLmZvcm1hdChcIllZWVktTU0tRERcIilcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHVzZXJPYmouaXNTaWduID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXNlck9iai5pc1NpZ24gPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdXNlck9iai5sYXN0U2lnbiA9IHNpZ25SZWNvcmQuY3JlYXRlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDnlKjmiLfml6Dnrb7liLDorrDlvZVcbiAgICAgICAgICB1c2VyT2JqLmlzU2lnbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICBkYXRhOiB1c2VyT2JqLFxuICAgICAgICAgIHRva2VuOiB0b2tlbixcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOeUqOaIt+WQje+8jOWvhueggemqjOivgeWksei0pe+8jOi/lOWbnuaPkOekulxuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgICAgbXNnOiBcIueUqOaIt+WQjeaIluWvhueggemUmeivr1wiLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtc2c6IFwi5Zu+54mH6aqM6K+B56CB6ZSZ6K+vXCIsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlZyhjdHgpIHtcbiAgICAvLyDmjqXlj5flrqLmiLfnq6/nmoTmlbDmja5cbiAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgIC8vIOagoemqjOmqjOivgeegge+8iOaXtuaViOaAp++8jOacieaViOaAp++8iVxuICAgIGxldCBzaWQgPSBib2R5LnNpZDtcbiAgICBsZXQgY29kZSA9IGJvZHkuY29kZTtcbiAgICBsZXQgbXNnID0ge307XG4gICAgbGV0IGNoZWNrID0gdHJ1ZTtcbiAgICBpZiAoYXdhaXQgY2hlY2tDb2RlKHNpZCwgY29kZSkpIHtcbiAgICAgIC8vIOafpeW6k++8jOeci3VzZXJuYW1l5piv5ZCm6KKr5rOo5YaMXG4gICAgICBsZXQgdXNlcjEgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB1c2VybmFtZTogYm9keS51c2VybmFtZSB9KTtcbiAgICAgIGlmICh1c2VyMSAhPT0gbnVsbCAmJiB0eXBlb2YgdXNlcjEudXNlcm5hbWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgbXNnLnVzZXJuYW1lID0gW1wi5q2k6YKu566x5bey57uP5rOo5YaM77yBXCJdO1xuICAgICAgICBjaGVjayA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8g5p+l5bqT77yM55yLbmFtZeaYr+WQpuiiq+azqOWGjFxuICAgICAgbGV0IHVzZXIyID0gYXdhaXQgVXNlci5maW5kT25lKHsgbmFtZTogYm9keS5uYW1lIH0pO1xuICAgICAgaWYgKHVzZXIyICE9PSBudWxsICYmIHR5cGVvZiB1c2VyMi5uYW1lICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIG1zZy5uYW1lID0gW1wi5q2k5pi156ew5bey57uP5rOo5YaM77yBXCJdO1xuICAgICAgICBjaGVjayA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGNoZWNrKSB7XG4gICAgICAgIC8vIOWGmeWFpeaVsOaNruW6k1xuICAgICAgICBib2R5LnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2goYm9keS5wYXNzd29yZCwgNSk7XG4gICAgICAgIGxldCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgICAgIHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lLFxuICAgICAgICAgIG5hbWU6IGJvZHkubmFtZSxcbiAgICAgICAgICAvLyDlr4bnoIHliqDlr4ZcbiAgICAgICAgICBwYXNzd29yZDogYm9keS5wYXNzd29yZCxcbiAgICAgICAgICBjcmVhdGVkOiBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLUREIEhIOm1tOnNzXCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgIG1zZzogXCLms6jlhozmiJDlip9cIixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgbXNnOiBtc2csXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBtc2cuY29kZSA9IFtcIumqjOivgeeggeW3suWkseaViO+8jOivt+mHjeaWsOiOt+WPlu+8gVwiXTtcbiAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgIG1zZzogbXNnLFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IExvZ2luQ29udHJvbGxlcigpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "LoginController.js"
      ],
      "names": [
        "LoginController",
        "constructor",
        "forget",
        "ctx",
        "body",
        "request",
        "result",
        "code",
        "expire",
        "add",
        "format",
        "email",
        "username",
        "user",
        "data",
        "msg",
        "e",
        "console",
        "log",
        "login",
        "sid",
        "checkUserPasswd",
        "User",
        "findOne",
        "bcrypt",
        "compare",
        "password",
        "userObj",
        "toJSON",
        "arr",
        "map",
        "item",
        "token",
        "jsonwebtoken",
        "sign",
        "_id",
        "config",
        "JWT_SECRET",
        "expiresIn",
        "signRecord",
        "SignRecord",
        "findByUid",
        "created",
        "isSign",
        "lastSign",
        "reg",
        "check",
        "user1",
        "user2",
        "name",
        "hash",
        "save"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "import send from \"../config/MailConfig\";\nimport bcrypt from \"bcrypt\";\nimport moment from \"moment\";\nimport jsonwebtoken from \"jsonwebtoken\";\nimport config from \"../config\";\nimport { checkCode } from \"../common/utils\";\nimport User from \"../model/User\";\nimport SignRecord from \"../model/SignRecord\";\n\nclass LoginController {\n  constructor() {}\n  async forget(ctx) {\n    const { body } = ctx.request;\n    try {\n      // body.username -> database -> email\n      // 发送邮件\n      let result = await send({\n        code: \"1234\",\n        expire: moment().add(30, \"minutes\").format(\"YYYY-MM-DD HH:mm:ss\"),\n        email: body.username,\n        user: \"Brian\",\n      });\n      ctx.body = {\n        code: 200,\n        data: result,\n        msg: \"邮件发送成功\",\n      };\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async login(ctx) {\n    // 接收用户的数据\n    const { body } = ctx.request;\n    let sid = body.sid;\n    let code = body.code;\n    // 验证图片验证码的时效性，正确性\n    if (await checkCode(sid, code)) {\n      // 验证用户账号密码是否正确\n      // mongoDB查库\n      let checkUserPasswd = false;\n      let user = await User.findOne({ username: body.username });\n      if (await bcrypt.compare(body.password, user.password)) {\n        checkUserPasswd = true;\n      }\n      if (checkUserPasswd) {\n        const userObj = user.toJSON();\n        const arr = [\"password\", \"username\", \"roles\"];\n        arr.map((item) => delete userObj[item]);\n        // 返回token\n        let token = jsonwebtoken.sign({ _id: userObj._id }, config.JWT_SECRET, {\n          expiresIn: \"1d\", // 一天有效期\n        });\n        // 加入isSign属性\n        const signRecord = await SignRecord.findByUid(userObj._id);\n        if (signRecord) {\n          if (\n            moment(signRecord.created).format(\"YYYY-MM-DD\") ===\n            moment().format(\"YYYY-MM-DD\")\n          ) {\n            userObj.isSign = true;\n          } else {\n            userObj.isSign = false;\n          }\n          userObj.lastSign = signRecord.created;\n        } else {\n          // 用户无签到记录\n          userObj.isSign = false;\n        }\n        ctx.body = {\n          code: 200,\n          data: userObj,\n          token: token,\n        };\n      } else {\n        // 用户名，密码验证失败，返回提示\n        ctx.body = {\n          code: 404,\n          msg: \"用户名或密码错误\",\n        };\n      }\n    } else {\n      ctx.body = {\n        code: 401,\n        msg: \"图片验证码错误\",\n      };\n    }\n  }\n\n  async reg(ctx) {\n    // 接受客户端的数据\n    const { body } = ctx.request;\n    // 校验验证码（时效性，有效性）\n    let sid = body.sid;\n    let code = body.code;\n    let msg = {};\n    let check = true;\n    if (await checkCode(sid, code)) {\n      // 查库，看username是否被注册\n      let user1 = await User.findOne({ username: body.username });\n      if (user1 !== null && typeof user1.username !== \"undefined\") {\n        msg.username = [\"此邮箱已经注册！\"];\n        check = false;\n      }\n      // 查库，看name是否被注册\n      let user2 = await User.findOne({ name: body.name });\n      if (user2 !== null && typeof user2.name !== \"undefined\") {\n        msg.name = [\"此昵称已经注册！\"];\n        check = false;\n      }\n      if (check) {\n        // 写入数据库\n        body.password = await bcrypt.hash(body.password, 5);\n        let user = new User({\n          username: body.username,\n          name: body.name,\n          // 密码加密\n          password: body.password,\n          created: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\n        });\n        let result = await user.save();\n        ctx.body = {\n          code: 200,\n          data: result,\n          msg: \"注册成功\",\n        };\n        return;\n      }\n      ctx.body = {\n        code: 500,\n        msg: msg,\n      };\n    } else {\n      msg.code = [\"验证码已失效，请重新获取！\"];\n      ctx.body = {\n        code: 500,\n        msg: msg,\n      };\n    }\n  }\n}\n\nexport default new LoginController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640265235588
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
        "sourceFileName": "MailConfig.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _nodemailer = _interopRequireDefault(require(\"nodemailer\"));\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nvar _qs = _interopRequireDefault(require(\"qs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// async..await is not allowed in global scope, must use a wrapper\nasync function send(sendInfo) {\n  // Generate test SMTP service account from ethereal.email\n  // Only needed if you don't have a real mail account for testing\n  // let testAccount = await nodemailer.createTestAccount()\n  // create reusable transporter object using the default SMTP transport\n  let transporter = _nodemailer.default.createTransport({\n    host: \"smtp.qq.com\",\n    port: 587,\n    secure: false,\n    // true for 465, false for other ports\n    auth: {\n      user: \"1210109544@qq.com\",\n      // generated ethereal user\n      pass: \"izwxryxhejwxfecg\" // generated ethereal password\n\n    }\n  }); // let sendInfo = {\n  //   code: '1234',\n  //   expire: '2019-10-01',\n  //   email: 'imoocbrian@qq.com',\n  //   user: 'Brian',\n  // }\n\n\n  const baseUrl = _config.default.baseUrl;\n  const route = sendInfo.type === \"email\" ? \"confirm\" : \"reset\";\n\n  let url = `${baseUrl}/#/${route}?` + _qs.default.stringify(sendInfo.data);\n\n  console.log(\"url\", url); // send mail with defined transport object\n\n  let info = await transporter.sendMail({\n    from: '\"认证邮件\" <1210109544@qq.com>',\n    // sender address\n    to: sendInfo.email,\n    // list of receivers\n    subject: sendInfo.user !== \"\" && sendInfo.type !== \"email\" ? `你好，${sendInfo.user}！《来一碗》注册码` : \"《来一碗》确认修改邮件链接\",\n    // Subject line\n    text: `您在《来一碗》中注册，您的邀请码是${sendInfo.code},邀请码的过期时间: ${sendInfo.expire}`,\n    // plain text body\n    html: `\n        <div style=\"border: 1px solid #dcdcdc;color: #676767;width: 600px; margin: 0 auto; padding-bottom: 50px;position: relative;\">\n        <div style=\"height: 60px; background: #393d49; line-height: 60px; color: #58a36f; font-size: 18px;padding-left: 10px;\">Imooc社区——欢迎来到官方社区</div>\n        <div style=\"padding: 25px\">\n          <div>您好，${sendInfo.user}，重置链接有效时间30分钟，请在${sendInfo.expire}之前${sendInfo.code ? \"重置您的密码\" : \"修改您的邮箱为：\" + sendInfo.data.username}：</div>\n          <a href=\"${url}\" style=\"padding: 10px 20px; color: #fff; background: #009e94; display: inline-block;margin: 15px 0;\">${sendInfo.code ? \"立即重置密码\" : \"确认设置邮箱\"}</a>\n          <div style=\"padding: 5px; background: #f2f2f2;\">如果该邮件不是由你本人操作，请勿进行激活！否则你的邮箱将会被他人绑定。</div>\n        </div>\n        <div style=\"background: #fafafa; color: #b4b4b4;text-align: center; line-height: 45px; height: 45px; position: absolute; left: 0; bottom: 0;width: 100%;\">系统邮件，请勿直接回复</div>\n    </div>\n    ` // html body\n\n  });\n  return \"Message sent: %s\", info.messageId; // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n  // Preview only available when sending through an Ethereal account\n  // console.log('Preview URL: %s', nodemailer.getTestMessageUrl(info))\n  // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n} // main().catch(console.error)\n\n\nvar _default = send;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1haWxDb25maWcuanMiXSwibmFtZXMiOlsic2VuZCIsInNlbmRJbmZvIiwidHJhbnNwb3J0ZXIiLCJub2RlbWFpbGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiaG9zdCIsInBvcnQiLCJzZWN1cmUiLCJhdXRoIiwidXNlciIsInBhc3MiLCJiYXNlVXJsIiwiY29uZmlnIiwicm91dGUiLCJ0eXBlIiwidXJsIiwicXMiLCJzdHJpbmdpZnkiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImluZm8iLCJzZW5kTWFpbCIsImZyb20iLCJ0byIsImVtYWlsIiwic3ViamVjdCIsInRleHQiLCJjb2RlIiwiZXhwaXJlIiwiaHRtbCIsInVzZXJuYW1lIiwibWVzc2FnZUlkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFFQTtBQUNBLGVBQWVBLElBQWYsQ0FBb0JDLFFBQXBCLEVBQThCO0FBQzVCO0FBQ0E7QUFDQTtBQUVBO0FBQ0EsTUFBSUMsV0FBVyxHQUFHQyxvQkFBV0MsZUFBWCxDQUEyQjtBQUMzQ0MsSUFBQUEsSUFBSSxFQUFFLGFBRHFDO0FBRTNDQyxJQUFBQSxJQUFJLEVBQUUsR0FGcUM7QUFHM0NDLElBQUFBLE1BQU0sRUFBRSxLQUhtQztBQUc1QjtBQUNmQyxJQUFBQSxJQUFJLEVBQUU7QUFDSkMsTUFBQUEsSUFBSSxFQUFFLG1CQURGO0FBQ3VCO0FBQzNCQyxNQUFBQSxJQUFJLEVBQUUsa0JBRkYsQ0FFc0I7O0FBRnRCO0FBSnFDLEdBQTNCLENBQWxCLENBTjRCLENBZ0I1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBLFFBQU1DLE9BQU8sR0FBR0MsZ0JBQU9ELE9BQXZCO0FBQ0EsUUFBTUUsS0FBSyxHQUFHWixRQUFRLENBQUNhLElBQVQsS0FBa0IsT0FBbEIsR0FBNEIsU0FBNUIsR0FBd0MsT0FBdEQ7O0FBQ0EsTUFBSUMsR0FBRyxHQUFJLEdBQUVKLE9BQVEsTUFBS0UsS0FBTSxHQUF0QixHQUEyQkcsWUFBR0MsU0FBSCxDQUFhaEIsUUFBUSxDQUFDaUIsSUFBdEIsQ0FBckM7O0FBQ0FDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLEtBQVosRUFBbUJMLEdBQW5CLEVBekI0QixDQTJCNUI7O0FBQ0EsTUFBSU0sSUFBSSxHQUFHLE1BQU1uQixXQUFXLENBQUNvQixRQUFaLENBQXFCO0FBQ3BDQyxJQUFBQSxJQUFJLEVBQUUsNEJBRDhCO0FBQ0E7QUFDcENDLElBQUFBLEVBQUUsRUFBRXZCLFFBQVEsQ0FBQ3dCLEtBRnVCO0FBRWhCO0FBQ3BCQyxJQUFBQSxPQUFPLEVBQ0x6QixRQUFRLENBQUNRLElBQVQsS0FBa0IsRUFBbEIsSUFBd0JSLFFBQVEsQ0FBQ2EsSUFBVCxLQUFrQixPQUExQyxHQUNLLE1BQUtiLFFBQVEsQ0FBQ1EsSUFBSyxXQUR4QixHQUVJLGVBTjhCO0FBTWI7QUFDdkJrQixJQUFBQSxJQUFJLEVBQUcsb0JBQW1CMUIsUUFBUSxDQUFDMkIsSUFBSyxjQUFhM0IsUUFBUSxDQUFDNEIsTUFBTyxFQVBqQztBQU9vQztBQUN4RUMsSUFBQUEsSUFBSSxFQUFHO0FBQ1g7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CN0IsUUFBUSxDQUFDUSxJQUFLLG1CQUM1QlIsUUFBUSxDQUFDNEIsTUFDVixLQUNDNUIsUUFBUSxDQUFDMkIsSUFBVCxHQUNJLFFBREosR0FFSSxhQUFhM0IsUUFBUSxDQUFDaUIsSUFBVCxDQUFjYSxRQUNoQztBQUNMLHFCQUFxQmhCLEdBQUkseUdBQ25CZCxRQUFRLENBQUMyQixJQUFULEdBQWdCLFFBQWhCLEdBQTJCLFFBQzVCO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQTFCd0MsQ0EwQmpDOztBQTFCaUMsR0FBckIsQ0FBakI7QUE2QkEsU0FBTyxvQkFBb0JQLElBQUksQ0FBQ1csU0FBaEMsQ0F6RDRCLENBMEQ1QjtBQUVBO0FBQ0E7QUFDQTtBQUNELEMsQ0FFRDs7O2VBRWVoQyxJIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvY29uZmlnLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBub2RlbWFpbGVyIGZyb20gXCJub2RlbWFpbGVyXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWdcIjtcbmltcG9ydCBxcyBmcm9tIFwicXNcIjtcblxuLy8gYXN5bmMuLmF3YWl0IGlzIG5vdCBhbGxvd2VkIGluIGdsb2JhbCBzY29wZSwgbXVzdCB1c2UgYSB3cmFwcGVyXG5hc3luYyBmdW5jdGlvbiBzZW5kKHNlbmRJbmZvKSB7XG4gIC8vIEdlbmVyYXRlIHRlc3QgU01UUCBzZXJ2aWNlIGFjY291bnQgZnJvbSBldGhlcmVhbC5lbWFpbFxuICAvLyBPbmx5IG5lZWRlZCBpZiB5b3UgZG9uJ3QgaGF2ZSBhIHJlYWwgbWFpbCBhY2NvdW50IGZvciB0ZXN0aW5nXG4gIC8vIGxldCB0ZXN0QWNjb3VudCA9IGF3YWl0IG5vZGVtYWlsZXIuY3JlYXRlVGVzdEFjY291bnQoKVxuXG4gIC8vIGNyZWF0ZSByZXVzYWJsZSB0cmFuc3BvcnRlciBvYmplY3QgdXNpbmcgdGhlIGRlZmF1bHQgU01UUCB0cmFuc3BvcnRcbiAgbGV0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgIGhvc3Q6IFwic210cC5xcS5jb21cIixcbiAgICBwb3J0OiA1ODcsXG4gICAgc2VjdXJlOiBmYWxzZSwgLy8gdHJ1ZSBmb3IgNDY1LCBmYWxzZSBmb3Igb3RoZXIgcG9ydHNcbiAgICBhdXRoOiB7XG4gICAgICB1c2VyOiBcIjEyMTAxMDk1NDRAcXEuY29tXCIsIC8vIGdlbmVyYXRlZCBldGhlcmVhbCB1c2VyXG4gICAgICBwYXNzOiBcIml6d3hyeXhoZWp3eGZlY2dcIiwgLy8gZ2VuZXJhdGVkIGV0aGVyZWFsIHBhc3N3b3JkXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gbGV0IHNlbmRJbmZvID0ge1xuICAvLyAgIGNvZGU6ICcxMjM0JyxcbiAgLy8gICBleHBpcmU6ICcyMDE5LTEwLTAxJyxcbiAgLy8gICBlbWFpbDogJ2ltb29jYnJpYW5AcXEuY29tJyxcbiAgLy8gICB1c2VyOiAnQnJpYW4nLFxuICAvLyB9XG4gIGNvbnN0IGJhc2VVcmwgPSBjb25maWcuYmFzZVVybDtcbiAgY29uc3Qgcm91dGUgPSBzZW5kSW5mby50eXBlID09PSBcImVtYWlsXCIgPyBcImNvbmZpcm1cIiA6IFwicmVzZXRcIjtcbiAgbGV0IHVybCA9IGAke2Jhc2VVcmx9LyMvJHtyb3V0ZX0/YCArIHFzLnN0cmluZ2lmeShzZW5kSW5mby5kYXRhKTtcbiAgY29uc29sZS5sb2coXCJ1cmxcIiwgdXJsKTtcblxuICAvLyBzZW5kIG1haWwgd2l0aCBkZWZpbmVkIHRyYW5zcG9ydCBvYmplY3RcbiAgbGV0IGluZm8gPSBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbCh7XG4gICAgZnJvbTogJ1wi6K6k6K+B6YKu5Lu2XCIgPDEyMTAxMDk1NDRAcXEuY29tPicsIC8vIHNlbmRlciBhZGRyZXNzXG4gICAgdG86IHNlbmRJbmZvLmVtYWlsLCAvLyBsaXN0IG9mIHJlY2VpdmVyc1xuICAgIHN1YmplY3Q6XG4gICAgICBzZW5kSW5mby51c2VyICE9PSBcIlwiICYmIHNlbmRJbmZvLnR5cGUgIT09IFwiZW1haWxcIlxuICAgICAgICA/IGDkvaDlpb3vvIwke3NlbmRJbmZvLnVzZXJ977yB44CK5p2l5LiA56KX44CL5rOo5YaM56CBYFxuICAgICAgICA6IFwi44CK5p2l5LiA56KX44CL56Gu6K6k5L+u5pS56YKu5Lu26ZO+5o6lXCIsIC8vIFN1YmplY3QgbGluZVxuICAgIHRleHQ6IGDmgqjlnKjjgIrmnaXkuIDnopfjgIvkuK3ms6jlhozvvIzmgqjnmoTpgoDor7fnoIHmmK8ke3NlbmRJbmZvLmNvZGV9LOmCgOivt+eggeeahOi/h+acn+aXtumXtDogJHtzZW5kSW5mby5leHBpcmV9YCwgLy8gcGxhaW4gdGV4dCBib2R5XG4gICAgaHRtbDogYFxuICAgICAgICA8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgI2RjZGNkYztjb2xvcjogIzY3Njc2Nzt3aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nLWJvdHRvbTogNTBweDtwb3NpdGlvbjogcmVsYXRpdmU7XCI+XG4gICAgICAgIDxkaXYgc3R5bGU9XCJoZWlnaHQ6IDYwcHg7IGJhY2tncm91bmQ6ICMzOTNkNDk7IGxpbmUtaGVpZ2h0OiA2MHB4OyBjb2xvcjogIzU4YTM2ZjsgZm9udC1zaXplOiAxOHB4O3BhZGRpbmctbGVmdDogMTBweDtcIj5JbW9vY+ekvuWMuuKAlOKAlOasoui/juadpeWIsOWumOaWueekvuWMujwvZGl2PlxuICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjVweFwiPlxuICAgICAgICAgIDxkaXY+5oKo5aW977yMJHtzZW5kSW5mby51c2Vyfe+8jOmHjee9rumTvuaOpeacieaViOaXtumXtDMw5YiG6ZKf77yM6K+35ZyoJHtcbiAgICAgIHNlbmRJbmZvLmV4cGlyZVxuICAgIH3kuYvliY0ke1xuICAgICAgc2VuZEluZm8uY29kZVxuICAgICAgICA/IFwi6YeN572u5oKo55qE5a+G56CBXCJcbiAgICAgICAgOiBcIuS/ruaUueaCqOeahOmCrueuseS4uu+8mlwiICsgc2VuZEluZm8uZGF0YS51c2VybmFtZVxuICAgIH3vvJo8L2Rpdj5cbiAgICAgICAgICA8YSBocmVmPVwiJHt1cmx9XCIgc3R5bGU9XCJwYWRkaW5nOiAxMHB4IDIwcHg7IGNvbG9yOiAjZmZmOyBiYWNrZ3JvdW5kOiAjMDA5ZTk0OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7bWFyZ2luOiAxNXB4IDA7XCI+JHtcbiAgICAgIHNlbmRJbmZvLmNvZGUgPyBcIueri+WNs+mHjee9ruWvhueggVwiIDogXCLnoa7orqTorr7nva7pgq7nrrFcIlxuICAgIH08L2E+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDVweDsgYmFja2dyb3VuZDogI2YyZjJmMjtcIj7lpoLmnpzor6Xpgq7ku7bkuI3mmK/nlLHkvaDmnKzkurrmk43kvZzvvIzor7fli7/ov5vooYzmv4DmtLvvvIHlkKbliJnkvaDnmoTpgq7nrrHlsIbkvJrooqvku5bkurrnu5HlrprjgII8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZmFmYWZhOyBjb2xvcjogI2I0YjRiNDt0ZXh0LWFsaWduOiBjZW50ZXI7IGxpbmUtaGVpZ2h0OiA0NXB4OyBoZWlnaHQ6IDQ1cHg7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMDsgYm90dG9tOiAwO3dpZHRoOiAxMDAlO1wiPuezu+e7n+mCruS7tu+8jOivt+WLv+ebtOaOpeWbnuWkjTwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGAsIC8vIGh0bWwgYm9keVxuICB9KTtcblxuICByZXR1cm4gXCJNZXNzYWdlIHNlbnQ6ICVzXCIsIGluZm8ubWVzc2FnZUlkO1xuICAvLyBNZXNzYWdlIHNlbnQ6IDxiNjU4ZjhjYS02Mjk2LWNjZjQtODMwNi04N2Q1N2EwYjQzMjFAZXhhbXBsZS5jb20+XG5cbiAgLy8gUHJldmlldyBvbmx5IGF2YWlsYWJsZSB3aGVuIHNlbmRpbmcgdGhyb3VnaCBhbiBFdGhlcmVhbCBhY2NvdW50XG4gIC8vIGNvbnNvbGUubG9nKCdQcmV2aWV3IFVSTDogJXMnLCBub2RlbWFpbGVyLmdldFRlc3RNZXNzYWdlVXJsKGluZm8pKVxuICAvLyBQcmV2aWV3IFVSTDogaHR0cHM6Ly9ldGhlcmVhbC5lbWFpbC9tZXNzYWdlL1dhUUtNZ0tkZHhRRG9vdS4uLlxufVxuXG4vLyBtYWluKCkuY2F0Y2goY29uc29sZS5lcnJvcilcblxuZXhwb3J0IGRlZmF1bHQgc2VuZDtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "MailConfig.js"
      ],
      "names": [
        "send",
        "sendInfo",
        "transporter",
        "nodemailer",
        "createTransport",
        "host",
        "port",
        "secure",
        "auth",
        "user",
        "pass",
        "baseUrl",
        "config",
        "route",
        "type",
        "url",
        "qs",
        "stringify",
        "data",
        "console",
        "log",
        "info",
        "sendMail",
        "from",
        "to",
        "email",
        "subject",
        "text",
        "code",
        "expire",
        "html",
        "username",
        "messageId"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;AACA,eAAeA,IAAf,CAAoBC,QAApB,EAA8B;AAC5B;AACA;AACA;AAEA;AACA,MAAIC,WAAW,GAAGC,oBAAWC,eAAX,CAA2B;AAC3CC,IAAAA,IAAI,EAAE,aADqC;AAE3CC,IAAAA,IAAI,EAAE,GAFqC;AAG3CC,IAAAA,MAAM,EAAE,KAHmC;AAG5B;AACfC,IAAAA,IAAI,EAAE;AACJC,MAAAA,IAAI,EAAE,mBADF;AACuB;AAC3BC,MAAAA,IAAI,EAAE,kBAFF,CAEsB;;AAFtB;AAJqC,GAA3B,CAAlB,CAN4B,CAgB5B;AACA;AACA;AACA;AACA;AACA;;;AACA,QAAMC,OAAO,GAAGC,gBAAOD,OAAvB;AACA,QAAME,KAAK,GAAGZ,QAAQ,CAACa,IAAT,KAAkB,OAAlB,GAA4B,SAA5B,GAAwC,OAAtD;;AACA,MAAIC,GAAG,GAAI,GAAEJ,OAAQ,MAAKE,KAAM,GAAtB,GAA2BG,YAAGC,SAAH,CAAahB,QAAQ,CAACiB,IAAtB,CAArC;;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBL,GAAnB,EAzB4B,CA2B5B;;AACA,MAAIM,IAAI,GAAG,MAAMnB,WAAW,CAACoB,QAAZ,CAAqB;AACpCC,IAAAA,IAAI,EAAE,4BAD8B;AACA;AACpCC,IAAAA,EAAE,EAAEvB,QAAQ,CAACwB,KAFuB;AAEhB;AACpBC,IAAAA,OAAO,EACLzB,QAAQ,CAACQ,IAAT,KAAkB,EAAlB,IAAwBR,QAAQ,CAACa,IAAT,KAAkB,OAA1C,GACK,MAAKb,QAAQ,CAACQ,IAAK,WADxB,GAEI,eAN8B;AAMb;AACvBkB,IAAAA,IAAI,EAAG,oBAAmB1B,QAAQ,CAAC2B,IAAK,cAAa3B,QAAQ,CAAC4B,MAAO,EAPjC;AAOoC;AACxEC,IAAAA,IAAI,EAAG;AACX;AACA;AACA;AACA,oBAAoB7B,QAAQ,CAACQ,IAAK,mBAC5BR,QAAQ,CAAC4B,MACV,KACC5B,QAAQ,CAAC2B,IAAT,GACI,QADJ,GAEI,aAAa3B,QAAQ,CAACiB,IAAT,CAAca,QAChC;AACL,qBAAqBhB,GAAI,yGACnBd,QAAQ,CAAC2B,IAAT,GAAgB,QAAhB,GAA2B,QAC5B;AACL;AACA;AACA;AACA;AACA,KA1BwC,CA0BjC;;AA1BiC,GAArB,CAAjB;AA6BA,SAAO,oBAAoBP,IAAI,CAACW,SAAhC,CAzD4B,CA0D5B;AAEA;AACA;AACA;AACD,C,CAED;;;eAEehC,I",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "sourcesContent": [
        "import nodemailer from \"nodemailer\";\nimport config from \"../config\";\nimport qs from \"qs\";\n\n// async..await is not allowed in global scope, must use a wrapper\nasync function send(sendInfo) {\n  // Generate test SMTP service account from ethereal.email\n  // Only needed if you don't have a real mail account for testing\n  // let testAccount = await nodemailer.createTestAccount()\n\n  // create reusable transporter object using the default SMTP transport\n  let transporter = nodemailer.createTransport({\n    host: \"smtp.qq.com\",\n    port: 587,\n    secure: false, // true for 465, false for other ports\n    auth: {\n      user: \"1210109544@qq.com\", // generated ethereal user\n      pass: \"izwxryxhejwxfecg\", // generated ethereal password\n    },\n  });\n\n  // let sendInfo = {\n  //   code: '1234',\n  //   expire: '2019-10-01',\n  //   email: 'imoocbrian@qq.com',\n  //   user: 'Brian',\n  // }\n  const baseUrl = config.baseUrl;\n  const route = sendInfo.type === \"email\" ? \"confirm\" : \"reset\";\n  let url = `${baseUrl}/#/${route}?` + qs.stringify(sendInfo.data);\n  console.log(\"url\", url);\n\n  // send mail with defined transport object\n  let info = await transporter.sendMail({\n    from: '\"认证邮件\" <1210109544@qq.com>', // sender address\n    to: sendInfo.email, // list of receivers\n    subject:\n      sendInfo.user !== \"\" && sendInfo.type !== \"email\"\n        ? `你好，${sendInfo.user}！《来一碗》注册码`\n        : \"《来一碗》确认修改邮件链接\", // Subject line\n    text: `您在《来一碗》中注册，您的邀请码是${sendInfo.code},邀请码的过期时间: ${sendInfo.expire}`, // plain text body\n    html: `\n        <div style=\"border: 1px solid #dcdcdc;color: #676767;width: 600px; margin: 0 auto; padding-bottom: 50px;position: relative;\">\n        <div style=\"height: 60px; background: #393d49; line-height: 60px; color: #58a36f; font-size: 18px;padding-left: 10px;\">Imooc社区——欢迎来到官方社区</div>\n        <div style=\"padding: 25px\">\n          <div>您好，${sendInfo.user}，重置链接有效时间30分钟，请在${\n      sendInfo.expire\n    }之前${\n      sendInfo.code\n        ? \"重置您的密码\"\n        : \"修改您的邮箱为：\" + sendInfo.data.username\n    }：</div>\n          <a href=\"${url}\" style=\"padding: 10px 20px; color: #fff; background: #009e94; display: inline-block;margin: 15px 0;\">${\n      sendInfo.code ? \"立即重置密码\" : \"确认设置邮箱\"\n    }</a>\n          <div style=\"padding: 5px; background: #f2f2f2;\">如果该邮件不是由你本人操作，请勿进行激活！否则你的邮箱将会被他人绑定。</div>\n        </div>\n        <div style=\"background: #fafafa; color: #b4b4b4;text-align: center; line-height: 45px; height: 45px; position: absolute; left: 0; bottom: 0;width: 100%;\">系统邮件，请勿直接回复</div>\n    </div>\n    `, // html body\n  });\n\n  return \"Message sent: %s\", info.messageId;\n  // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n\n  // Preview only available when sending through an Ethereal account\n  // console.log('Preview URL: %s', nodemailer.getTestMessageUrl(info))\n  // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n}\n\n// main().catch(console.error)\n\nexport default send;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640328137377
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/common/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/common/errorHandle.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/common/errorHandle.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/common/errorHandle.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/common/errorHandle.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
        "sourceFileName": "errorHandle.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _default = (ctx, next) => {\n  return next().catch(err => {\n    if (401 == err.status) {\n      ctx.status = 401;\n      ctx.body = {\n        code: 401,\n        msg: \"Protected resource, use Authorization header to get access\\n\"\n      };\n    } else {\n      ctx.status = err.status || 500;\n      ctx.body = Object.assign({\n        code: 500,\n        msg: err.message\n      }, process.env.NODE_ENV === \"dev\" ? {\n        stack: err.stack\n      } : {});\n    }\n  });\n};\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9ySGFuZGxlLmpzIl0sIm5hbWVzIjpbImN0eCIsIm5leHQiLCJjYXRjaCIsImVyciIsInN0YXR1cyIsImJvZHkiLCJjb2RlIiwibXNnIiwiT2JqZWN0IiwiYXNzaWduIiwibWVzc2FnZSIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsInN0YWNrIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O2VBQWUsQ0FBQ0EsR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDNUIsU0FBT0EsSUFBSSxHQUFHQyxLQUFQLENBQWNDLEdBQUQsSUFBUztBQUMzQixRQUFJLE9BQU9BLEdBQUcsQ0FBQ0MsTUFBZixFQUF1QjtBQUNyQkosTUFBQUEsR0FBRyxDQUFDSSxNQUFKLEdBQWEsR0FBYjtBQUNBSixNQUFBQSxHQUFHLENBQUNLLElBQUosR0FBVztBQUNUQyxRQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUQyxRQUFBQSxHQUFHLEVBQUU7QUFGSSxPQUFYO0FBSUQsS0FORCxNQU1PO0FBQ0xQLE1BQUFBLEdBQUcsQ0FBQ0ksTUFBSixHQUFhRCxHQUFHLENBQUNDLE1BQUosSUFBYyxHQUEzQjtBQUNBSixNQUFBQSxHQUFHLENBQUNLLElBQUosR0FBV0csTUFBTSxDQUFDQyxNQUFQLENBQ1Q7QUFDRUgsUUFBQUEsSUFBSSxFQUFFLEdBRFI7QUFFRUMsUUFBQUEsR0FBRyxFQUFFSixHQUFHLENBQUNPO0FBRlgsT0FEUyxFQUtUQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBWixLQUF5QixLQUF6QixHQUFpQztBQUFFQyxRQUFBQSxLQUFLLEVBQUVYLEdBQUcsQ0FBQ1c7QUFBYixPQUFqQyxHQUF3RCxFQUwvQyxDQUFYO0FBT0Q7QUFDRixHQWpCTSxDQUFQO0FBa0JELEMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9jb21tb24vIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgKGN0eCwgbmV4dCkgPT4ge1xuICByZXR1cm4gbmV4dCgpLmNhdGNoKChlcnIpID0+IHtcbiAgICBpZiAoNDAxID09IGVyci5zdGF0dXMpIHtcbiAgICAgIGN0eC5zdGF0dXMgPSA0MDE7XG4gICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtc2c6IFwiUHJvdGVjdGVkIHJlc291cmNlLCB1c2UgQXV0aG9yaXphdGlvbiBoZWFkZXIgdG8gZ2V0IGFjY2Vzc1xcblwiLFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LnN0YXR1cyA9IGVyci5zdGF0dXMgfHwgNTAwO1xuICAgICAgY3R4LmJvZHkgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICB7XG4gICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgIG1zZzogZXJyLm1lc3NhZ2UsXG4gICAgICAgIH0sXG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldlwiID8geyBzdGFjazogZXJyLnN0YWNrIH0gOiB7fVxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "errorHandle.js"
      ],
      "names": [
        "ctx",
        "next",
        "catch",
        "err",
        "status",
        "body",
        "code",
        "msg",
        "Object",
        "assign",
        "message",
        "process",
        "env",
        "NODE_ENV",
        "stack"
      ],
      "mappings": ";;;;;;;eAAe,CAACA,GAAD,EAAMC,IAAN,KAAe;AAC5B,SAAOA,IAAI,GAAGC,KAAP,CAAcC,GAAD,IAAS;AAC3B,QAAI,OAAOA,GAAG,CAACC,MAAf,EAAuB;AACrBJ,MAAAA,GAAG,CAACI,MAAJ,GAAa,GAAb;AACAJ,MAAAA,GAAG,CAACK,IAAJ,GAAW;AACTC,QAAAA,IAAI,EAAE,GADG;AAETC,QAAAA,GAAG,EAAE;AAFI,OAAX;AAID,KAND,MAMO;AACLP,MAAAA,GAAG,CAACI,MAAJ,GAAaD,GAAG,CAACC,MAAJ,IAAc,GAA3B;AACAJ,MAAAA,GAAG,CAACK,IAAJ,GAAWG,MAAM,CAACC,MAAP,CACT;AACEH,QAAAA,IAAI,EAAE,GADR;AAEEC,QAAAA,GAAG,EAAEJ,GAAG,CAACO;AAFX,OADS,EAKTC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,KAAzB,GAAiC;AAAEC,QAAAA,KAAK,EAAEX,GAAG,CAACW;AAAb,OAAjC,GAAwD,EAL/C,CAAX;AAOD;AACF,GAjBM,CAAP;AAkBD,C",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
      "sourcesContent": [
        "export default (ctx, next) => {\n  return next().catch((err) => {\n    if (401 == err.status) {\n      ctx.status = 401;\n      ctx.body = {\n        code: 401,\n        msg: \"Protected resource, use Authorization header to get access\\n\",\n      };\n    } else {\n      ctx.status = err.status || 500;\n      ctx.body = Object.assign(\n        {\n          code: 500,\n          msg: err.message,\n        },\n        process.env.NODE_ENV === \"dev\" ? { stack: err.stack } : {}\n      );\n    }\n  });\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638950117174
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/config/RedisConfig.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
        "sourceFileName": "RedisConfig.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setValue = exports.getValue = void 0;\n\nvar _redis = require(\"redis\");\n\nvar _index = _interopRequireDefault(require(\"./index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// (async () => {\nconst client = (0, _redis.createClient)({\n  url: `redis://:${_index.default.REDIS.password}@${_index.default.REDIS.host}:${_index.default.REDIS.port}`\n});\nclient.on(\"error\", err => console.log(\"Redis Client Error\", err));\nclient.connect();\n\nconst setValue = async (key, value, time) => {\n  if (time) return await client.set(key, value, {\n    EX: time\n  });else return await client.set(key, value);\n};\n\nexports.setValue = setValue;\n\nconst getValue = async key => {\n  return await client.get(key);\n};\n\nexports.getValue = getValue;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlZGlzQ29uZmlnLmpzIl0sIm5hbWVzIjpbImNsaWVudCIsInVybCIsImNvbmZpZyIsIlJFRElTIiwicGFzc3dvcmQiLCJob3N0IiwicG9ydCIsIm9uIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3QiLCJzZXRWYWx1ZSIsImtleSIsInZhbHVlIiwidGltZSIsInNldCIsIkVYIiwiZ2V0VmFsdWUiLCJnZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBO0FBQ0EsTUFBTUEsTUFBTSxHQUFHLHlCQUFhO0FBQzFCQyxFQUFBQSxHQUFHLEVBQUcsWUFBV0MsZUFBT0MsS0FBUCxDQUFhQyxRQUFTLElBQUdGLGVBQU9DLEtBQVAsQ0FBYUUsSUFBSyxJQUFHSCxlQUFPQyxLQUFQLENBQWFHLElBQUs7QUFEdkQsQ0FBYixDQUFmO0FBSUFOLE1BQU0sQ0FBQ08sRUFBUCxDQUFVLE9BQVYsRUFBb0JDLEdBQUQsSUFBU0MsT0FBTyxDQUFDQyxHQUFSLENBQVksb0JBQVosRUFBa0NGLEdBQWxDLENBQTVCO0FBRUFSLE1BQU0sQ0FBQ1csT0FBUDs7QUFFQSxNQUFNQyxRQUFRLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxLQUFaLEVBQW1CQyxJQUFuQixLQUE0QjtBQUMzQyxNQUFJQSxJQUFKLEVBQVUsT0FBTyxNQUFNZixNQUFNLENBQUNnQixHQUFQLENBQVdILEdBQVgsRUFBZ0JDLEtBQWhCLEVBQXVCO0FBQUVHLElBQUFBLEVBQUUsRUFBRUY7QUFBTixHQUF2QixDQUFiLENBQVYsS0FDSyxPQUFPLE1BQU1mLE1BQU0sQ0FBQ2dCLEdBQVAsQ0FBV0gsR0FBWCxFQUFnQkMsS0FBaEIsQ0FBYjtBQUNOLENBSEQ7Ozs7QUFLQSxNQUFNSSxRQUFRLEdBQUcsTUFBT0wsR0FBUCxJQUFlO0FBQzlCLFNBQU8sTUFBTWIsTUFBTSxDQUFDbUIsR0FBUCxDQUFXTixHQUFYLENBQWI7QUFDRCxDQUZEIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvY29uZmlnLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gXCJyZWRpc1wiO1xuaW1wb3J0IGNvbmZpZyBmcm9tIFwiLi9pbmRleFwiO1xuXG4vLyAoYXN5bmMgKCkgPT4ge1xuY29uc3QgY2xpZW50ID0gY3JlYXRlQ2xpZW50KHtcbiAgdXJsOiBgcmVkaXM6Ly86JHtjb25maWcuUkVESVMucGFzc3dvcmR9QCR7Y29uZmlnLlJFRElTLmhvc3R9OiR7Y29uZmlnLlJFRElTLnBvcnR9YCxcbn0pO1xuXG5jbGllbnQub24oXCJlcnJvclwiLCAoZXJyKSA9PiBjb25zb2xlLmxvZyhcIlJlZGlzIENsaWVudCBFcnJvclwiLCBlcnIpKTtcblxuY2xpZW50LmNvbm5lY3QoKTtcblxuY29uc3Qgc2V0VmFsdWUgPSBhc3luYyAoa2V5LCB2YWx1ZSwgdGltZSkgPT4ge1xuICBpZiAodGltZSkgcmV0dXJuIGF3YWl0IGNsaWVudC5zZXQoa2V5LCB2YWx1ZSwgeyBFWDogdGltZSB9KTtcbiAgZWxzZSByZXR1cm4gYXdhaXQgY2xpZW50LnNldChrZXksIHZhbHVlKTtcbn07XG5cbmNvbnN0IGdldFZhbHVlID0gYXN5bmMgKGtleSkgPT4ge1xuICByZXR1cm4gYXdhaXQgY2xpZW50LmdldChrZXkpO1xufTtcblxuZXhwb3J0IHsgc2V0VmFsdWUsIGdldFZhbHVlIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "RedisConfig.js"
      ],
      "names": [
        "client",
        "url",
        "config",
        "REDIS",
        "password",
        "host",
        "port",
        "on",
        "err",
        "console",
        "log",
        "connect",
        "setValue",
        "key",
        "value",
        "time",
        "set",
        "EX",
        "getValue",
        "get"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA;AACA,MAAMA,MAAM,GAAG,yBAAa;AAC1BC,EAAAA,GAAG,EAAG,YAAWC,eAAOC,KAAP,CAAaC,QAAS,IAAGF,eAAOC,KAAP,CAAaE,IAAK,IAAGH,eAAOC,KAAP,CAAaG,IAAK;AADvD,CAAb,CAAf;AAIAN,MAAM,CAACO,EAAP,CAAU,OAAV,EAAoBC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,GAAlC,CAA5B;AAEAR,MAAM,CAACW,OAAP;;AAEA,MAAMC,QAAQ,GAAG,OAAOC,GAAP,EAAYC,KAAZ,EAAmBC,IAAnB,KAA4B;AAC3C,MAAIA,IAAJ,EAAU,OAAO,MAAMf,MAAM,CAACgB,GAAP,CAAWH,GAAX,EAAgBC,KAAhB,EAAuB;AAAEG,IAAAA,EAAE,EAAEF;AAAN,GAAvB,CAAb,CAAV,KACK,OAAO,MAAMf,MAAM,CAACgB,GAAP,CAAWH,GAAX,EAAgBC,KAAhB,CAAb;AACN,CAHD;;;;AAKA,MAAMI,QAAQ,GAAG,MAAOL,GAAP,IAAe;AAC9B,SAAO,MAAMb,MAAM,CAACmB,GAAP,CAAWN,GAAX,CAAb;AACD,CAFD",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "sourcesContent": [
        "import { createClient } from \"redis\";\nimport config from \"./index\";\n\n// (async () => {\nconst client = createClient({\n  url: `redis://:${config.REDIS.password}@${config.REDIS.host}:${config.REDIS.port}`,\n});\n\nclient.on(\"error\", (err) => console.log(\"Redis Client Error\", err));\n\nclient.connect();\n\nconst setValue = async (key, value, time) => {\n  if (time) return await client.set(key, value, { EX: time });\n  else return await client.set(key, value);\n};\n\nconst getValue = async (key) => {\n  return await client.get(key);\n};\n\nexport { setValue, getValue };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638870093614
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/config/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/config/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/config/index.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/config/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst DB_URL = \"mongodb://root:root@47.96.40.132:27018/admin\";\nconst REDIS = {\n  host: \"47.96.40.132\",\n  port: 15002,\n  password: \"123456\"\n};\nconst JWT_SECRET = \"hahaha!\";\nconst baseUrl = process.env.NODE_ENV === \"production\" ? \"xxx\" : \"http://localhost:8080\";\nconst uploadPath = process.env.NODE_ENV === \"production\" ? \"app/public\" : _path.default.join(_path.default.resolve(__dirname), \"../../public\");\nvar _default = {\n  DB_URL,\n  REDIS,\n  JWT_SECRET,\n  baseUrl,\n  uploadPath\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkRCX1VSTCIsIlJFRElTIiwiaG9zdCIsInBvcnQiLCJwYXNzd29yZCIsIkpXVF9TRUNSRVQiLCJiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwidXBsb2FkUGF0aCIsInBhdGgiLCJqb2luIiwicmVzb2x2ZSIsIl9fZGlybmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ0EsTUFBTUEsTUFBTSxHQUFHLDhDQUFmO0FBRUEsTUFBTUMsS0FBSyxHQUFHO0FBQ1pDLEVBQUFBLElBQUksRUFBRSxjQURNO0FBRVpDLEVBQUFBLElBQUksRUFBRSxLQUZNO0FBR1pDLEVBQUFBLFFBQVEsRUFBRTtBQUhFLENBQWQ7QUFNQSxNQUFNQyxVQUFVLEdBQUcsU0FBbkI7QUFFQSxNQUFNQyxPQUFPLEdBQ1hDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxRQUFaLEtBQXlCLFlBQXpCLEdBQXdDLEtBQXhDLEdBQWdELHVCQURsRDtBQUdBLE1BQU1DLFVBQVUsR0FDZEgsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQVosS0FBeUIsWUFBekIsR0FDSSxZQURKLEdBRUlFLGNBQUtDLElBQUwsQ0FBVUQsY0FBS0UsT0FBTCxDQUFhQyxTQUFiLENBQVYsRUFBbUMsY0FBbkMsQ0FITjtlQUtlO0FBQ2JkLEVBQUFBLE1BRGE7QUFFYkMsRUFBQUEsS0FGYTtBQUdiSSxFQUFBQSxVQUhhO0FBSWJDLEVBQUFBLE9BSmE7QUFLYkksRUFBQUE7QUFMYSxDIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvY29uZmlnLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5jb25zdCBEQl9VUkwgPSBcIm1vbmdvZGI6Ly9yb290OnJvb3RANDcuOTYuNDAuMTMyOjI3MDE4L2FkbWluXCI7XG5cbmNvbnN0IFJFRElTID0ge1xuICBob3N0OiBcIjQ3Ljk2LjQwLjEzMlwiLFxuICBwb3J0OiAxNTAwMixcbiAgcGFzc3dvcmQ6IFwiMTIzNDU2XCIsXG59O1xuXG5jb25zdCBKV1RfU0VDUkVUID0gXCJoYWhhaGEhXCI7XG5cbmNvbnN0IGJhc2VVcmwgPVxuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBcInh4eFwiIDogXCJodHRwOi8vbG9jYWxob3N0OjgwODBcIjtcblxuY29uc3QgdXBsb2FkUGF0aCA9XG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIlxuICAgID8gXCJhcHAvcHVibGljXCJcbiAgICA6IHBhdGguam9pbihwYXRoLnJlc29sdmUoX19kaXJuYW1lKSwgXCIuLi8uLi9wdWJsaWNcIik7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgREJfVVJMLFxuICBSRURJUyxcbiAgSldUX1NFQ1JFVCxcbiAgYmFzZVVybCxcbiAgdXBsb2FkUGF0aCxcbn07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "DB_URL",
        "REDIS",
        "host",
        "port",
        "password",
        "JWT_SECRET",
        "baseUrl",
        "process",
        "env",
        "NODE_ENV",
        "uploadPath",
        "path",
        "join",
        "resolve",
        "__dirname"
      ],
      "mappings": ";;;;;;;AAAA;;;;AACA,MAAMA,MAAM,GAAG,8CAAf;AAEA,MAAMC,KAAK,GAAG;AACZC,EAAAA,IAAI,EAAE,cADM;AAEZC,EAAAA,IAAI,EAAE,KAFM;AAGZC,EAAAA,QAAQ,EAAE;AAHE,CAAd;AAMA,MAAMC,UAAU,GAAG,SAAnB;AAEA,MAAMC,OAAO,GACXC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,KAAxC,GAAgD,uBADlD;AAGA,MAAMC,UAAU,GACdH,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACI,YADJ,GAEIE,cAAKC,IAAL,CAAUD,cAAKE,OAAL,CAAaC,SAAb,CAAV,EAAmC,cAAnC,CAHN;eAKe;AACbd,EAAAA,MADa;AAEbC,EAAAA,KAFa;AAGbI,EAAAA,UAHa;AAIbC,EAAAA,OAJa;AAKbI,EAAAA;AALa,C",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "sourcesContent": [
        "import path from \"path\";\nconst DB_URL = \"mongodb://root:root@47.96.40.132:27018/admin\";\n\nconst REDIS = {\n  host: \"47.96.40.132\",\n  port: 15002,\n  password: \"123456\",\n};\n\nconst JWT_SECRET = \"hahaha!\";\n\nconst baseUrl =\n  process.env.NODE_ENV === \"production\" ? \"xxx\" : \"http://localhost:8080\";\n\nconst uploadPath =\n  process.env.NODE_ENV === \"production\"\n    ? \"app/public\"\n    : path.join(path.resolve(__dirname), \"../../public\");\n\nexport default {\n  DB_URL,\n  REDIS,\n  JWT_SECRET,\n  baseUrl,\n  uploadPath,\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640331850279
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/common/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/common/utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/common/utils.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/common/utils.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/common/utils.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
        "sourceFileName": "utils.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getJWTPayload = exports.dirExists = exports.checkCode = void 0;\n\nvar _RedisConfig = require(\"../config/RedisConfig\");\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst getJWTPayload = token => {\n  return _jsonwebtoken.default.verify(token.split(\" \")[1], _config.default.JWT_SECRET);\n};\n\nexports.getJWTPayload = getJWTPayload;\n\nconst checkCode = async (key, value) => {\n  const redisData = await (0, _RedisConfig.getValue)(key);\n\n  if (typeof redisData === \"string\" && redisData.toLowerCase() === value.toLowerCase()) {\n    return true;\n  } else {\n    return false;\n  }\n}; // 判断该目录是否存在\n\n\nexports.checkCode = checkCode;\n\nconst getStats = path => {\n  return new Promise(resolve => {\n    _fs.default.stat(path, (err, stats) => err ? resolve(false) : resolve(stats));\n  });\n}; // 新建文件夹\n\n\nconst mkdir = dir => {\n  return new Promise(resolve => {\n    _fs.default.mkdir(dir, err => err ? resolve(false) : resolve(true));\n  });\n}; // 循环遍历，如果目录不存在，需要该目录\n\n\nconst dirExists = async dir => {\n  const isExists = await getStats(dir); // 如果该路径存在且不是文件，返回true\n\n  if (isExists && isExists.isDirectory()) {\n    return true;\n  } else if (isExists) {\n    // 路径存在，但是是文件，返回 false\n    return false;\n  } // 如果该路径不存在，需要创建\n\n\n  const tempDir = _path.default.parse(dir).dir; // 循环遍历， 递归判断\n\n\n  const status = await dirExists(tempDir);\n\n  if (status) {\n    const result = await mkdir(dir);\n    return result;\n  } else {\n    return false;\n  }\n};\n\nexports.dirExists = dirExists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sIm5hbWVzIjpbImdldEpXVFBheWxvYWQiLCJ0b2tlbiIsImp3dCIsInZlcmlmeSIsInNwbGl0IiwiY29uZmlnIiwiSldUX1NFQ1JFVCIsImNoZWNrQ29kZSIsImtleSIsInZhbHVlIiwicmVkaXNEYXRhIiwidG9Mb3dlckNhc2UiLCJnZXRTdGF0cyIsInBhdGgiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZzIiwic3RhdCIsImVyciIsInN0YXRzIiwibWtkaXIiLCJkaXIiLCJkaXJFeGlzdHMiLCJpc0V4aXN0cyIsImlzRGlyZWN0b3J5IiwidGVtcERpciIsInBhcnNlIiwic3RhdHVzIiwicmVzdWx0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxhQUFhLEdBQUlDLEtBQUQsSUFBVztBQUMvQixTQUFPQyxzQkFBSUMsTUFBSixDQUFXRixLQUFLLENBQUNHLEtBQU4sQ0FBWSxHQUFaLEVBQWlCLENBQWpCLENBQVgsRUFBZ0NDLGdCQUFPQyxVQUF2QyxDQUFQO0FBQ0QsQ0FGRDs7OztBQUlBLE1BQU1DLFNBQVMsR0FBRyxPQUFPQyxHQUFQLEVBQVlDLEtBQVosS0FBc0I7QUFDdEMsUUFBTUMsU0FBUyxHQUFHLE1BQU0sMkJBQVNGLEdBQVQsQ0FBeEI7O0FBQ0EsTUFDRSxPQUFPRSxTQUFQLEtBQXFCLFFBQXJCLElBQ0FBLFNBQVMsQ0FBQ0MsV0FBVixPQUE0QkYsS0FBSyxDQUFDRSxXQUFOLEVBRjlCLEVBR0U7QUFDQSxXQUFPLElBQVA7QUFDRCxHQUxELE1BS087QUFDTCxXQUFPLEtBQVA7QUFDRDtBQUNGLENBVkQsQyxDQVlBOzs7OztBQUNBLE1BQU1DLFFBQVEsR0FBSUMsSUFBRCxJQUFVO0FBQ3pCLFNBQU8sSUFBSUMsT0FBSixDQUFhQyxPQUFELElBQWE7QUFDOUJDLGdCQUFHQyxJQUFILENBQVFKLElBQVIsRUFBYyxDQUFDSyxHQUFELEVBQU1DLEtBQU4sS0FBaUJELEdBQUcsR0FBR0gsT0FBTyxDQUFDLEtBQUQsQ0FBVixHQUFvQkEsT0FBTyxDQUFDSSxLQUFELENBQTdEO0FBQ0QsR0FGTSxDQUFQO0FBR0QsQ0FKRCxDLENBTUE7OztBQUNBLE1BQU1DLEtBQUssR0FBSUMsR0FBRCxJQUFTO0FBQ3JCLFNBQU8sSUFBSVAsT0FBSixDQUFhQyxPQUFELElBQWE7QUFDOUJDLGdCQUFHSSxLQUFILENBQVNDLEdBQVQsRUFBZUgsR0FBRCxJQUFVQSxHQUFHLEdBQUdILE9BQU8sQ0FBQyxLQUFELENBQVYsR0FBb0JBLE9BQU8sQ0FBQyxJQUFELENBQXREO0FBQ0QsR0FGTSxDQUFQO0FBR0QsQ0FKRCxDLENBTUE7OztBQUNBLE1BQU1PLFNBQVMsR0FBRyxNQUFPRCxHQUFQLElBQWU7QUFDL0IsUUFBTUUsUUFBUSxHQUFHLE1BQU1YLFFBQVEsQ0FBQ1MsR0FBRCxDQUEvQixDQUQrQixDQUUvQjs7QUFDQSxNQUFJRSxRQUFRLElBQUlBLFFBQVEsQ0FBQ0MsV0FBVCxFQUFoQixFQUF3QztBQUN0QyxXQUFPLElBQVA7QUFDRCxHQUZELE1BRU8sSUFBSUQsUUFBSixFQUFjO0FBQ25CO0FBQ0EsV0FBTyxLQUFQO0FBQ0QsR0FSOEIsQ0FTL0I7OztBQUNBLFFBQU1FLE9BQU8sR0FBR1osY0FBS2EsS0FBTCxDQUFXTCxHQUFYLEVBQWdCQSxHQUFoQyxDQVYrQixDQVcvQjs7O0FBQ0EsUUFBTU0sTUFBTSxHQUFHLE1BQU1MLFNBQVMsQ0FBQ0csT0FBRCxDQUE5Qjs7QUFFQSxNQUFJRSxNQUFKLEVBQVk7QUFDVixVQUFNQyxNQUFNLEdBQUcsTUFBTVIsS0FBSyxDQUFDQyxHQUFELENBQTFCO0FBQ0EsV0FBT08sTUFBUDtBQUNELEdBSEQsTUFHTztBQUNMLFdBQU8sS0FBUDtBQUNEO0FBQ0YsQ0FwQkQiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9jb21tb24vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0VmFsdWUgfSBmcm9tIFwiLi4vY29uZmlnL1JlZGlzQ29uZmlnXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWdcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuY29uc3QgZ2V0SldUUGF5bG9hZCA9ICh0b2tlbikgPT4ge1xuICByZXR1cm4gand0LnZlcmlmeSh0b2tlbi5zcGxpdChcIiBcIilbMV0sIGNvbmZpZy5KV1RfU0VDUkVUKTtcbn07XG5cbmNvbnN0IGNoZWNrQ29kZSA9IGFzeW5jIChrZXksIHZhbHVlKSA9PiB7XG4gIGNvbnN0IHJlZGlzRGF0YSA9IGF3YWl0IGdldFZhbHVlKGtleSk7XG4gIGlmIChcbiAgICB0eXBlb2YgcmVkaXNEYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgcmVkaXNEYXRhLnRvTG93ZXJDYXNlKCkgPT09IHZhbHVlLnRvTG93ZXJDYXNlKClcbiAgKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG4vLyDliKTmlq3or6Xnm67lvZXmmK/lkKblrZjlnKhcbmNvbnN0IGdldFN0YXRzID0gKHBhdGgpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgZnMuc3RhdChwYXRoLCAoZXJyLCBzdGF0cykgPT4gKGVyciA/IHJlc29sdmUoZmFsc2UpIDogcmVzb2x2ZShzdGF0cykpKTtcbiAgfSk7XG59O1xuXG4vLyDmlrDlu7rmlofku7blpLlcbmNvbnN0IG1rZGlyID0gKGRpcikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBmcy5ta2RpcihkaXIsIChlcnIpID0+IChlcnIgPyByZXNvbHZlKGZhbHNlKSA6IHJlc29sdmUodHJ1ZSkpKTtcbiAgfSk7XG59O1xuXG4vLyDlvqrnjq/pgY3ljobvvIzlpoLmnpznm67lvZXkuI3lrZjlnKjvvIzpnIDopoHor6Xnm67lvZVcbmNvbnN0IGRpckV4aXN0cyA9IGFzeW5jIChkaXIpID0+IHtcbiAgY29uc3QgaXNFeGlzdHMgPSBhd2FpdCBnZXRTdGF0cyhkaXIpO1xuICAvLyDlpoLmnpzor6Xot6/lvoTlrZjlnKjkuJTkuI3mmK/mlofku7bvvIzov5Tlm550cnVlXG4gIGlmIChpc0V4aXN0cyAmJiBpc0V4aXN0cy5pc0RpcmVjdG9yeSgpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoaXNFeGlzdHMpIHtcbiAgICAvLyDot6/lvoTlrZjlnKjvvIzkvYbmmK/mmK/mlofku7bvvIzov5Tlm54gZmFsc2VcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8g5aaC5p6c6K+l6Lev5b6E5LiN5a2Y5Zyo77yM6ZyA6KaB5Yib5bu6XG4gIGNvbnN0IHRlbXBEaXIgPSBwYXRoLnBhcnNlKGRpcikuZGlyO1xuICAvLyDlvqrnjq/pgY3ljobvvIwg6YCS5b2S5Yik5patXG4gIGNvbnN0IHN0YXR1cyA9IGF3YWl0IGRpckV4aXN0cyh0ZW1wRGlyKTtcblxuICBpZiAoc3RhdHVzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWtkaXIoZGlyKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuZXhwb3J0IHsgZ2V0SldUUGF5bG9hZCwgY2hlY2tDb2RlLCBkaXJFeGlzdHMgfTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "utils.js"
      ],
      "names": [
        "getJWTPayload",
        "token",
        "jwt",
        "verify",
        "split",
        "config",
        "JWT_SECRET",
        "checkCode",
        "key",
        "value",
        "redisData",
        "toLowerCase",
        "getStats",
        "path",
        "Promise",
        "resolve",
        "fs",
        "stat",
        "err",
        "stats",
        "mkdir",
        "dir",
        "dirExists",
        "isExists",
        "isDirectory",
        "tempDir",
        "parse",
        "status",
        "result"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,aAAa,GAAIC,KAAD,IAAW;AAC/B,SAAOC,sBAAIC,MAAJ,CAAWF,KAAK,CAACG,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAX,EAAgCC,gBAAOC,UAAvC,CAAP;AACD,CAFD;;;;AAIA,MAAMC,SAAS,GAAG,OAAOC,GAAP,EAAYC,KAAZ,KAAsB;AACtC,QAAMC,SAAS,GAAG,MAAM,2BAASF,GAAT,CAAxB;;AACA,MACE,OAAOE,SAAP,KAAqB,QAArB,IACAA,SAAS,CAACC,WAAV,OAA4BF,KAAK,CAACE,WAAN,EAF9B,EAGE;AACA,WAAO,IAAP;AACD,GALD,MAKO;AACL,WAAO,KAAP;AACD;AACF,CAVD,C,CAYA;;;;;AACA,MAAMC,QAAQ,GAAIC,IAAD,IAAU;AACzB,SAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC9BC,gBAAGC,IAAH,CAAQJ,IAAR,EAAc,CAACK,GAAD,EAAMC,KAAN,KAAiBD,GAAG,GAAGH,OAAO,CAAC,KAAD,CAAV,GAAoBA,OAAO,CAACI,KAAD,CAA7D;AACD,GAFM,CAAP;AAGD,CAJD,C,CAMA;;;AACA,MAAMC,KAAK,GAAIC,GAAD,IAAS;AACrB,SAAO,IAAIP,OAAJ,CAAaC,OAAD,IAAa;AAC9BC,gBAAGI,KAAH,CAASC,GAAT,EAAeH,GAAD,IAAUA,GAAG,GAAGH,OAAO,CAAC,KAAD,CAAV,GAAoBA,OAAO,CAAC,IAAD,CAAtD;AACD,GAFM,CAAP;AAGD,CAJD,C,CAMA;;;AACA,MAAMO,SAAS,GAAG,MAAOD,GAAP,IAAe;AAC/B,QAAME,QAAQ,GAAG,MAAMX,QAAQ,CAACS,GAAD,CAA/B,CAD+B,CAE/B;;AACA,MAAIE,QAAQ,IAAIA,QAAQ,CAACC,WAAT,EAAhB,EAAwC;AACtC,WAAO,IAAP;AACD,GAFD,MAEO,IAAID,QAAJ,EAAc;AACnB;AACA,WAAO,KAAP;AACD,GAR8B,CAS/B;;;AACA,QAAME,OAAO,GAAGZ,cAAKa,KAAL,CAAWL,GAAX,EAAgBA,GAAhC,CAV+B,CAW/B;;;AACA,QAAMM,MAAM,GAAG,MAAML,SAAS,CAACG,OAAD,CAA9B;;AAEA,MAAIE,MAAJ,EAAY;AACV,UAAMC,MAAM,GAAG,MAAMR,KAAK,CAACC,GAAD,CAA1B;AACA,WAAOO,MAAP;AACD,GAHD,MAGO;AACL,WAAO,KAAP;AACD;AACF,CApBD",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
      "sourcesContent": [
        "import { getValue } from \"../config/RedisConfig\";\nimport config from \"../config\";\nimport jwt from \"jsonwebtoken\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nconst getJWTPayload = (token) => {\n  return jwt.verify(token.split(\" \")[1], config.JWT_SECRET);\n};\n\nconst checkCode = async (key, value) => {\n  const redisData = await getValue(key);\n  if (\n    typeof redisData === \"string\" &&\n    redisData.toLowerCase() === value.toLowerCase()\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\n// 判断该目录是否存在\nconst getStats = (path) => {\n  return new Promise((resolve) => {\n    fs.stat(path, (err, stats) => (err ? resolve(false) : resolve(stats)));\n  });\n};\n\n// 新建文件夹\nconst mkdir = (dir) => {\n  return new Promise((resolve) => {\n    fs.mkdir(dir, (err) => (err ? resolve(false) : resolve(true)));\n  });\n};\n\n// 循环遍历，如果目录不存在，需要该目录\nconst dirExists = async (dir) => {\n  const isExists = await getStats(dir);\n  // 如果该路径存在且不是文件，返回true\n  if (isExists && isExists.isDirectory()) {\n    return true;\n  } else if (isExists) {\n    // 路径存在，但是是文件，返回 false\n    return false;\n  }\n  // 如果该路径不存在，需要创建\n  const tempDir = path.parse(dir).dir;\n  // 循环遍历， 递归判断\n  const status = await dirExists(tempDir);\n\n  if (status) {\n    const result = await mkdir(dir);\n    return result;\n  } else {\n    return false;\n  }\n};\n\nexport { getJWTPayload, checkCode, dirExists };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640343361957
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/model/User.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/model/User.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/model/User.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/model/User.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
        "sourceFileName": "User.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelper = _interopRequireDefault(require(\"../config/DBHelper\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelper.default.Schema;\nconst UserSchema = new Schema({\n  username: {\n    type: String\n  },\n  name: {\n    type: String\n  },\n  password: {\n    type: String\n  },\n  created: {\n    type: Date\n  },\n  update: {\n    type: Date\n  },\n  gender: {\n    type: String,\n    default: \"\"\n  },\n  fav: {\n    type: Number,\n    default: 100\n  },\n  roles: {\n    type: Array,\n    default: [\"user\"]\n  },\n  pic: {\n    type: String,\n    default: \"/img/default.png\"\n  },\n  mobile: {\n    type: String,\n    match: /^1[3-9](\\d{9})$/,\n    default: \"\"\n  },\n  status: {\n    type: String,\n    default: \"0\"\n  },\n  location: {\n    type: String,\n    default: \"\"\n  },\n  regmark: {\n    type: String,\n    default: \"\"\n  },\n  isVip: {\n    type: String,\n    default: \"0\"\n  },\n  count: {\n    type: Number,\n    default: 0\n  }\n});\nUserSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\nUserSchema.pre(\"update\", function (next) {\n  this.updated = new Date();\n  next();\n});\nUserSchema.statics = {\n  findByID: function (id) {\n    return this.findOne({\n      _id: id\n    }, {\n      password: 0,\n      username: 0,\n      mobile: 0\n    });\n  },\n  getList: function (options, sort, page, limit) {\n    // 1. datepicker -> item: string, search -> array  startitme,endtime\n    // 2. radio -> key-value $in\n    // 3. select -> key-array $in\n    let query = {};\n\n    if (typeof options.search !== \"undefined\") {\n      if (typeof options.search === \"string\" && options.search.trim() !== \"\") {\n        if ([\"name\", \"username\"].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = {\n            $regex: new RegExp(options.search)\n          }; // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n\n      if (options.item === \"roles\") {\n        query = {\n          roles: {\n            $in: options.search\n          }\n        };\n      }\n\n      if (options.item === \"created\") {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = {\n          created: {\n            $gte: new Date(start),\n            $lt: new Date(end)\n          }\n        };\n      }\n    }\n\n    return this.find(query, {\n      password: 0,\n      mobile: 0\n    }).sort({\n      [sort]: -1\n    }).skip(page * limit).limit(limit);\n  },\n  countList: function (options) {\n    let query = {};\n\n    if (typeof options.search !== \"undefined\") {\n      if (typeof options.search === \"string\" && options.search.trim() !== \"\") {\n        if ([\"name\", \"username\"].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = {\n            $regex: new RegExp(options.search)\n          }; // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n\n      if (options.item === \"roles\") {\n        query = {\n          roles: {\n            $in: options.search\n          }\n        };\n      }\n\n      if (options.item === \"created\") {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = {\n          created: {\n            $gte: new Date(start),\n            $lt: new Date(end)\n          }\n        };\n      }\n    }\n\n    return this.find(query).countDocuments();\n  } // getTotalSign: function (page, limit) {\n  //   return this.find({})\n  //     .skip(page * limit)\n  //     .limit(limit)\n  //     .sort({ count: -1 })\n  // },\n  // getTotalSignCount: function (page, limit) {\n  //   return this.find({}).countDocuments()\n  // }\n\n};\n\nconst UserModel = _DBHelper.default.model(\"users\", UserSchema);\n\nvar _default = UserModel;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVzZXIuanMiXSwibmFtZXMiOlsiU2NoZW1hIiwibW9uZ29vc2UiLCJVc2VyU2NoZW1hIiwidXNlcm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwibmFtZSIsInBhc3N3b3JkIiwiY3JlYXRlZCIsIkRhdGUiLCJ1cGRhdGUiLCJnZW5kZXIiLCJkZWZhdWx0IiwiZmF2IiwiTnVtYmVyIiwicm9sZXMiLCJBcnJheSIsInBpYyIsIm1vYmlsZSIsIm1hdGNoIiwic3RhdHVzIiwibG9jYXRpb24iLCJyZWdtYXJrIiwiaXNWaXAiLCJjb3VudCIsInByZSIsIm5leHQiLCJ1cGRhdGVkIiwic3RhdGljcyIsImZpbmRCeUlEIiwiaWQiLCJmaW5kT25lIiwiX2lkIiwiZ2V0TGlzdCIsIm9wdGlvbnMiLCJzb3J0IiwicGFnZSIsImxpbWl0IiwicXVlcnkiLCJzZWFyY2giLCJ0cmltIiwiaW5jbHVkZXMiLCJpdGVtIiwiJHJlZ2V4IiwiUmVnRXhwIiwiJGluIiwic3RhcnQiLCJlbmQiLCIkZ3RlIiwiJGx0IiwiZmluZCIsInNraXAiLCJjb3VudExpc3QiLCJjb3VudERvY3VtZW50cyIsIlVzZXJNb2RlbCIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGtCQUFTRCxNQUF4QjtBQUNBLE1BQU1FLFVBQVUsR0FBRyxJQUFJRixNQUFKLENBQVc7QUFDNUJHLEVBQUFBLFFBQVEsRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FEa0I7QUFFNUJDLEVBQUFBLElBQUksRUFBRTtBQUFFRixJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FGc0I7QUFHNUJFLEVBQUFBLFFBQVEsRUFBRTtBQUFFSCxJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FIa0I7QUFJNUJHLEVBQUFBLE9BQU8sRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVLO0FBQVIsR0FKbUI7QUFLNUJDLEVBQUFBLE1BQU0sRUFBRTtBQUFFTixJQUFBQSxJQUFJLEVB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SixDQUFTcUMsS0FBVCxDQUFSO0FBQXlCRyxZQUFBQSxHQUFHLEVBQUUsSUFBSXhDLElBQUosQ0FBU3NDLEdBQVQ7QUFBOUI7QUFBWCxTQUFSO0FBQ0Q7QUFDRjs7QUFDRCxXQUFPLEtBQUtHLElBQUwsQ0FBVVosS0FBVixFQUFpQmUsY0FBakIsRUFBUDtBQUNELEdBaEVrQixDQWlFbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQXpFbUIsQ0FBckI7O0FBNEVBLE1BQU1DLFNBQVMsR0FBR3JELGtCQUFTc0QsS0FBVCxDQUFlLE9BQWYsRUFBd0JyRCxVQUF4QixDQUFsQjs7ZUFFZW9ELFMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9tb2RlbC8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIi4uL2NvbmZpZy9EQkhlbHBlclwiO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHVzZXJuYW1lOiB7IHR5cGU6IFN0cmluZyB9LFxuICBuYW1lOiB7IHR5cGU6IFN0cmluZyB9LFxuICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcgfSxcbiAgY3JlYXRlZDogeyB0eXBlOiBEYXRlIH0sXG4gIHVwZGF0ZTogeyB0eXBlOiBEYXRlIH0sXG4gIGdlbmRlcjogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgZmF2OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMTAwIH0sXG4gIHJvbGVzOiB7IHR5cGU6IEFycmF5LCBkZWZhdWx0OiBbXCJ1c2VyXCJdIH0sXG4gIHBpYzogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiL2ltZy9kZWZhdWx0LnBuZ1wiIH0sXG4gIG1vYmlsZTogeyB0eXBlOiBTdHJpbmcsIG1hdGNoOiAvXjFbMy05XShcXGR7OX0pJC8sIGRlZmF1bHQ6IFwiXCIgfSxcbiAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCIwXCIgfSxcbiAgbG9jYXRpb246IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIlwiIH0sXG4gIHJlZ21hcms6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIlwiIH0sXG4gIGlzVmlwOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCIwXCIgfSxcbiAgY291bnQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG59KTtcblxuVXNlclNjaGVtYS5wcmUoXCJzYXZlXCIsIGZ1bmN0aW9uIChuZXh0KSB7XG4gIHRoaXMuY3JlYXRlZCA9IG5ldyBEYXRlKCk7XG4gIG5leHQoKTtcbn0pO1xuXG5Vc2VyU2NoZW1hLnByZShcInVwZGF0ZVwiLCBmdW5jdGlvbiAobmV4dCkge1xuICB0aGlzLnVwZGF0ZWQgPSBuZXcgRGF0ZSgpO1xuICBuZXh0KCk7XG59KTtcblxuVXNlclNjaGVtYS5zdGF0aWNzID0ge1xuICBmaW5kQnlJRDogZnVuY3Rpb24gKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZE9uZShcbiAgICAgIHsgX2lkOiBpZCB9LFxuICAgICAge1xuICAgICAgICBwYXNzd29yZDogMCxcbiAgICAgICAgdXNlcm5hbWU6IDAsXG4gICAgICAgIG1vYmlsZTogMCxcbiAgICAgIH1cbiAgICApO1xuICB9LFxuICBnZXRMaXN0OiBmdW5jdGlvbiAob3B0aW9ucywgc29ydCwgcGFnZSwgbGltaXQpIHtcbiAgICAvLyAxLiBkYXRlcGlja2VyIC0+IGl0ZW06IHN0cmluZywgc2VhcmNoIC0+IGFycmF5ICBzdGFydGl0bWUsZW5kdGltZVxuICAgIC8vIDIuIHJhZGlvIC0+IGtleS12YWx1ZSAkaW5cbiAgICAvLyAzLiBzZWxlY3QgLT4ga2V5LWFycmF5ICRpblxuICAgIGxldCBxdWVyeSA9IHt9O1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zZWFyY2ggIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zZWFyY2ggPT09IFwic3RyaW5nXCIgJiYgb3B0aW9ucy5zZWFyY2gudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgIGlmIChbXCJuYW1lXCIsIFwidXNlcm5hbWVcIl0uaW5jbHVkZXMob3B0aW9ucy5pdGVtKSkge1xuICAgICAgICAgIC8vIOaooeeziuWMuemFjVxuICAgICAgICAgIHF1ZXJ5W29wdGlvbnMuaXRlbV0gPSB7ICRyZWdleDogbmV3IFJlZ0V4cChvcHRpb25zLnNlYXJjaCkgfTtcbiAgICAgICAgICAvLyA944CLIHsgbmFtZTogeyAkcmVnZXg6IC9hZG1pbi8gfSB9ID0+IG15c3FsIGxpa2UgJWFkbWluJVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJhZGlvXG4gICAgICAgICAgcXVlcnlbb3B0aW9ucy5pdGVtXSA9IG9wdGlvbnMuc2VhcmNoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5pdGVtID09PSBcInJvbGVzXCIpIHtcbiAgICAgICAgcXVlcnkgPSB7IHJvbGVzOiB7ICRpbjogb3B0aW9ucy5zZWFyY2ggfSB9O1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuaXRlbSA9PT0gXCJjcmVhdGVkXCIpIHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBvcHRpb25zLnNlYXJjaFswXTtcbiAgICAgICAgY29uc3QgZW5kID0gb3B0aW9ucy5zZWFyY2hbMV07XG4gICAgICAgIHF1ZXJ5ID0geyBjcmVhdGVkOiB7ICRndGU6IG5ldyBEYXRlKHN0YXJ0KSwgJGx0OiBuZXcgRGF0ZShlbmQpIH0gfTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmluZChxdWVyeSwgeyBwYXNzd29yZDogMCwgbW9iaWxlOiAwIH0pXG4gICAgICAuc29ydCh7IFtzb3J0XTogLTEgfSlcbiAgICAgIC5za2lwKHBhZ2UgKiBsaW1pdClcbiAgICAgIC5saW1pdChsaW1pdCk7XG4gIH0sXG4gIGNvdW50TGlzdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBsZXQgcXVlcnkgPSB7fTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2VhcmNoICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2VhcmNoID09PSBcInN0cmluZ1wiICYmIG9wdGlvbnMuc2VhcmNoLnRyaW0oKSAhPT0gXCJcIikge1xuICAgICAgICBpZiAoW1wibmFtZVwiLCBcInVzZXJuYW1lXCJdLmluY2x1ZGVzKG9wdGlvbnMuaXRlbSkpIHtcbiAgICAgICAgICAvLyDmqKHns4rljLnphY1cbiAgICAgICAgICBxdWVyeVtvcHRpb25zLml0ZW1dID0geyAkcmVnZXg6IG5ldyBSZWdFeHAob3B0aW9ucy5zZWFyY2gpIH07XG4gICAgICAgICAgLy8gPeOAiyB7IG5hbWU6IHsgJHJlZ2V4OiAvYWRtaW4vIH0gfSA9PiBteXNxbCBsaWtlICVhZG1pbiVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyByYWRpb1xuICAgICAgICAgIHF1ZXJ5W29wdGlvbnMuaXRlbV0gPSBvcHRpb25zLnNlYXJjaDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuaXRlbSA9PT0gXCJyb2xlc1wiKSB7XG4gICAgICAgIHF1ZXJ5ID0geyByb2xlczogeyAkaW46IG9wdGlvbnMuc2VhcmNoIH0gfTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLml0ZW0gPT09IFwiY3JlYXRlZFwiKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gb3B0aW9ucy5zZWFyY2hbMF07XG4gICAgICAgIGNvbnN0IGVuZCA9IG9wdGlvbnMuc2VhcmNoWzFdO1xuICAgICAgICBxdWVyeSA9IHsgY3JlYXRlZDogeyAkZ3RlOiBuZXcgRGF0ZShzdGFydCksICRsdDogbmV3IERhdGUoZW5kKSB9IH07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZpbmQocXVlcnkpLmNvdW50RG9jdW1lbnRzKCk7XG4gIH0sXG4gIC8vIGdldFRvdGFsU2lnbjogZnVuY3Rpb24gKHBhZ2UsIGxpbWl0KSB7XG4gIC8vICAgcmV0dXJuIHRoaXMuZmluZCh7fSlcbiAgLy8gICAgIC5za2lwKHBhZ2UgKiBsaW1pdClcbiAgLy8gICAgIC5saW1pdChsaW1pdClcbiAgLy8gICAgIC5zb3J0KHsgY291bnQ6IC0xIH0pXG4gIC8vIH0sXG4gIC8vIGdldFRvdGFsU2lnbkNvdW50OiBmdW5jdGlvbiAocGFnZSwgbGltaXQpIHtcbiAgLy8gICByZXR1cm4gdGhpcy5maW5kKHt9KS5jb3VudERvY3VtZW50cygpXG4gIC8vIH1cbn07XG5cbmNvbnN0IFVzZXJNb2RlbCA9IG1vbmdvb3NlLm1vZGVsKFwidXNlcnNcIiwgVXNlclNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJNb2RlbDtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "User.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "UserSchema",
        "username",
        "type",
        "String",
        "name",
        "password",
        "created",
        "Date",
        "update",
        "gender",
        "default",
        "fav",
        "Number",
        "roles",
        "Array",
        "pic",
        "mobile",
        "match",
        "status",
        "location",
        "regmark",
        "isVip",
        "count",
        "pre",
        "next",
        "updated",
        "statics",
        "findByID",
        "id",
        "findOne",
        "_id",
        "getList",
        "options",
        "sort",
        "page",
        "limit",
        "query",
        "search",
        "trim",
        "includes",
        "item",
        "$regex",
        "RegExp",
        "$in",
        "start",
        "end",
        "$gte",
        "$lt",
        "find",
        "skip",
        "countList",
        "countDocuments",
        "UserModel",
        "model"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "sourcesContent": [
        "import mongoose from \"../config/DBHelper\";\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n  username: { type: String },\n  name: { type: String },\n  password: { type: String },\n  created: { type: Date },\n  update: { type: Date },\n  gender: { type: String, default: \"\" },\n  fav: { type: Number, default: 100 },\n  roles: { type: Array, default: [\"user\"] },\n  pic: { type: String, default: \"/img/default.png\" },\n  mobile: { type: String, match: /^1[3-9](\\d{9})$/, default: \"\" },\n  status: { type: String, default: \"0\" },\n  location: { type: String, default: \"\" },\n  regmark: { type: String, default: \"\" },\n  isVip: { type: String, default: \"0\" },\n  count: { type: Number, default: 0 },\n});\n\nUserSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\n\nUserSchema.pre(\"update\", function (next) {\n  this.updated = new Date();\n  next();\n});\n\nUserSchema.statics = {\n  findByID: function (id) {\n    return this.findOne(\n      { _id: id },\n      {\n        password: 0,\n        username: 0,\n        mobile: 0,\n      }\n    );\n  },\n  getList: function (options, sort, page, limit) {\n    // 1. datepicker -> item: string, search -> array  startitme,endtime\n    // 2. radio -> key-value $in\n    // 3. select -> key-array $in\n    let query = {};\n    if (typeof options.search !== \"undefined\") {\n      if (typeof options.search === \"string\" && options.search.trim() !== \"\") {\n        if ([\"name\", \"username\"].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = { $regex: new RegExp(options.search) };\n          // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n      if (options.item === \"roles\") {\n        query = { roles: { $in: options.search } };\n      }\n      if (options.item === \"created\") {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = { created: { $gte: new Date(start), $lt: new Date(end) } };\n      }\n    }\n    return this.find(query, { password: 0, mobile: 0 })\n      .sort({ [sort]: -1 })\n      .skip(page * limit)\n      .limit(limit);\n  },\n  countList: function (options) {\n    let query = {};\n    if (typeof options.search !== \"undefined\") {\n      if (typeof options.search === \"string\" && options.search.trim() !== \"\") {\n        if ([\"name\", \"username\"].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = { $regex: new RegExp(options.search) };\n          // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n      if (options.item === \"roles\") {\n        query = { roles: { $in: options.search } };\n      }\n      if (options.item === \"created\") {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = { created: { $gte: new Date(start), $lt: new Date(end) } };\n      }\n    }\n    return this.find(query).countDocuments();\n  },\n  // getTotalSign: function (page, limit) {\n  //   return this.find({})\n  //     .skip(page * limit)\n  //     .limit(limit)\n  //     .sort({ count: -1 })\n  // },\n  // getTotalSignCount: function (page, limit) {\n  //   return this.find({}).countDocuments()\n  // }\n};\n\nconst UserModel = mongoose.model(\"users\", UserSchema);\n\nexport default UserModel;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640144050351
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/config/DBHelper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/config/DBHelper.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/config/DBHelper.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/config/DBHelper.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
        "sourceFileName": "DBHelper.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _index = _interopRequireDefault(require(\"./index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 创建连接\n_mongoose.default.connect(_index.default.DB_URL, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n}); // 连接成功\n\n\n_mongoose.default.connection.on(\"connected\", () => {\n  console.log(\"mongoose connection open to \" + _index.default.DB_URL);\n}); // 连接异常\n\n\n_mongoose.default.connection.on(\"error\", err => {\n  console.log(\"mongoose connection error: \" + err);\n}); // 断开连接\n\n\n_mongoose.default.connection.on(\"disconnected\", () => {\n  console.log(\"mongoose connection disconnected\");\n});\n\nvar _default = _mongoose.default;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRCSGVscGVyLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiY29ubmVjdCIsImNvbmZpZyIsIkRCX1VSTCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNvbm5lY3Rpb24iLCJvbiIsImNvbnNvbGUiLCJsb2ciLCJlcnIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBO0FBQ0FBLGtCQUFTQyxPQUFULENBQWlCQyxlQUFPQyxNQUF4QixFQUFnQztBQUM5QkMsRUFBQUEsZUFBZSxFQUFFLElBRGE7QUFFOUJDLEVBQUFBLGtCQUFrQixFQUFFO0FBRlUsQ0FBaEMsRSxDQUtBOzs7QUFDQUwsa0JBQVNNLFVBQVQsQ0FBb0JDLEVBQXBCLENBQXVCLFdBQXZCLEVBQW9DLE1BQU07QUFDeENDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGlDQUFpQ1AsZUFBT0MsTUFBcEQ7QUFDRCxDQUZELEUsQ0FJQTs7O0FBQ0FILGtCQUFTTSxVQUFULENBQW9CQyxFQUFwQixDQUF1QixPQUF2QixFQUFpQ0csR0FBRCxJQUFTO0FBQ3ZDRixFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxnQ0FBZ0NDLEdBQTVDO0FBQ0QsQ0FGRCxFLENBSUE7OztBQUNBVixrQkFBU00sVUFBVCxDQUFvQkMsRUFBcEIsQ0FBdUIsY0FBdkIsRUFBdUMsTUFBTTtBQUMzQ0MsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksa0NBQVo7QUFDRCxDQUZEOztlQUllVCxpQiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL2NvbmZpZy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuL2luZGV4XCI7XG5cbi8vIOWIm+W7uui/nuaOpVxubW9uZ29vc2UuY29ubmVjdChjb25maWcuREJfVVJMLCB7XG4gIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxufSk7XG5cbi8vIOi/nuaOpeaIkOWKn1xubW9uZ29vc2UuY29ubmVjdGlvbi5vbihcImNvbm5lY3RlZFwiLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwibW9uZ29vc2UgY29ubmVjdGlvbiBvcGVuIHRvIFwiICsgY29uZmlnLkRCX1VSTCk7XG59KTtcblxuLy8g6L+e5o6l5byC5bi4XG5tb25nb29zZS5jb25uZWN0aW9uLm9uKFwiZXJyb3JcIiwgKGVycikgPT4ge1xuICBjb25zb2xlLmxvZyhcIm1vbmdvb3NlIGNvbm5lY3Rpb24gZXJyb3I6IFwiICsgZXJyKTtcbn0pO1xuXG4vLyDmlq3lvIDov57mjqVcbm1vbmdvb3NlLmNvbm5lY3Rpb24ub24oXCJkaXNjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhcIm1vbmdvb3NlIGNvbm5lY3Rpb24gZGlzY29ubmVjdGVkXCIpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "DBHelper.js"
      ],
      "names": [
        "mongoose",
        "connect",
        "config",
        "DB_URL",
        "useNewUrlParser",
        "useUnifiedTopology",
        "connection",
        "on",
        "console",
        "log",
        "err"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA;AACAA,kBAASC,OAAT,CAAiBC,eAAOC,MAAxB,EAAgC;AAC9BC,EAAAA,eAAe,EAAE,IADa;AAE9BC,EAAAA,kBAAkB,EAAE;AAFU,CAAhC,E,CAKA;;;AACAL,kBAASM,UAAT,CAAoBC,EAApB,CAAuB,WAAvB,EAAoC,MAAM;AACxCC,EAAAA,OAAO,CAACC,GAAR,CAAY,iCAAiCP,eAAOC,MAApD;AACD,CAFD,E,CAIA;;;AACAH,kBAASM,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAAiCG,GAAD,IAAS;AACvCF,EAAAA,OAAO,CAACC,GAAR,CAAY,gCAAgCC,GAA5C;AACD,CAFD,E,CAIA;;;AACAV,kBAASM,UAAT,CAAoBC,EAApB,CAAuB,cAAvB,EAAuC,MAAM;AAC3CC,EAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AACD,CAFD;;eAIeT,iB",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "sourcesContent": [
        "import mongoose from \"mongoose\";\nimport config from \"./index\";\n\n// 创建连接\nmongoose.connect(config.DB_URL, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n});\n\n// 连接成功\nmongoose.connection.on(\"connected\", () => {\n  console.log(\"mongoose connection open to \" + config.DB_URL);\n});\n\n// 连接异常\nmongoose.connection.on(\"error\", (err) => {\n  console.log(\"mongoose connection error: \" + err);\n});\n\n// 断开连接\nmongoose.connection.on(\"disconnected\", () => {\n  console.log(\"mongoose connection disconnected\");\n});\n\nexport default mongoose;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638452248985
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/loginRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "loginRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _LoginController = _interopRequireDefault(require(\"../api/LoginController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.prefix(\"/login\");\nrouter.post(\"/forget\", _LoginController.default.forget);\nrouter.post(\"/login\", _LoginController.default.login);\nrouter.post(\"/reg\", _LoginController.default.reg);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luUm91dGVyLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsIlJvdXRlciIsInByZWZpeCIsInBvc3QiLCJsb2dpbkNvbnRyb2xsZXIiLCJmb3JnZXQiLCJsb2dpbiIsInJlZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLElBQUlDLGtCQUFKLEVBQWY7QUFFQUQsTUFBTSxDQUFDRSxNQUFQLENBQWMsUUFBZDtBQUNBRixNQUFNLENBQUNHLElBQVAsQ0FBWSxTQUFaLEVBQXVCQyx5QkFBZ0JDLE1BQXZDO0FBQ0FMLE1BQU0sQ0FBQ0csSUFBUCxDQUFZLFFBQVosRUFBc0JDLHlCQUFnQkUsS0FBdEM7QUFDQU4sTUFBTSxDQUFDRyxJQUFQLENBQVksTUFBWixFQUFvQkMseUJBQWdCRyxHQUFwQztlQUVlUCxNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb3V0ZXIgZnJvbSBcImtvYS1yb3V0ZXJcIjtcbmltcG9ydCBsb2dpbkNvbnRyb2xsZXIgZnJvbSBcIi4uL2FwaS9Mb2dpbkNvbnRyb2xsZXJcIjtcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuXG5yb3V0ZXIucHJlZml4KFwiL2xvZ2luXCIpO1xucm91dGVyLnBvc3QoXCIvZm9yZ2V0XCIsIGxvZ2luQ29udHJvbGxlci5mb3JnZXQpO1xucm91dGVyLnBvc3QoXCIvbG9naW5cIiwgbG9naW5Db250cm9sbGVyLmxvZ2luKTtcbnJvdXRlci5wb3N0KFwiL3JlZ1wiLCBsb2dpbkNvbnRyb2xsZXIucmVnKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "loginRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "post",
        "loginController",
        "forget",
        "login",
        "reg"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,QAAd;AACAF,MAAM,CAACG,IAAP,CAAY,SAAZ,EAAuBC,yBAAgBC,MAAvC;AACAL,MAAM,CAACG,IAAP,CAAY,QAAZ,EAAsBC,yBAAgBE,KAAtC;AACAN,MAAM,CAACG,IAAP,CAAY,MAAZ,EAAoBC,yBAAgBG,GAApC;eAEeP,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport loginController from \"../api/LoginController\";\n\nconst router = new Router();\n\nrouter.prefix(\"/login\");\nrouter.post(\"/forget\", loginController.forget);\nrouter.post(\"/login\", loginController.login);\nrouter.post(\"/reg\", loginController.reg);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640264455359
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/LoginController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "LoginController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _MailConfig = _interopRequireDefault(require(\"../config/MailConfig\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nvar _utils = require(\"../common/utils\");\n\nvar _User = _interopRequireDefault(require(\"../model/User\"));\n\nvar _SignRecord = _interopRequireDefault(require(\"../model/SignRecord\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass LoginController {\n  constructor() {}\n\n  async forget(ctx) {\n    const {\n      body\n    } = ctx.request;\n\n    try {\n      // body.username -> database -> email\n      // 发送邮件\n      let result = await (0, _MailConfig.default)({\n        code: \"1234\",\n        expire: (0, _moment.default)().add(30, \"minutes\").format(\"YYYY-MM-DD HH:mm:ss\"),\n        email: body.username,\n        user: \"Brian\"\n      });\n      ctx.body = {\n        code: 200,\n        data: result,\n        msg: \"邮件发送成功\"\n      };\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async login(ctx) {\n    // 接收用户的数据\n    const {\n      body\n    } = ctx.request;\n    let sid = body.sid;\n    let code = body.code; // 验证图片验证码的时效性，正确性\n\n    if (await (0, _utils.checkCode)(sid, code)) {\n      // 验证用户账号密码是否正确\n      // mongoDB查库\n      let checkUserPasswd = false;\n      let user = await _User.default.findOne({\n        username: body.username\n      });\n\n      if (await _bcrypt.default.compare(body.password, user.password)) {\n        checkUserPasswd = true;\n      }\n\n      if (checkUserPasswd) {\n        const userObj = user.toJSON();\n        const arr = [\"password\", \"username\", \"roles\"];\n        arr.map(item => delete userObj[item]); // 返回token\n\n        let token = _jsonwebtoken.default.sign({\n          _id: userObj._id\n        }, _config.default.JWT_SECRET, {\n          expiresIn: \"1d\" // 一天有效期\n\n        }); // 加入isSign属性\n\n\n        const signRecord = await _SignRecord.default.findByUid(userObj._id);\n\n        if (signRecord) {\n          if ((0, _moment.default)(signRecord.created).format(\"YYYY-MM-DD\") === (0, _moment.default)().format(\"YYYY-MM-DD\")) {\n            userObj.isSign = true;\n          } else {\n            userObj.isSign = false;\n          }\n\n          userObj.lastSign = signRecord.created;\n        } else {\n          // 用户无签到记录\n          userObj.isSign = false;\n        }\n\n        ctx.body = {\n          code: 200,\n          data: userObj,\n          token: token\n        };\n      } else {\n        // 用户名，密码验证失败，返回提示\n        ctx.body = {\n          code: 404,\n          msg: \"用户名或密码错误\"\n        };\n      }\n    } else {\n      ctx.body = {\n        code: 401,\n        msg: \"图片验证码错误\"\n      };\n    }\n  }\n\n  async reg(ctx) {\n    // 接受客户端的数据\n    const {\n      body\n    } = ctx.request; // 校验验证码（时效性，有效性）\n\n    let sid = body.sid;\n    let code = body.code;\n    let msg = {};\n    let check = true;\n\n    if (await (0, _utils.checkCode)(sid, code)) {\n      // 查库，看username是否被注册\n      let user1 = await _User.default.findOne({\n        username: body.username\n      });\n\n      if (user1 !== null && typeof user1.username !== \"undefined\") {\n        msg.username = [\"此邮箱已经注册！\"];\n        check = false;\n      } // 查库，看name是否被注册\n\n\n      let user2 = await _User.default.findOne({\n        name: body.name\n      });\n\n      if (user2 !== null && typeof user2.name !== \"undefined\") {\n        msg.name = [\"此昵称已经注册！\"];\n        check = false;\n      }\n\n      if (check) {\n        // 写入数据库\n        body.password = await _bcrypt.default.hash(body.password, 5);\n        let user = new _User.default({\n          username: body.username,\n          name: body.name,\n          // 密码加密\n          password: body.password,\n          created: (0, _moment.default)().format(\"YYYY-MM-DD HH:mm:ss\")\n        });\n        let result = await user.save();\n        ctx.body = {\n          code: 200,\n          data: result,\n          msg: \"注册成功\"\n        };\n        return;\n      }\n\n      ctx.body = {\n        code: 500,\n        msg: msg\n      };\n    } else {\n      msg.code = [\"验证码已失效，请重新获取！\"];\n      ctx.body = {\n        code: 500,\n        msg: msg\n      };\n    }\n  }\n\n}\n\nvar _default = new LoginController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxvZ2luQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJMb2dpbkNvbnRyb2xsZXIiLCJjb25zdHJ1Y3RvciIsImZvcmdldCIsImN0eCIsImJvZHkiLCJyZXF1ZXN0IiwicmVzdWx0IiwiY29kZSIsImV4cGlyZSIsImFkZCIsImZvcm1hdCIsImVtYWlsIiwidXNlcm5hbWUiLCJ1c2VyIiwiZGF0YSIsIm1zZyIsImUiLCJjb25zb2xlIiwibG9nIiwibG9naW4iLCJzaWQiLCJjaGVja1VzZXJQYXNzd2QiLCJVc2VyIiwiZmluZE9uZSIsImJjcnlwdCIsImNvbXBhcmUiLCJwYXNzd29yZCIsInVzZXJPYmoiLCJ0b0pTT04iLCJhcnIiLCJtYXAiLCJpdGVtIiwidG9rZW4iLCJqc29ud2VidG9rZW4iLCJzaWduIiwiX2lkIiwiY29uZmlnIiwiSldUX1NFQ1JFVCIsImV4cGlyZXNJbiIsInNpZ25SZWNvcmQiLCJTaWduUmVjb3JkIiwiZmluZEJ5VWlkIiwiY3JlYXRlZCIsImlzU2lnbiIsImxhc3RTaWduIiwicmVnIiwiY2hlY2siLCJ1c2VyMSIsInVzZXIyIiwibmFtZSIsImhhc2giLCJzYXZlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxlQUFOLENBQXNCO0FBQ3BCQyxFQUFBQSxXQUFXLEdBQUcsQ0FBRTs7QUFDSixRQUFOQyxNQUFNLENBQUNDLEdBQUQsRUFBTTtBQUNoQixVQUFNO0FBQUVDLE1BQUFBO0FBQUYsUUFBV0QsR0FBRyxDQUFDRSxPQUFyQjs7QUFDQSxRQUFJO0FBQ0Y7QUFDQTtBQUNBLFVBQUlDLE1BQU0sR0FBRyxNQUFNLHlCQUFLO0FBQ3RCQyxRQUFBQSxJQUFJLEVBQUUsTUFEZ0I7QUFFdEJDLFFBQUFBLE1BQU0sRUFBRSx1QkFBU0MsR0FBVCxDQUFhLEVBQWIsRUFBaUIsU0FBakIsRUFBNEJDLE1BQTVCLENBQW1DLHFCQUFuQyxDQUZjO0FBR3RCQyxRQUFBQSxLQUFLLEVBQUVQLElBQUksQ0FBQ1EsUUFIVTtBQUl0QkMsUUFBQUEsSUFBSSxFQUFFO0FBSmdCLE9BQUwsQ0FBbkI7QUFNQVYsTUFBQUEsR0FBRyxDQUFDQyxJQUFKLEdBQVc7QUFDVEcsUUFBQUEsSUFBSSxFQUFFLEdBREc7QUFFVE8sUUFBQUEsSUFBSSxFQUFFUixNQUZHO0FBR1RTLFFBQUFBLEdBQUcsRUFBRTtBQUhJLE9BQVg7QUFLRCxLQWRELENBY0UsT0FBT0MsQ0FBUCxFQUFVO0FBQ1ZDLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixDQUFaO0FBQ0Q7QUFDRjs7QUFFVSxRQUFMRyxLQUFLLENBQUNoQixHQUFELEVBQU07QUFDZjtBQUNBLFVBQU07QUFBRUMsTUFBQUE7QUFBRixRQUFXRCxHQUFHLENBQUNFLE9BQXJCO0FBQ0EsUUFBSWUsR0FBRyxHQUFHaEIsSUFBSSxDQUFDZ0IsR0FBZjtBQUNBLFFBQUliLElBQUksR0FBR0gsSUFBSSxDQUFDRyxJQUFoQixDQUplLENBS2Y7O0FBQ0EsUUFBSSxNQUFNLHNCQUFVYSxHQUFWLEVBQWViLElBQWYsQ0FBVixFQUFnQztBQUM5QjtBQUNBO0FBQ0EsVUFBSWMsZUFBZSxHQUFHLEtBQXRCO0FBQ0EsVUFBSVIsSUFBSSxHQUFHLE1BQU1TLGNBQUtDLE9BQUwsQ0FBYTtBQUFFWCxRQUFBQSxRQUFRLEVBQUVSLElBQUksQ0FBQ1E7QUFBakIsT0FBYixDQUFqQjs7QUFDQSxVQUFJLE1BQU1ZLGdCQUFPQyxPQUFQLENBQWVyQixJQUFJLENBQUNzQixRQUFwQixFQUE4QmIsSUFBSSxDQUFDYSxRQUFuQyxDQUFWLEVBQXdEO0FBQ3RETCxRQUFBQSxlQUFlLEdBQUcsSUFBbEI7QUFDRDs7QUFDRCxVQUFJQSxlQUFKLEVBQXFCO0FBQ25CLGNBQU1NLE9BQU8sR0FBR2QsSUFBSSxDQUFDZSxNQUFMLEVBQWhCO0FBQ0EsY0FBTUMsR0FBRyxHQUFHLENBQUMsVUFBRCxFQUFhLFVBQWIsRUFBeUIsT0FBekIsQ0FBWjtBQUNBQSxRQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBU0MsSUFBRCxJQUFVLE9BQU9KLE9BQU8sQ0FBQ0ksSUFBRCxDQUFoQyxFQUhtQixDQUluQjs7QUFDQSxZQUFJQyxLQUFLLEdBQUdDLHNCQUFhQyxJQUFiLENBQWtCO0FBQUVDLFVBQUFBLEdBQUcsRUFBRVIsT0FBTyxDQUFDUTtBQUFmLFNBQWxCLEVBQXdDQyxnQkFBT0MsVUFBL0MsRUFBMkQ7QUFDckVDLFVBQUFBLFNBQVMsRUFBRSxJQUQwRCxDQUNwRDs7QUFEb0QsU0FBM0QsQ0FBWixDQUxtQixDQVFuQjs7O0FBQ0EsY0FBTUMsVUFBVSxHQUFHLE1BQU1DLG9CQUFXQyxTQUFYLENBQXFCZCxPQUFPLENBQUNRLEdBQTdCLENBQXpCOztBQUNBLFlBQUlJLFVBQUosRUFBZ0I7QUFDZCxjQUNFLHFCQUFPQSxVQUFVLENBQUNHLE9BQWxCLEVBQTJCaEMsTUFBM0IsQ0FBa0MsWUFBbEMsTUFDQSx1QkFBU0EsTUFBVCxDQUFnQixZQUFoQixDQUZGLEVBR0U7QUFDQWlCLFlBQUFBLE9BQU8sQ0FBQ2dCLE1BQVIsR0FBaUIsSUFBakI7QUFDRCxXQUxELE1BS087QUFDTGhCLFlBQUFBLE9BQU8sQ0FBQ2dCLE1BQVIsR0FBaUIsS0FBakI7QUFDRDs7QUFDRGhCLFVBQUFBLE9BQU8sQ0FBQ2lCLFFBQVIsR0FBbUJMLFVBQVUsQ0FBQ0csT0FBOUI7QUFDRCxTQVZELE1BVU87QUFDTDtBQUNBZixVQUFBQSxPQUFPLENBQUNnQixNQUFSLEdBQWlCLEtBQWpCO0FBQ0Q7O0FBQ0R4QyxRQUFBQSxHQUFHLENBQUNDLElBQUosR0FBVztBQUNURyxVQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUTyxVQUFBQSxJQUFJLEVBQUVhLE9BRkc7QUFHVEssVUFBQUEsS0FBSyxFQUFFQTtBQUhFLFNBQVg7QUFLRCxPQTdCRCxNQTZCTztBQUNMO0FBQ0E3QixRQUFBQSxHQUFHLENBQUNDLElBQUosR0FBVztBQUNURyxVQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUUSxVQUFBQSxHQUFHLEVBQUU7QUFGSSxTQUFYO0FBSUQ7QUFDRixLQTVDRCxNQTRDTztBQUNMWixNQUFBQSxHQUFHLENBQUNDLElBQUosR0FBVztBQUNURyxRQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUUSxRQUFBQSxHQUFHLEVBQUU7QUFGSSxPQUFYO0FBSUQ7QUFDRjs7QUFFUSxRQUFIOEIsR0FBRyxDQUFDMUMsR0FBRCxFQUFNO0FBQ2I7QUFDQSxVQUFNO0FBQUVDLE1BQUFBO0FBQUYsUUFBV0QsR0FBRyxDQUFDRSxPQUFyQixDQUZhLENBR2I7O0FBQ0EsUUFBSWUsR0FBRyxHQUFHaEIsSUFBSSxDQUFDZ0IsR0FBZjtBQUNBLFFBQUliLElBQUksR0FBR0gsSUFBSSxDQUFDRyxJQUFoQjtBQUNBLFFBQUlRLEdBQUcsR0FBRyxFQUFWO0FBQ0EsUUFBSStCLEtBQUssR0FBRyxJQUFaOztBQUNBLFFBQUksTUFBTSxzQkFBVTFCLEdBQVYsRUFBZWIsSUFBZixDQUFWLEVBQWdDO0FBQzlCO0FBQ0EsVUFBSXdDLEtBQUssR0FBRyxNQUFNekIsY0FBS0MsT0FBTCxDQUFhO0FBQUVYLFFBQUFBLFFBQVEsRUFBRVIsSUFBSSxDQUFDUTtBQUFqQixPQUFiLENBQWxCOztBQUNBLFVBQUltQyxLQUFLLEtBQUssSUFBVixJQUFrQixPQUFPQSxLQUFLLENBQUNuQyxRQUFiLEtBQTBCLFdBQWhELEVBQTZEO0FBQzNERyxRQUFBQSxHQUFHLENBQUNILFFBQUosR0FBZSxDQUFDLFVBQUQsQ0FBZjtBQUNBa0MsUUFBQUEsS0FBSyxHQUFHLEtBQVI7QUFDRCxPQU42QixDQU85Qjs7O0FBQ0EsVUFBSUUsS0FBSyxHQUFHLE1BQU0xQixjQUFLQyxPQUFMLENBQWE7QUFBRTBCLFFBQUFBLElBQUksRUFBRTdDLElBQUksQ0FBQzZDO0FBQWIsT0FBYixDQUFsQjs7QUFDQSxVQUFJRCxLQUFLLEtBQUssSUFBVixJQUFrQixPQUFPQSxLQUFLLENBQUNDLElBQWIsS0FBc0IsV0FBNUMsRUFBeUQ7QUFDdkRsQyxRQUFBQSxHQUFHLENBQUNrQyxJQUFKLEdBQVcsQ0FBQyxVQUFELENBQVg7QUFDQUgsUUFBQUEsS0FBSyxHQUFHLEtBQVI7QUFDRDs7QUFDRCxVQUFJQSxLQUFKLEVBQVc7QUFDVDtBQUNBMUMsUUFBQUEsSUFBSSxDQUFDc0IsUUFBTCxHQUFnQixNQUFNRixnQkFBTzBCLElBQVAsQ0FBWTlDLElBQUksQ0FBQ3NCLFFBQWpCLEVBQTJCLENBQTNCLENBQXRCO0FBQ0EsWUFBSWIsSUFBSSxHQUFHLElBQUlTLGFBQUosQ0FBUztBQUNsQlYsVUFBQUEsUUFBUSxFQUFFUixJQUFJLENBQUNRLFFBREc7QUFFbEJxQyxVQUFBQSxJQUFJLEVBQUU3QyxJQUFJLENBQUM2QyxJQUZPO0FBR2xCO0FBQ0F2QixVQUFBQSxRQUFRLEVBQUV0QixJQUFJLENBQUNzQixRQUpHO0FBS2xCZ0IsVUFBQUEsT0FBTyxFQUFFLHVCQUFTaEMsTUFBVCxDQUFnQixxQkFBaEI7QUFMUyxTQUFULENBQVg7QUFPQSxZQUFJSixNQUFNLEdBQUcsTUFBTU8sSUFBSSxDQUFDc0MsSUFBTCxFQUFuQjtBQUNBaEQsUUFBQUEsR0FBRyxDQUFDQyxJQUFKLEdBQVc7QUFDVEcsVUFBQUEsSUFBSSxFQUFFLEdBREc7QUFFVE8sVUFBQUEsSUFBSSxFQUFFUixNQUZHO0FBR1RTLFVBQUFBLEdBQUcsRUFBRTtBQUhJLFNBQVg7QUFLQTtBQUNEOztBQUNEWixNQUFBQSxHQUFHLENBQUNDLElBQUosR0FBVztBQUNURyxRQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUUSxRQUFBQSxHQUFHLEVBQUVBO0FBRkksT0FBWDtBQUlELEtBbkNELE1BbUNPO0FBQ0xBLE1BQUFBLEdBQUcsQ0FBQ1IsSUFBSixHQUFXLENBQUMsZUFBRCxDQUFYO0FBQ0FKLE1BQUFBLEdBQUcsQ0FBQ0MsSUFBSixHQUFXO0FBQ1RHLFFBQUFBLElBQUksRUFBRSxHQURHO0FBRVRRLFFBQUFBLEdBQUcsRUFBRUE7QUFGSSxPQUFYO0FBSUQ7QUFDRjs7QUFuSW1COztlQXNJUCxJQUFJZixlQUFKLEUiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9hcGkvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNlbmQgZnJvbSBcIi4uL2NvbmZpZy9NYWlsQ29uZmlnXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xuaW1wb3J0IGpzb253ZWJ0b2tlbiBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWdcIjtcbmltcG9ydCB7IGNoZWNrQ29kZSB9IGZyb20gXCIuLi9jb21tb24vdXRpbHNcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbC9Vc2VyXCI7XG5pbXBvcnQgU2lnblJlY29yZCBmcm9tIFwiLi4vbW9kZWwvU2lnblJlY29yZFwiO1xuXG5jbGFzcyBMb2dpbkNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG4gIGFzeW5jIGZvcmdldChjdHgpIHtcbiAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgIHRyeSB7XG4gICAgICAvLyBib2R5LnVzZXJuYW1lIC0+IGRhdGFiYXNlIC0+IGVtYWlsXG4gICAgICAvLyDlj5HpgIHpgq7ku7ZcbiAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBzZW5kKHtcbiAgICAgICAgY29kZTogXCIxMjM0XCIsXG4gICAgICAgIGV4cGlyZTogbW9tZW50KCkuYWRkKDMwLCBcIm1pbnV0ZXNcIikuZm9ybWF0KFwiWVlZWS1NTS1ERCBISDptbTpzc1wiKSxcbiAgICAgICAgZW1haWw6IGJvZHkudXNlcm5hbWUsXG4gICAgICAgIHVzZXI6IFwiQnJpYW5cIixcbiAgICAgIH0pO1xuICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICBtc2c6IFwi6YKu5Lu25Y+R6YCB5oiQ5YqfXCIsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvZ2luKGN0eCkge1xuICAgIC8vIOaOpeaUtueUqOaIt+eahOaVsOaNrlxuICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgbGV0IHNpZCA9IGJvZHkuc2lkO1xuICAgIGxldCBjb2RlID0gYm9keS5jb2RlO1xuICAgIC8vIOmqjOivgeWbvueJh+mqjOivgeeggeeahOaXtuaViOaAp++8jOato+ehruaAp1xuICAgIGlmIChhd2FpdCBjaGVja0NvZGUoc2lkLCBjb2RlKSkge1xuICAgICAgLy8g6aqM6K+B55So5oi36LSm5Y+35a+G56CB5piv5ZCm5q2j56GuXG4gICAgICAvLyBtb25nb0RC5p+l5bqTXG4gICAgICBsZXQgY2hlY2tVc2VyUGFzc3dkID0gZmFsc2U7XG4gICAgICBsZXQgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lIH0pO1xuICAgICAgaWYgKGF3YWl0IGJjcnlwdC5jb21wYXJlKGJvZHkucGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSB7XG4gICAgICAgIGNoZWNrVXNlclBhc3N3ZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoY2hlY2tVc2VyUGFzc3dkKSB7XG4gICAgICAgIGNvbnN0IHVzZXJPYmogPSB1c2VyLnRvSlNPTigpO1xuICAgICAgICBjb25zdCBhcnIgPSBbXCJwYXNzd29yZFwiLCBcInVzZXJuYW1lXCIsIFwicm9sZXNcIl07XG4gICAgICAgIGFyci5tYXAoKGl0ZW0pID0+IGRlbGV0ZSB1c2VyT2JqW2l0ZW1dKTtcbiAgICAgICAgLy8g6L+U5ZuedG9rZW5cbiAgICAgICAgbGV0IHRva2VuID0ganNvbndlYnRva2VuLnNpZ24oeyBfaWQ6IHVzZXJPYmouX2lkIH0sIGNvbmZpZy5KV1RfU0VDUkVULCB7XG4gICAgICAgICAgZXhwaXJlc0luOiBcIjFkXCIsIC8vIOS4gOWkqeacieaViOacn1xuICAgICAgICB9KTtcbiAgICAgICAgLy8g5Yqg5YWlaXNTaWdu5bGe5oCnXG4gICAgICAgIGNvbnN0IHNpZ25SZWNvcmQgPSBhd2FpdCBTaWduUmVjb3JkLmZpbmRCeVVpZCh1c2VyT2JqLl9pZCk7XG4gICAgICAgIGlmIChzaWduUmVjb3JkKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbW9tZW50KHNpZ25SZWNvcmQuY3JlYXRlZCkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKSA9PT1cbiAgICAgICAgICAgIG1vbWVudCgpLmZvcm1hdChcIllZWVktTU0tRERcIilcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHVzZXJPYmouaXNTaWduID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXNlck9iai5pc1NpZ24gPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdXNlck9iai5sYXN0U2lnbiA9IHNpZ25SZWNvcmQuY3JlYXRlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDnlKjmiLfml6Dnrb7liLDorrDlvZVcbiAgICAgICAgICB1c2VyT2JqLmlzU2lnbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICBkYXRhOiB1c2VyT2JqLFxuICAgICAgICAgIHRva2VuOiB0b2tlbixcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOeUqOaIt+WQje+8jOWvhueggemqjOivgeWksei0pe+8jOi/lOWbnuaPkOekulxuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgICAgbXNnOiBcIueUqOaIt+WQjeaIluWvhueggemUmeivr1wiLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtc2c6IFwi5Zu+54mH6aqM6K+B56CB6ZSZ6K+vXCIsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlZyhjdHgpIHtcbiAgICAvLyDmjqXlj5flrqLmiLfnq6/nmoTmlbDmja5cbiAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgIC8vIOagoemqjOmqjOivgeegge+8iOaXtuaViOaAp++8jOacieaViOaAp++8iVxuICAgIGxldCBzaWQgPSBib2R5LnNpZDtcbiAgICBsZXQgY29kZSA9IGJvZHkuY29kZTtcbiAgICBsZXQgbXNnID0ge307XG4gICAgbGV0IGNoZWNrID0gdHJ1ZTtcbiAgICBpZiAoYXdhaXQgY2hlY2tDb2RlKHNpZCwgY29kZSkpIHtcbiAgICAgIC8vIOafpeW6k++8jOeci3VzZXJuYW1l5piv5ZCm6KKr5rOo5YaMXG4gICAgICBsZXQgdXNlcjEgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB1c2VybmFtZTogYm9keS51c2VybmFtZSB9KTtcbiAgICAgIGlmICh1c2VyMSAhPT0gbnVsbCAmJiB0eXBlb2YgdXNlcjEudXNlcm5hbWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgbXNnLnVzZXJuYW1lID0gW1wi5q2k6YKu566x5bey57uP5rOo5YaM77yBXCJdO1xuICAgICAgICBjaGVjayA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8g5p+l5bqT77yM55yLbmFtZeaYr+WQpuiiq+azqOWGjFxuICAgICAgbGV0IHVzZXIyID0gYXdhaXQgVXNlci5maW5kT25lKHsgbmFtZTogYm9keS5uYW1lIH0pO1xuICAgICAgaWYgKHVzZXIyICE9PSBudWxsICYmIHR5cGVvZiB1c2VyMi5uYW1lICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIG1zZy5uYW1lID0gW1wi5q2k5pi156ew5bey57uP5rOo5YaM77yBXCJdO1xuICAgICAgICBjaGVjayA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGNoZWNrKSB7XG4gICAgICAgIC8vIOWGmeWFpeaVsOaNruW6k1xuICAgICAgICBib2R5LnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2goYm9keS5wYXNzd29yZCwgNSk7XG4gICAgICAgIGxldCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgICAgIHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lLFxuICAgICAgICAgIG5hbWU6IGJvZHkubmFtZSxcbiAgICAgICAgICAvLyDlr4bnoIHliqDlr4ZcbiAgICAgICAgICBwYXNzd29yZDogYm9keS5wYXNzd29yZCxcbiAgICAgICAgICBjcmVhdGVkOiBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLUREIEhIOm1tOnNzXCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgIG1zZzogXCLms6jlhozmiJDlip9cIixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgbXNnOiBtc2csXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBtc2cuY29kZSA9IFtcIumqjOivgeeggeW3suWkseaViO+8jOivt+mHjeaWsOiOt+WPlu+8gVwiXTtcbiAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgIG1zZzogbXNnLFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IExvZ2luQ29udHJvbGxlcigpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "LoginController.js"
      ],
      "names": [
        "LoginController",
        "constructor",
        "forget",
        "ctx",
        "body",
        "request",
        "result",
        "code",
        "expire",
        "add",
        "format",
        "email",
        "username",
        "user",
        "data",
        "msg",
        "e",
        "console",
        "log",
        "login",
        "sid",
        "checkUserPasswd",
        "User",
        "findOne",
        "bcrypt",
        "compare",
        "password",
        "userObj",
        "toJSON",
        "arr",
        "map",
        "item",
        "token",
        "jsonwebtoken",
        "sign",
        "_id",
        "config",
        "JWT_SECRET",
        "expiresIn",
        "signRecord",
        "SignRecord",
        "findByUid",
        "created",
        "isSign",
        "lastSign",
        "reg",
        "check",
        "user1",
        "user2",
        "name",
        "hash",
        "save"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "import send from \"../config/MailConfig\";\nimport bcrypt from \"bcrypt\";\nimport moment from \"moment\";\nimport jsonwebtoken from \"jsonwebtoken\";\nimport config from \"../config\";\nimport { checkCode } from \"../common/utils\";\nimport User from \"../model/User\";\nimport SignRecord from \"../model/SignRecord\";\n\nclass LoginController {\n  constructor() {}\n  async forget(ctx) {\n    const { body } = ctx.request;\n    try {\n      // body.username -> database -> email\n      // 发送邮件\n      let result = await send({\n        code: \"1234\",\n        expire: moment().add(30, \"minutes\").format(\"YYYY-MM-DD HH:mm:ss\"),\n        email: body.username,\n        user: \"Brian\",\n      });\n      ctx.body = {\n        code: 200,\n        data: result,\n        msg: \"邮件发送成功\",\n      };\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  async login(ctx) {\n    // 接收用户的数据\n    const { body } = ctx.request;\n    let sid = body.sid;\n    let code = body.code;\n    // 验证图片验证码的时效性，正确性\n    if (await checkCode(sid, code)) {\n      // 验证用户账号密码是否正确\n      // mongoDB查库\n      let checkUserPasswd = false;\n      let user = await User.findOne({ username: body.username });\n      if (await bcrypt.compare(body.password, user.password)) {\n        checkUserPasswd = true;\n      }\n      if (checkUserPasswd) {\n        const userObj = user.toJSON();\n        const arr = [\"password\", \"username\", \"roles\"];\n        arr.map((item) => delete userObj[item]);\n        // 返回token\n        let token = jsonwebtoken.sign({ _id: userObj._id }, config.JWT_SECRET, {\n          expiresIn: \"1d\", // 一天有效期\n        });\n        // 加入isSign属性\n        const signRecord = await SignRecord.findByUid(userObj._id);\n        if (signRecord) {\n          if (\n            moment(signRecord.created).format(\"YYYY-MM-DD\") ===\n            moment().format(\"YYYY-MM-DD\")\n          ) {\n            userObj.isSign = true;\n          } else {\n            userObj.isSign = false;\n          }\n          userObj.lastSign = signRecord.created;\n        } else {\n          // 用户无签到记录\n          userObj.isSign = false;\n        }\n        ctx.body = {\n          code: 200,\n          data: userObj,\n          token: token,\n        };\n      } else {\n        // 用户名，密码验证失败，返回提示\n        ctx.body = {\n          code: 404,\n          msg: \"用户名或密码错误\",\n        };\n      }\n    } else {\n      ctx.body = {\n        code: 401,\n        msg: \"图片验证码错误\",\n      };\n    }\n  }\n\n  async reg(ctx) {\n    // 接受客户端的数据\n    const { body } = ctx.request;\n    // 校验验证码（时效性，有效性）\n    let sid = body.sid;\n    let code = body.code;\n    let msg = {};\n    let check = true;\n    if (await checkCode(sid, code)) {\n      // 查库，看username是否被注册\n      let user1 = await User.findOne({ username: body.username });\n      if (user1 !== null && typeof user1.username !== \"undefined\") {\n        msg.username = [\"此邮箱已经注册！\"];\n        check = false;\n      }\n      // 查库，看name是否被注册\n      let user2 = await User.findOne({ name: body.name });\n      if (user2 !== null && typeof user2.name !== \"undefined\") {\n        msg.name = [\"此昵称已经注册！\"];\n        check = false;\n      }\n      if (check) {\n        // 写入数据库\n        body.password = await bcrypt.hash(body.password, 5);\n        let user = new User({\n          username: body.username,\n          name: body.name,\n          // 密码加密\n          password: body.password,\n          created: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\n        });\n        let result = await user.save();\n        ctx.body = {\n          code: 200,\n          data: result,\n          msg: \"注册成功\",\n        };\n        return;\n      }\n      ctx.body = {\n        code: 500,\n        msg: msg,\n      };\n    } else {\n      msg.code = [\"验证码已失效，请重新获取！\"];\n      ctx.body = {\n        code: 500,\n        msg: msg,\n      };\n    }\n  }\n}\n\nexport default new LoginController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640265235588
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/config/MailConfig.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
        "sourceFileName": "MailConfig.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _nodemailer = _interopRequireDefault(require(\"nodemailer\"));\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nvar _qs = _interopRequireDefault(require(\"qs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// async..await is not allowed in global scope, must use a wrapper\nasync function send(sendInfo) {\n  // Generate test SMTP service account from ethereal.email\n  // Only needed if you don't have a real mail account for testing\n  // let testAccount = await nodemailer.createTestAccount()\n  // create reusable transporter object using the default SMTP transport\n  let transporter = _nodemailer.default.createTransport({\n    host: \"smtp.qq.com\",\n    port: 587,\n    secure: false,\n    // true for 465, false for other ports\n    auth: {\n      user: \"1210109544@qq.com\",\n      // generated ethereal user\n      pass: \"izwxryxhejwxfecg\" // generated ethereal password\n\n    }\n  }); // let sendInfo = {\n  //   code: '1234',\n  //   expire: '2019-10-01',\n  //   email: 'imoocbrian@qq.com',\n  //   user: 'Brian',\n  // }\n\n\n  const baseUrl = _config.default.baseUrl;\n  const route = sendInfo.type === \"email\" ? \"confirm\" : \"reset\";\n\n  let url = `${baseUrl}/#/${route}?` + _qs.default.stringify(sendInfo.data);\n\n  console.log(\"url\", url); // send mail with defined transport object\n\n  let info = await transporter.sendMail({\n    from: '\"认证邮件\" <1210109544@qq.com>',\n    // sender address\n    to: sendInfo.email,\n    // list of receivers\n    subject: sendInfo.user !== \"\" && sendInfo.type !== \"email\" ? `你好，${sendInfo.user}！《来一碗》注册码` : \"《来一碗》确认修改邮件链接\",\n    // Subject line\n    text: `您在《来一碗》中注册，您的邀请码是${sendInfo.code},邀请码的过期时间: ${sendInfo.expire}`,\n    // plain text body\n    html: `\n        <div style=\"border: 1px solid #dcdcdc;color: #676767;width: 600px; margin: 0 auto; padding-bottom: 50px;position: relative;\">\n        <div style=\"height: 60px; background: #393d49; line-height: 60px; color: #58a36f; font-size: 18px;padding-left: 10px;\">Imooc社区——欢迎来到官方社区</div>\n        <div style=\"padding: 25px\">\n          <div>您好，${sendInfo.user}，重置链接有效时间30分钟，请在${sendInfo.expire}之前${sendInfo.code ? \"重置您的密码\" : \"修改您的邮箱为：\" + sendInfo.data.username}：</div>\n          <a href=\"${url}\" style=\"padding: 10px 20px; color: #fff; background: #009e94; display: inline-block;margin: 15px 0;\">${sendInfo.code ? \"立即重置密码\" : \"确认设置邮箱\"}</a>\n          <div style=\"padding: 5px; background: #f2f2f2;\">如果该邮件不是由你本人操作，请勿进行激活！否则你的邮箱将会被他人绑定。</div>\n        </div>\n        <div style=\"background: #fafafa; color: #b4b4b4;text-align: center; line-height: 45px; height: 45px; position: absolute; left: 0; bottom: 0;width: 100%;\">系统邮件，请勿直接回复</div>\n    </div>\n    ` // html body\n\n  });\n  return \"Message sent: %s\", info.messageId; // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n  // Preview only available when sending through an Ethereal account\n  // console.log('Preview URL: %s', nodemailer.getTestMessageUrl(info))\n  // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n} // main().catch(console.error)\n\n\nvar _default = send;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1haWxDb25maWcuanMiXSwibmFtZXMiOlsic2VuZCIsInNlbmRJbmZvIiwidHJhbnNwb3J0ZXIiLCJub2RlbWFpbGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiaG9zdCIsInBvcnQiLCJzZWN1cmUiLCJhdXRoIiwidXNlciIsInBhc3MiLCJiYXNlVXJsIiwiY29uZmlnIiwicm91dGUiLCJ0eXBlIiwidXJsIiwicXMiLCJzdHJpbmdpZnkiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImluZm8iLCJzZW5kTWFpbCIsImZyb20iLCJ0byIsImVtYWlsIiwic3ViamVjdCIsInRleHQiLCJjb2RlIiwiZXhwaXJlIiwiaHRtbCIsInVzZXJuYW1lIiwibWVzc2FnZUlkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFFQTtBQUNBLGVBQWVBLElBQWYsQ0FBb0JDLFFBQXBCLEVBQThCO0FBQzVCO0FBQ0E7QUFDQTtBQUVBO0FBQ0EsTUFBSUMsV0FBVyxHQUFHQyxvQkFBV0MsZUFBWCxDQUEyQjtBQUMzQ0MsSUFBQUEsSUFBSSxFQUFFLGFBRHFDO0FBRTNDQyxJQUFBQSxJQUFJLEVBQUUsR0FGcUM7QUFHM0NDLElBQUFBLE1BQU0sRUFBRSxLQUhtQztBQUc1QjtBQUNmQyxJQUFBQSxJQUFJLEVBQUU7QUFDSkMsTUFBQUEsSUFBSSxFQUFFLG1CQURGO0FBQ3VCO0FBQzNCQyxNQUFBQSxJQUFJLEVBQUUsa0JBRkYsQ0FFc0I7O0FBRnRCO0FBSnFDLEdBQTNCLENBQWxCLENBTjRCLENBZ0I1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBLFFBQU1DLE9BQU8sR0FBR0MsZ0JBQU9ELE9BQXZCO0FBQ0EsUUFBTUUsS0FBSyxHQUFHWixRQUFRLENBQUNhLElBQVQsS0FBa0IsT0FBbEIsR0FBNEIsU0FBNUIsR0FBd0MsT0FBdEQ7O0FBQ0EsTUFBSUMsR0FBRyxHQUFJLEdBQUVKLE9BQVEsTUFBS0UsS0FBTSxHQUF0QixHQUEyQkcsWUFBR0MsU0FBSCxDQUFhaEIsUUFBUSxDQUFDaUIsSUFBdEIsQ0FBckM7O0FBQ0FDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLEtBQVosRUFBbUJMLEdBQW5CLEVBekI0QixDQTJCNUI7O0FBQ0EsTUFBSU0sSUFBSSxHQUFHLE1BQU1uQixXQUFXLENBQUNvQixRQUFaLENBQXFCO0FBQ3BDQyxJQUFBQSxJQUFJLEVBQUUsNEJBRDhCO0FBQ0E7QUFDcENDLElBQUFBLEVBQUUsRUFBRXZCLFFBQVEsQ0FBQ3dCLEtBRnVCO0FBRWhCO0FBQ3BCQyxJQUFBQSxPQUFPLEVBQ0x6QixRQUFRLENBQUNRLElBQVQsS0FBa0IsRUFBbEIsSUFBd0JSLFFBQVEsQ0FBQ2EsSUFBVCxLQUFrQixPQUExQyxHQUNLLE1BQUtiLFFBQVEsQ0FBQ1EsSUFBSyxXQUR4QixHQUVJLGVBTjhCO0FBTWI7QUFDdkJrQixJQUFBQSxJQUFJLEVBQUcsb0JBQW1CMUIsUUFBUSxDQUFDMkIsSUFBSyxjQUFhM0IsUUFBUSxDQUFDNEIsTUFBTyxFQVBqQztBQU9vQztBQUN4RUMsSUFBQUEsSUFBSSxFQUFHO0FBQ1g7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CN0IsUUFBUSxDQUFDUSxJQUFLLG1CQUM1QlIsUUFBUSxDQUFDNEIsTUFDVixLQUNDNUIsUUFBUSxDQUFDMkIsSUFBVCxHQUNJLFFBREosR0FFSSxhQUFhM0IsUUFBUSxDQUFDaUIsSUFBVCxDQUFjYSxRQUNoQztBQUNMLHFCQUFxQmhCLEdBQUkseUdBQ25CZCxRQUFRLENBQUMyQixJQUFULEdBQWdCLFFBQWhCLEdBQTJCLFFBQzVCO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQTFCd0MsQ0EwQmpDOztBQTFCaUMsR0FBckIsQ0FBakI7QUE2QkEsU0FBTyxvQkFBb0JQLElBQUksQ0FBQ1csU0FBaEMsQ0F6RDRCLENBMEQ1QjtBQUVBO0FBQ0E7QUFDQTtBQUNELEMsQ0FFRDs7O2VBRWVoQyxJIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvY29uZmlnLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBub2RlbWFpbGVyIGZyb20gXCJub2RlbWFpbGVyXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWdcIjtcbmltcG9ydCBxcyBmcm9tIFwicXNcIjtcblxuLy8gYXN5bmMuLmF3YWl0IGlzIG5vdCBhbGxvd2VkIGluIGdsb2JhbCBzY29wZSwgbXVzdCB1c2UgYSB3cmFwcGVyXG5hc3luYyBmdW5jdGlvbiBzZW5kKHNlbmRJbmZvKSB7XG4gIC8vIEdlbmVyYXRlIHRlc3QgU01UUCBzZXJ2aWNlIGFjY291bnQgZnJvbSBldGhlcmVhbC5lbWFpbFxuICAvLyBPbmx5IG5lZWRlZCBpZiB5b3UgZG9uJ3QgaGF2ZSBhIHJlYWwgbWFpbCBhY2NvdW50IGZvciB0ZXN0aW5nXG4gIC8vIGxldCB0ZXN0QWNjb3VudCA9IGF3YWl0IG5vZGVtYWlsZXIuY3JlYXRlVGVzdEFjY291bnQoKVxuXG4gIC8vIGNyZWF0ZSByZXVzYWJsZSB0cmFuc3BvcnRlciBvYmplY3QgdXNpbmcgdGhlIGRlZmF1bHQgU01UUCB0cmFuc3BvcnRcbiAgbGV0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgIGhvc3Q6IFwic210cC5xcS5jb21cIixcbiAgICBwb3J0OiA1ODcsXG4gICAgc2VjdXJlOiBmYWxzZSwgLy8gdHJ1ZSBmb3IgNDY1LCBmYWxzZSBmb3Igb3RoZXIgcG9ydHNcbiAgICBhdXRoOiB7XG4gICAgICB1c2VyOiBcIjEyMTAxMDk1NDRAcXEuY29tXCIsIC8vIGdlbmVyYXRlZCBldGhlcmVhbCB1c2VyXG4gICAgICBwYXNzOiBcIml6d3hyeXhoZWp3eGZlY2dcIiwgLy8gZ2VuZXJhdGVkIGV0aGVyZWFsIHBhc3N3b3JkXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gbGV0IHNlbmRJbmZvID0ge1xuICAvLyAgIGNvZGU6ICcxMjM0JyxcbiAgLy8gICBleHBpcmU6ICcyMDE5LTEwLTAxJyxcbiAgLy8gICBlbWFpbDogJ2ltb29jYnJpYW5AcXEuY29tJyxcbiAgLy8gICB1c2VyOiAnQnJpYW4nLFxuICAvLyB9XG4gIGNvbnN0IGJhc2VVcmwgPSBjb25maWcuYmFzZVVybDtcbiAgY29uc3Qgcm91dGUgPSBzZW5kSW5mby50eXBlID09PSBcImVtYWlsXCIgPyBcImNvbmZpcm1cIiA6IFwicmVzZXRcIjtcbiAgbGV0IHVybCA9IGAke2Jhc2VVcmx9LyMvJHtyb3V0ZX0/YCArIHFzLnN0cmluZ2lmeShzZW5kSW5mby5kYXRhKTtcbiAgY29uc29sZS5sb2coXCJ1cmxcIiwgdXJsKTtcblxuICAvLyBzZW5kIG1haWwgd2l0aCBkZWZpbmVkIHRyYW5zcG9ydCBvYmplY3RcbiAgbGV0IGluZm8gPSBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbCh7XG4gICAgZnJvbTogJ1wi6K6k6K+B6YKu5Lu2XCIgPDEyMTAxMDk1NDRAcXEuY29tPicsIC8vIHNlbmRlciBhZGRyZXNzXG4gICAgdG86IHNlbmRJbmZvLmVtYWlsLCAvLyBsaXN0IG9mIHJlY2VpdmVyc1xuICAgIHN1YmplY3Q6XG4gICAgICBzZW5kSW5mby51c2VyICE9PSBcIlwiICYmIHNlbmRJbmZvLnR5cGUgIT09IFwiZW1haWxcIlxuICAgICAgICA/IGDkvaDlpb3vvIwke3NlbmRJbmZvLnVzZXJ977yB44CK5p2l5LiA56KX44CL5rOo5YaM56CBYFxuICAgICAgICA6IFwi44CK5p2l5LiA56KX44CL56Gu6K6k5L+u5pS56YKu5Lu26ZO+5o6lXCIsIC8vIFN1YmplY3QgbGluZVxuICAgIHRleHQ6IGDmgqjlnKjjgIrmnaXkuIDnopfjgIvkuK3ms6jlhozvvIzmgqjnmoTpgoDor7fnoIHmmK8ke3NlbmRJbmZvLmNvZGV9LOmCgOivt+eggeeahOi/h+acn+aXtumXtDogJHtzZW5kSW5mby5leHBpcmV9YCwgLy8gcGxhaW4gdGV4dCBib2R5XG4gICAgaHRtbDogYFxuICAgICAgICA8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgI2RjZGNkYztjb2xvcjogIzY3Njc2Nzt3aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nLWJvdHRvbTogNTBweDtwb3NpdGlvbjogcmVsYXRpdmU7XCI+XG4gICAgICAgIDxkaXYgc3R5bGU9XCJoZWlnaHQ6IDYwcHg7IGJhY2tncm91bmQ6ICMzOTNkNDk7IGxpbmUtaGVpZ2h0OiA2MHB4OyBjb2xvcjogIzU4YTM2ZjsgZm9udC1zaXplOiAxOHB4O3BhZGRpbmctbGVmdDogMTBweDtcIj5JbW9vY+ekvuWMuuKAlOKAlOasoui/juadpeWIsOWumOaWueekvuWMujwvZGl2PlxuICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjVweFwiPlxuICAgICAgICAgIDxkaXY+5oKo5aW977yMJHtzZW5kSW5mby51c2Vyfe+8jOmHjee9rumTvuaOpeacieaViOaXtumXtDMw5YiG6ZKf77yM6K+35ZyoJHtcbiAgICAgIHNlbmRJbmZvLmV4cGlyZVxuICAgIH3kuYvliY0ke1xuICAgICAgc2VuZEluZm8uY29kZVxuICAgICAgICA/IFwi6YeN572u5oKo55qE5a+G56CBXCJcbiAgICAgICAgOiBcIuS/ruaUueaCqOeahOmCrueuseS4uu+8mlwiICsgc2VuZEluZm8uZGF0YS51c2VybmFtZVxuICAgIH3vvJo8L2Rpdj5cbiAgICAgICAgICA8YSBocmVmPVwiJHt1cmx9XCIgc3R5bGU9XCJwYWRkaW5nOiAxMHB4IDIwcHg7IGNvbG9yOiAjZmZmOyBiYWNrZ3JvdW5kOiAjMDA5ZTk0OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7bWFyZ2luOiAxNXB4IDA7XCI+JHtcbiAgICAgIHNlbmRJbmZvLmNvZGUgPyBcIueri+WNs+mHjee9ruWvhueggVwiIDogXCLnoa7orqTorr7nva7pgq7nrrFcIlxuICAgIH08L2E+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDVweDsgYmFja2dyb3VuZDogI2YyZjJmMjtcIj7lpoLmnpzor6Xpgq7ku7bkuI3mmK/nlLHkvaDmnKzkurrmk43kvZzvvIzor7fli7/ov5vooYzmv4DmtLvvvIHlkKbliJnkvaDnmoTpgq7nrrHlsIbkvJrooqvku5bkurrnu5HlrprjgII8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZmFmYWZhOyBjb2xvcjogI2I0YjRiNDt0ZXh0LWFsaWduOiBjZW50ZXI7IGxpbmUtaGVpZ2h0OiA0NXB4OyBoZWlnaHQ6IDQ1cHg7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMDsgYm90dG9tOiAwO3dpZHRoOiAxMDAlO1wiPuezu+e7n+mCruS7tu+8jOivt+WLv+ebtOaOpeWbnuWkjTwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGAsIC8vIGh0bWwgYm9keVxuICB9KTtcblxuICByZXR1cm4gXCJNZXNzYWdlIHNlbnQ6ICVzXCIsIGluZm8ubWVzc2FnZUlkO1xuICAvLyBNZXNzYWdlIHNlbnQ6IDxiNjU4ZjhjYS02Mjk2LWNjZjQtODMwNi04N2Q1N2EwYjQzMjFAZXhhbXBsZS5jb20+XG5cbiAgLy8gUHJldmlldyBvbmx5IGF2YWlsYWJsZSB3aGVuIHNlbmRpbmcgdGhyb3VnaCBhbiBFdGhlcmVhbCBhY2NvdW50XG4gIC8vIGNvbnNvbGUubG9nKCdQcmV2aWV3IFVSTDogJXMnLCBub2RlbWFpbGVyLmdldFRlc3RNZXNzYWdlVXJsKGluZm8pKVxuICAvLyBQcmV2aWV3IFVSTDogaHR0cHM6Ly9ldGhlcmVhbC5lbWFpbC9tZXNzYWdlL1dhUUtNZ0tkZHhRRG9vdS4uLlxufVxuXG4vLyBtYWluKCkuY2F0Y2goY29uc29sZS5lcnJvcilcblxuZXhwb3J0IGRlZmF1bHQgc2VuZDtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "MailConfig.js"
      ],
      "names": [
        "send",
        "sendInfo",
        "transporter",
        "nodemailer",
        "createTransport",
        "host",
        "port",
        "secure",
        "auth",
        "user",
        "pass",
        "baseUrl",
        "config",
        "route",
        "type",
        "url",
        "qs",
        "stringify",
        "data",
        "console",
        "log",
        "info",
        "sendMail",
        "from",
        "to",
        "email",
        "subject",
        "text",
        "code",
        "expire",
        "html",
        "username",
        "messageId"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;AACA,eAAeA,IAAf,CAAoBC,QAApB,EAA8B;AAC5B;AACA;AACA;AAEA;AACA,MAAIC,WAAW,GAAGC,oBAAWC,eAAX,CAA2B;AAC3CC,IAAAA,IAAI,EAAE,aADqC;AAE3CC,IAAAA,IAAI,EAAE,GAFqC;AAG3CC,IAAAA,MAAM,EAAE,KAHmC;AAG5B;AACfC,IAAAA,IAAI,EAAE;AACJC,MAAAA,IAAI,EAAE,mBADF;AACuB;AAC3BC,MAAAA,IAAI,EAAE,kBAFF,CAEsB;;AAFtB;AAJqC,GAA3B,CAAlB,CAN4B,CAgB5B;AACA;AACA;AACA;AACA;AACA;;;AACA,QAAMC,OAAO,GAAGC,gBAAOD,OAAvB;AACA,QAAME,KAAK,GAAGZ,QAAQ,CAACa,IAAT,KAAkB,OAAlB,GAA4B,SAA5B,GAAwC,OAAtD;;AACA,MAAIC,GAAG,GAAI,GAAEJ,OAAQ,MAAKE,KAAM,GAAtB,GAA2BG,YAAGC,SAAH,CAAahB,QAAQ,CAACiB,IAAtB,CAArC;;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBL,GAAnB,EAzB4B,CA2B5B;;AACA,MAAIM,IAAI,GAAG,MAAMnB,WAAW,CAACoB,QAAZ,CAAqB;AACpCC,IAAAA,IAAI,EAAE,4BAD8B;AACA;AACpCC,IAAAA,EAAE,EAAEvB,QAAQ,CAACwB,KAFuB;AAEhB;AACpBC,IAAAA,OAAO,EACLzB,QAAQ,CAACQ,IAAT,KAAkB,EAAlB,IAAwBR,QAAQ,CAACa,IAAT,KAAkB,OAA1C,GACK,MAAKb,QAAQ,CAACQ,IAAK,WADxB,GAEI,eAN8B;AAMb;AACvBkB,IAAAA,IAAI,EAAG,oBAAmB1B,QAAQ,CAAC2B,IAAK,cAAa3B,QAAQ,CAAC4B,MAAO,EAPjC;AAOoC;AACxEC,IAAAA,IAAI,EAAG;AACX;AACA;AACA;AACA,oBAAoB7B,QAAQ,CAACQ,IAAK,mBAC5BR,QAAQ,CAAC4B,MACV,KACC5B,QAAQ,CAAC2B,IAAT,GACI,QADJ,GAEI,aAAa3B,QAAQ,CAACiB,IAAT,CAAca,QAChC;AACL,qBAAqBhB,GAAI,yGACnBd,QAAQ,CAAC2B,IAAT,GAAgB,QAAhB,GAA2B,QAC5B;AACL;AACA;AACA;AACA;AACA,KA1BwC,CA0BjC;;AA1BiC,GAArB,CAAjB;AA6BA,SAAO,oBAAoBP,IAAI,CAACW,SAAhC,CAzD4B,CA0D5B;AAEA;AACA;AACA;AACD,C,CAED;;;eAEehC,I",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "sourcesContent": [
        "import nodemailer from \"nodemailer\";\nimport config from \"../config\";\nimport qs from \"qs\";\n\n// async..await is not allowed in global scope, must use a wrapper\nasync function send(sendInfo) {\n  // Generate test SMTP service account from ethereal.email\n  // Only needed if you don't have a real mail account for testing\n  // let testAccount = await nodemailer.createTestAccount()\n\n  // create reusable transporter object using the default SMTP transport\n  let transporter = nodemailer.createTransport({\n    host: \"smtp.qq.com\",\n    port: 587,\n    secure: false, // true for 465, false for other ports\n    auth: {\n      user: \"1210109544@qq.com\", // generated ethereal user\n      pass: \"izwxryxhejwxfecg\", // generated ethereal password\n    },\n  });\n\n  // let sendInfo = {\n  //   code: '1234',\n  //   expire: '2019-10-01',\n  //   email: 'imoocbrian@qq.com',\n  //   user: 'Brian',\n  // }\n  const baseUrl = config.baseUrl;\n  const route = sendInfo.type === \"email\" ? \"confirm\" : \"reset\";\n  let url = `${baseUrl}/#/${route}?` + qs.stringify(sendInfo.data);\n  console.log(\"url\", url);\n\n  // send mail with defined transport object\n  let info = await transporter.sendMail({\n    from: '\"认证邮件\" <1210109544@qq.com>', // sender address\n    to: sendInfo.email, // list of receivers\n    subject:\n      sendInfo.user !== \"\" && sendInfo.type !== \"email\"\n        ? `你好，${sendInfo.user}！《来一碗》注册码`\n        : \"《来一碗》确认修改邮件链接\", // Subject line\n    text: `您在《来一碗》中注册，您的邀请码是${sendInfo.code},邀请码的过期时间: ${sendInfo.expire}`, // plain text body\n    html: `\n        <div style=\"border: 1px solid #dcdcdc;color: #676767;width: 600px; margin: 0 auto; padding-bottom: 50px;position: relative;\">\n        <div style=\"height: 60px; background: #393d49; line-height: 60px; color: #58a36f; font-size: 18px;padding-left: 10px;\">Imooc社区——欢迎来到官方社区</div>\n        <div style=\"padding: 25px\">\n          <div>您好，${sendInfo.user}，重置链接有效时间30分钟，请在${\n      sendInfo.expire\n    }之前${\n      sendInfo.code\n        ? \"重置您的密码\"\n        : \"修改您的邮箱为：\" + sendInfo.data.username\n    }：</div>\n          <a href=\"${url}\" style=\"padding: 10px 20px; color: #fff; background: #009e94; display: inline-block;margin: 15px 0;\">${\n      sendInfo.code ? \"立即重置密码\" : \"确认设置邮箱\"\n    }</a>\n          <div style=\"padding: 5px; background: #f2f2f2;\">如果该邮件不是由你本人操作，请勿进行激活！否则你的邮箱将会被他人绑定。</div>\n        </div>\n        <div style=\"background: #fafafa; color: #b4b4b4;text-align: center; line-height: 45px; height: 45px; position: absolute; left: 0; bottom: 0;width: 100%;\">系统邮件，请勿直接回复</div>\n    </div>\n    `, // html body\n  });\n\n  return \"Message sent: %s\", info.messageId;\n  // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n\n  // Preview only available when sending through an Ethereal account\n  // console.log('Preview URL: %s', nodemailer.getTestMessageUrl(info))\n  // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n}\n\n// main().catch(console.error)\n\nexport default send;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640328137377
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/common/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/common/utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/common/utils.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/common/utils.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/common/utils.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
        "sourceFileName": "utils.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getJWTPayload = exports.dirExists = exports.checkCode = void 0;\n\nvar _RedisConfig = require(\"../config/RedisConfig\");\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst getJWTPayload = token => {\n  return _jsonwebtoken.default.verify(token.split(\" \")[1], _config.default.JWT_SECRET);\n};\n\nexports.getJWTPayload = getJWTPayload;\n\nconst checkCode = async (key, value) => {\n  const redisData = await (0, _RedisConfig.getValue)(key);\n\n  if (typeof redisData === \"string\" && redisData.toLowerCase() === value.toLowerCase()) {\n    return true;\n  } else {\n    return false;\n  }\n}; // 判断该目录是否存在\n\n\nexports.checkCode = checkCode;\n\nconst getStats = path => {\n  return new Promise(resolve => {\n    _fs.default.stat(path, (err, stats) => err ? resolve(false) : resolve(stats));\n  });\n}; // 新建文件夹\n\n\nconst mkdir = dir => {\n  return new Promise(resolve => {\n    _fs.default.mkdir(dir, err => err ? resolve(false) : resolve(true));\n  });\n}; // 循环遍历，如果目录不存在，需要该目录\n\n\nconst dirExists = async dir => {\n  const isExists = await getStats(dir); // 如果该路径存在且不是文件，返回true\n\n  if (isExists && isExists.isDirectory()) {\n    return true;\n  } else if (isExists) {\n    // 路径存在，但是是文件，返回 false\n    return false;\n  } // 如果该路径不存在，需要创建\n\n\n  const tempDir = _path.default.parse(dir).dir; // 循环遍历， 递归判断\n\n\n  const status = await dirExists(tempDir);\n\n  if (status) {\n    const result = await mkdir(dir);\n    return result;\n  } else {\n    return false;\n  }\n};\n\nexports.dirExists = dirExists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sIm5hbWVzIjpbImdldEpXVFBheWxvYWQiLCJ0b2tlbiIsImp3dCIsInZlcmlmeSIsInNwbGl0IiwiY29uZmlnIiwiSldUX1NFQ1JFVCIsImNoZWNrQ29kZSIsImtleSIsInZhbHVlIiwicmVkaXNEYXRhIiwidG9Mb3dlckNhc2UiLCJnZXRTdGF0cyIsInBhdGgiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZzIiwic3RhdCIsImVyciIsInN0YXRzIiwibWtkaXIiLCJkaXIiLCJkaXJFeGlzdHMiLCJpc0V4aXN0cyIsImlzRGlyZWN0b3J5IiwidGVtcERpciIsInBhcnNlIiwic3RhdHVzIiwicmVzdWx0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxhQUFhLEdBQUlDLEtBQUQsSUFBVztBQUMvQixTQUFPQyxzQkFBSUMsTUFBSixDQUFXRixLQUFLLENBQUNHLEtBQU4sQ0FBWSxHQUFaLEVBQWlCLENBQWpCLENBQVgsRUFBZ0NDLGdCQUFPQyxVQUF2QyxDQUFQO0FBQ0QsQ0FGRDs7OztBQUlBLE1BQU1DLFNBQVMsR0FBRyxPQUFPQyxHQUFQLEVBQVlDLEtBQVosS0FBc0I7QUFDdEMsUUFBTUMsU0FBUyxHQUFHLE1BQU0sMkJBQVNGLEdBQVQsQ0FBeEI7O0FBQ0EsTUFDRSxPQUFPRSxTQUFQLEtBQXFCLFFBQXJCLElBQ0FBLFNBQVMsQ0FBQ0MsV0FBVixPQUE0QkYsS0FBSyxDQUFDRSxXQUFOLEVBRjlCLEVBR0U7QUFDQSxXQUFPLElBQVA7QUFDRCxHQUxELE1BS087QUFDTCxXQUFPLEtBQVA7QUFDRDtBQUNGLENBVkQsQyxDQVlBOzs7OztBQUNBLE1BQU1DLFFBQVEsR0FBSUMsSUFBRCxJQUFVO0FBQ3pCLFNBQU8sSUFBSUMsT0FBSixDQUFhQyxPQUFELElBQWE7QUFDOUJDLGdCQUFHQyxJQUFILENBQVFKLElBQVIsRUFBYyxDQUFDSyxHQUFELEVBQU1DLEtBQU4sS0FBaUJELEdBQUcsR0FBR0gsT0FBTyxDQUFDLEtBQUQsQ0FBVixHQUFvQkEsT0FBTyxDQUFDSSxLQUFELENBQTdEO0FBQ0QsR0FGTSxDQUFQO0FBR0QsQ0FKRCxDLENBTUE7OztBQUNBLE1BQU1DLEtBQUssR0FBSUMsR0FBRCxJQUFTO0FBQ3JCLFNBQU8sSUFBSVAsT0FBSixDQUFhQyxPQUFELElBQWE7QUFDOUJDLGdCQUFHSSxLQUFILENBQVNDLEdBQVQsRUFBZUgsR0FBRCxJQUFVQSxHQUFHLEdBQUdILE9BQU8sQ0FBQyxLQUFELENBQVYsR0FBb0JBLE9BQU8sQ0FBQyxJQUFELENBQXREO0FBQ0QsR0FGTSxDQUFQO0FBR0QsQ0FKRCxDLENBTUE7OztBQUNBLE1BQU1PLFNBQVMsR0FBRyxNQUFPRCxHQUFQLElBQWU7QUFDL0IsUUFBTUUsUUFBUSxHQUFHLE1BQU1YLFFBQVEsQ0FBQ1MsR0FBRCxDQUEvQixDQUQrQixDQUUvQjs7QUFDQSxNQUFJRSxRQUFRLElBQUlBLFFBQVEsQ0FBQ0MsV0FBVCxFQUFoQixFQUF3QztBQUN0QyxXQUFPLElBQVA7QUFDRCxHQUZELE1BRU8sSUFBSUQsUUFBSixFQUFjO0FBQ25CO0FBQ0EsV0FBTyxLQUFQO0FBQ0QsR0FSOEIsQ0FTL0I7OztBQUNBLFFBQU1FLE9BQU8sR0FBR1osY0FBS2EsS0FBTCxDQUFXTCxHQUFYLEVBQWdCQSxHQUFoQyxDQVYrQixDQVcvQjs7O0FBQ0EsUUFBTU0sTUFBTSxHQUFHLE1BQU1MLFNBQVMsQ0FBQ0csT0FBRCxDQUE5Qjs7QUFFQSxNQUFJRSxNQUFKLEVBQVk7QUFDVixVQUFNQyxNQUFNLEdBQUcsTUFBTVIsS0FBSyxDQUFDQyxHQUFELENBQTFCO0FBQ0EsV0FBT08sTUFBUDtBQUNELEdBSEQsTUFHTztBQUNMLFdBQU8sS0FBUDtBQUNEO0FBQ0YsQ0FwQkQiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9jb21tb24vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0VmFsdWUgfSBmcm9tIFwiLi4vY29uZmlnL1JlZGlzQ29uZmlnXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWdcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuY29uc3QgZ2V0SldUUGF5bG9hZCA9ICh0b2tlbikgPT4ge1xuICByZXR1cm4gand0LnZlcmlmeSh0b2tlbi5zcGxpdChcIiBcIilbMV0sIGNvbmZpZy5KV1RfU0VDUkVUKTtcbn07XG5cbmNvbnN0IGNoZWNrQ29kZSA9IGFzeW5jIChrZXksIHZhbHVlKSA9PiB7XG4gIGNvbnN0IHJlZGlzRGF0YSA9IGF3YWl0IGdldFZhbHVlKGtleSk7XG4gIGlmIChcbiAgICB0eXBlb2YgcmVkaXNEYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgcmVkaXNEYXRhLnRvTG93ZXJDYXNlKCkgPT09IHZhbHVlLnRvTG93ZXJDYXNlKClcbiAgKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG4vLyDliKTmlq3or6Xnm67lvZXmmK/lkKblrZjlnKhcbmNvbnN0IGdldFN0YXRzID0gKHBhdGgpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgZnMuc3RhdChwYXRoLCAoZXJyLCBzdGF0cykgPT4gKGVyciA/IHJlc29sdmUoZmFsc2UpIDogcmVzb2x2ZShzdGF0cykpKTtcbiAgfSk7XG59O1xuXG4vLyDmlrDlu7rmlofku7blpLlcbmNvbnN0IG1rZGlyID0gKGRpcikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBmcy5ta2RpcihkaXIsIChlcnIpID0+IChlcnIgPyByZXNvbHZlKGZhbHNlKSA6IHJlc29sdmUodHJ1ZSkpKTtcbiAgfSk7XG59O1xuXG4vLyDlvqrnjq/pgY3ljobvvIzlpoLmnpznm67lvZXkuI3lrZjlnKjvvIzpnIDopoHor6Xnm67lvZVcbmNvbnN0IGRpckV4aXN0cyA9IGFzeW5jIChkaXIpID0+IHtcbiAgY29uc3QgaXNFeGlzdHMgPSBhd2FpdCBnZXRTdGF0cyhkaXIpO1xuICAvLyDlpoLmnpzor6Xot6/lvoTlrZjlnKjkuJTkuI3mmK/mlofku7bvvIzov5Tlm550cnVlXG4gIGlmIChpc0V4aXN0cyAmJiBpc0V4aXN0cy5pc0RpcmVjdG9yeSgpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoaXNFeGlzdHMpIHtcbiAgICAvLyDot6/lvoTlrZjlnKjvvIzkvYbmmK/mmK/mlofku7bvvIzov5Tlm54gZmFsc2VcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8g5aaC5p6c6K+l6Lev5b6E5LiN5a2Y5Zyo77yM6ZyA6KaB5Yib5bu6XG4gIGNvbnN0IHRlbXBEaXIgPSBwYXRoLnBhcnNlKGRpcikuZGlyO1xuICAvLyDlvqrnjq/pgY3ljobvvIwg6YCS5b2S5Yik5patXG4gIGNvbnN0IHN0YXR1cyA9IGF3YWl0IGRpckV4aXN0cyh0ZW1wRGlyKTtcblxuICBpZiAoc3RhdHVzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWtkaXIoZGlyKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuZXhwb3J0IHsgZ2V0SldUUGF5bG9hZCwgY2hlY2tDb2RlLCBkaXJFeGlzdHMgfTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "utils.js"
      ],
      "names": [
        "getJWTPayload",
        "token",
        "jwt",
        "verify",
        "split",
        "config",
        "JWT_SECRET",
        "checkCode",
        "key",
        "value",
        "redisData",
        "toLowerCase",
        "getStats",
        "path",
        "Promise",
        "resolve",
        "fs",
        "stat",
        "err",
        "stats",
        "mkdir",
        "dir",
        "dirExists",
        "isExists",
        "isDirectory",
        "tempDir",
        "parse",
        "status",
        "result"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,aAAa,GAAIC,KAAD,IAAW;AAC/B,SAAOC,sBAAIC,MAAJ,CAAWF,KAAK,CAACG,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAX,EAAgCC,gBAAOC,UAAvC,CAAP;AACD,CAFD;;;;AAIA,MAAMC,SAAS,GAAG,OAAOC,GAAP,EAAYC,KAAZ,KAAsB;AACtC,QAAMC,SAAS,GAAG,MAAM,2BAASF,GAAT,CAAxB;;AACA,MACE,OAAOE,SAAP,KAAqB,QAArB,IACAA,SAAS,CAACC,WAAV,OAA4BF,KAAK,CAACE,WAAN,EAF9B,EAGE;AACA,WAAO,IAAP;AACD,GALD,MAKO;AACL,WAAO,KAAP;AACD;AACF,CAVD,C,CAYA;;;;;AACA,MAAMC,QAAQ,GAAIC,IAAD,IAAU;AACzB,SAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC9BC,gBAAGC,IAAH,CAAQJ,IAAR,EAAc,CAACK,GAAD,EAAMC,KAAN,KAAiBD,GAAG,GAAGH,OAAO,CAAC,KAAD,CAAV,GAAoBA,OAAO,CAACI,KAAD,CAA7D;AACD,GAFM,CAAP;AAGD,CAJD,C,CAMA;;;AACA,MAAMC,KAAK,GAAIC,GAAD,IAAS;AACrB,SAAO,IAAIP,OAAJ,CAAaC,OAAD,IAAa;AAC9BC,gBAAGI,KAAH,CAASC,GAAT,EAAeH,GAAD,IAAUA,GAAG,GAAGH,OAAO,CAAC,KAAD,CAAV,GAAoBA,OAAO,CAAC,IAAD,CAAtD;AACD,GAFM,CAAP;AAGD,CAJD,C,CAMA;;;AACA,MAAMO,SAAS,GAAG,MAAOD,GAAP,IAAe;AAC/B,QAAME,QAAQ,GAAG,MAAMX,QAAQ,CAACS,GAAD,CAA/B,CAD+B,CAE/B;;AACA,MAAIE,QAAQ,IAAIA,QAAQ,CAACC,WAAT,EAAhB,EAAwC;AACtC,WAAO,IAAP;AACD,GAFD,MAEO,IAAID,QAAJ,EAAc;AACnB;AACA,WAAO,KAAP;AACD,GAR8B,CAS/B;;;AACA,QAAME,OAAO,GAAGZ,cAAKa,KAAL,CAAWL,GAAX,EAAgBA,GAAhC,CAV+B,CAW/B;;;AACA,QAAMM,MAAM,GAAG,MAAML,SAAS,CAACG,OAAD,CAA9B;;AAEA,MAAIE,MAAJ,EAAY;AACV,UAAMC,MAAM,GAAG,MAAMR,KAAK,CAACC,GAAD,CAA1B;AACA,WAAOO,MAAP;AACD,GAHD,MAGO;AACL,WAAO,KAAP;AACD;AACF,CApBD",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
      "sourcesContent": [
        "import { getValue } from \"../config/RedisConfig\";\nimport config from \"../config\";\nimport jwt from \"jsonwebtoken\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nconst getJWTPayload = (token) => {\n  return jwt.verify(token.split(\" \")[1], config.JWT_SECRET);\n};\n\nconst checkCode = async (key, value) => {\n  const redisData = await getValue(key);\n  if (\n    typeof redisData === \"string\" &&\n    redisData.toLowerCase() === value.toLowerCase()\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\n// 判断该目录是否存在\nconst getStats = (path) => {\n  return new Promise((resolve) => {\n    fs.stat(path, (err, stats) => (err ? resolve(false) : resolve(stats)));\n  });\n};\n\n// 新建文件夹\nconst mkdir = (dir) => {\n  return new Promise((resolve) => {\n    fs.mkdir(dir, (err) => (err ? resolve(false) : resolve(true)));\n  });\n};\n\n// 循环遍历，如果目录不存在，需要该目录\nconst dirExists = async (dir) => {\n  const isExists = await getStats(dir);\n  // 如果该路径存在且不是文件，返回true\n  if (isExists && isExists.isDirectory()) {\n    return true;\n  } else if (isExists) {\n    // 路径存在，但是是文件，返回 false\n    return false;\n  }\n  // 如果该路径不存在，需要创建\n  const tempDir = path.parse(dir).dir;\n  // 循环遍历， 递归判断\n  const status = await dirExists(tempDir);\n\n  if (status) {\n    const result = await mkdir(dir);\n    return result;\n  } else {\n    return false;\n  }\n};\n\nexport { getJWTPayload, checkCode, dirExists };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640343361957
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/model/User.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/model/User.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/model/User.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/model/User.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
        "sourceFileName": "User.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelper = _interopRequireDefault(require(\"../config/DBHelper\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelper.default.Schema;\nconst UserSchema = new Schema({\n  username: {\n    type: String\n  },\n  name: {\n    type: String\n  },\n  password: {\n    type: String\n  },\n  created: {\n    type: Date\n  },\n  update: {\n    type: Date\n  },\n  gender: {\n    type: String,\n    default: \"\"\n  },\n  fav: {\n    type: Number,\n    default: 100\n  },\n  roles: {\n    type: Array,\n    default: [\"user\"]\n  },\n  pic: {\n    type: String,\n    default: \"/img/default.png\"\n  },\n  mobile: {\n    type: String,\n    match: /^1[3-9](\\d{9})$/,\n    default: \"\"\n  },\n  status: {\n    type: String,\n    default: \"0\"\n  },\n  location: {\n    type: String,\n    default: \"\"\n  },\n  regmark: {\n    type: String,\n    default: \"\"\n  },\n  isVip: {\n    type: String,\n    default: \"0\"\n  },\n  count: {\n    type: Number,\n    default: 0\n  }\n});\nUserSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\nUserSchema.pre(\"update\", function (next) {\n  this.updated = new Date();\n  next();\n});\nUserSchema.statics = {\n  findByID: function (id) {\n    return this.findOne({\n      _id: id\n    }, {\n      password: 0,\n      username: 0,\n      mobile: 0\n    });\n  },\n  getList: function (options, sort, page, limit) {\n    // 1. datepicker -> item: string, search -> array  startitme,endtime\n    // 2. radio -> key-value $in\n    // 3. select -> key-array $in\n    let query = {};\n\n    if (typeof options.search !== \"undefined\") {\n      if (typeof options.search === \"string\" && options.search.trim() !== \"\") {\n        if ([\"name\", \"username\"].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = {\n            $regex: new RegExp(options.search)\n          }; // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n\n      if (options.item === \"roles\") {\n        query = {\n          roles: {\n            $in: options.search\n          }\n        };\n      }\n\n      if (options.item === \"created\") {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = {\n          created: {\n            $gte: new Date(start),\n            $lt: new Date(end)\n          }\n        };\n      }\n    }\n\n    return this.find(query, {\n      password: 0,\n      mobile: 0\n    }).sort({\n      [sort]: -1\n    }).skip(page * limit).limit(limit);\n  },\n  countList: function (options) {\n    let query = {};\n\n    if (typeof options.search !== \"undefined\") {\n      if (typeof options.search === \"string\" && options.search.trim() !== \"\") {\n        if ([\"name\", \"username\"].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = {\n            $regex: new RegExp(options.search)\n          }; // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n\n      if (options.item === \"roles\") {\n        query = {\n          roles: {\n            $in: options.search\n          }\n        };\n      }\n\n      if (options.item === \"created\") {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = {\n          created: {\n            $gte: new Date(start),\n            $lt: new Date(end)\n          }\n        };\n      }\n    }\n\n    return this.find(query).countDocuments();\n  } // getTotalSign: function (page, limit) {\n  //   return this.find({})\n  //     .skip(page * limit)\n  //     .limit(limit)\n  //     .sort({ count: -1 })\n  // },\n  // getTotalSignCount: function (page, limit) {\n  //   return this.find({}).countDocuments()\n  // }\n\n};\n\nconst UserModel = _DBHelper.default.model(\"users\", UserSchema);\n\nvar _default = UserModel;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVzZXIuanMiXSwibmFtZXMiOlsiU2NoZW1hIiwibW9uZ29vc2UiLCJVc2VyU2NoZW1hIiwidXNlcm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwibmFtZSIsInBhc3N3b3JkIiwiY3JlYXRlZCIsIkRhdGUiLCJ1cGRhdGUiLCJnZW5kZXIiLCJkZWZhdWx0IiwiZmF2IiwiTnVtYmVyIiwicm9sZXMiLCJBcnJheSIsInBpYyIsIm1vYmlsZSIsIm1hdGNoIiwic3RhdHVzIiwibG9jYXRpb24iLCJyZWdtYXJrIiwiaXNWaXAiLCJjb3VudCIsInByZSIsIm5leHQiLCJ1cGRhdGVkIiwic3RhdGljcyIsImZpbmRCeUlEIiwiaWQiLCJmaW5kT25lIiwiX2lkIiwiZ2V0TGlzdCIsIm9wdGlvbnMiLCJzb3J0IiwicGFnZSIsImxpbWl0IiwicXVlcnkiLCJzZWFyY2giLCJ0cmltIiwiaW5jbHVkZXMiLCJpdGVtIiwiJHJlZ2V4IiwiUmVnRXhwIiwiJGluIiwic3RhcnQiLCJlbmQiLCIkZ3RlIiwiJGx0IiwiZmluZCIsInNraXAiLCJjb3VudExpc3QiLCJjb3VudERvY3VtZW50cyIsIlVzZXJNb2RlbCIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGtCQUFTRCxNQUF4QjtBQUNBLE1BQU1FLFVBQVUsR0FBRyxJQUFJRixNQUFKLENBQVc7QUFDNUJHLEVBQUFBLFFBQVEsRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FEa0I7QUFFNUJDLEVBQUFBLElBQUksRUFBRTtBQUFFRixJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FGc0I7QUFHNUJFLEVBQUFBLFFBQVEsRUFBRTtBQUFFSCxJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FIa0I7QUFJNUJHLEVBQUFBLE9BQU8sRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVLO0FBQVIsR0FKbUI7QUFLNUJDLEVBQUFBLE1BQU0sRUFBRTtBQUFFTixJQUFBQSxJQUFJLEVB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SixDQUFTcUMsS0FBVCxDQUFSO0FBQXlCRyxZQUFBQSxHQUFHLEVBQUUsSUFBSXhDLElBQUosQ0FBU3NDLEdBQVQ7QUFBOUI7QUFBWCxTQUFSO0FBQ0Q7QUFDRjs7QUFDRCxXQUFPLEtBQUtHLElBQUwsQ0FBVVosS0FBVixFQUFpQmUsY0FBakIsRUFBUDtBQUNELEdBaEVrQixDQWlFbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQXpFbUIsQ0FBckI7O0FBNEVBLE1BQU1DLFNBQVMsR0FBR3JELGtCQUFTc0QsS0FBVCxDQUFlLE9BQWYsRUFBd0JyRCxVQUF4QixDQUFsQjs7ZUFFZW9ELFMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9tb2RlbC8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIi4uL2NvbmZpZy9EQkhlbHBlclwiO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHVzZXJuYW1lOiB7IHR5cGU6IFN0cmluZyB9LFxuICBuYW1lOiB7IHR5cGU6IFN0cmluZyB9LFxuICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcgfSxcbiAgY3JlYXRlZDogeyB0eXBlOiBEYXRlIH0sXG4gIHVwZGF0ZTogeyB0eXBlOiBEYXRlIH0sXG4gIGdlbmRlcjogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgZmF2OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMTAwIH0sXG4gIHJvbGVzOiB7IHR5cGU6IEFycmF5LCBkZWZhdWx0OiBbXCJ1c2VyXCJdIH0sXG4gIHBpYzogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiL2ltZy9kZWZhdWx0LnBuZ1wiIH0sXG4gIG1vYmlsZTogeyB0eXBlOiBTdHJpbmcsIG1hdGNoOiAvXjFbMy05XShcXGR7OX0pJC8sIGRlZmF1bHQ6IFwiXCIgfSxcbiAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCIwXCIgfSxcbiAgbG9jYXRpb246IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIlwiIH0sXG4gIHJlZ21hcms6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIlwiIH0sXG4gIGlzVmlwOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCIwXCIgfSxcbiAgY291bnQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG59KTtcblxuVXNlclNjaGVtYS5wcmUoXCJzYXZlXCIsIGZ1bmN0aW9uIChuZXh0KSB7XG4gIHRoaXMuY3JlYXRlZCA9IG5ldyBEYXRlKCk7XG4gIG5leHQoKTtcbn0pO1xuXG5Vc2VyU2NoZW1hLnByZShcInVwZGF0ZVwiLCBmdW5jdGlvbiAobmV4dCkge1xuICB0aGlzLnVwZGF0ZWQgPSBuZXcgRGF0ZSgpO1xuICBuZXh0KCk7XG59KTtcblxuVXNlclNjaGVtYS5zdGF0aWNzID0ge1xuICBmaW5kQnlJRDogZnVuY3Rpb24gKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZE9uZShcbiAgICAgIHsgX2lkOiBpZCB9LFxuICAgICAge1xuICAgICAgICBwYXNzd29yZDogMCxcbiAgICAgICAgdXNlcm5hbWU6IDAsXG4gICAgICAgIG1vYmlsZTogMCxcbiAgICAgIH1cbiAgICApO1xuICB9LFxuICBnZXRMaXN0OiBmdW5jdGlvbiAob3B0aW9ucywgc29ydCwgcGFnZSwgbGltaXQpIHtcbiAgICAvLyAxLiBkYXRlcGlja2VyIC0+IGl0ZW06IHN0cmluZywgc2VhcmNoIC0+IGFycmF5ICBzdGFydGl0bWUsZW5kdGltZVxuICAgIC8vIDIuIHJhZGlvIC0+IGtleS12YWx1ZSAkaW5cbiAgICAvLyAzLiBzZWxlY3QgLT4ga2V5LWFycmF5ICRpblxuICAgIGxldCBxdWVyeSA9IHt9O1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zZWFyY2ggIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zZWFyY2ggPT09IFwic3RyaW5nXCIgJiYgb3B0aW9ucy5zZWFyY2gudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgIGlmIChbXCJuYW1lXCIsIFwidXNlcm5hbWVcIl0uaW5jbHVkZXMob3B0aW9ucy5pdGVtKSkge1xuICAgICAgICAgIC8vIOaooeeziuWMuemFjVxuICAgICAgICAgIHF1ZXJ5W29wdGlvbnMuaXRlbV0gPSB7ICRyZWdleDogbmV3IFJlZ0V4cChvcHRpb25zLnNlYXJjaCkgfTtcbiAgICAgICAgICAvLyA944CLIHsgbmFtZTogeyAkcmVnZXg6IC9hZG1pbi8gfSB9ID0+IG15c3FsIGxpa2UgJWFkbWluJVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJhZGlvXG4gICAgICAgICAgcXVlcnlbb3B0aW9ucy5pdGVtXSA9IG9wdGlvbnMuc2VhcmNoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5pdGVtID09PSBcInJvbGVzXCIpIHtcbiAgICAgICAgcXVlcnkgPSB7IHJvbGVzOiB7ICRpbjogb3B0aW9ucy5zZWFyY2ggfSB9O1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuaXRlbSA9PT0gXCJjcmVhdGVkXCIpIHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBvcHRpb25zLnNlYXJjaFswXTtcbiAgICAgICAgY29uc3QgZW5kID0gb3B0aW9ucy5zZWFyY2hbMV07XG4gICAgICAgIHF1ZXJ5ID0geyBjcmVhdGVkOiB7ICRndGU6IG5ldyBEYXRlKHN0YXJ0KSwgJGx0OiBuZXcgRGF0ZShlbmQpIH0gfTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmluZChxdWVyeSwgeyBwYXNzd29yZDogMCwgbW9iaWxlOiAwIH0pXG4gICAgICAuc29ydCh7IFtzb3J0XTogLTEgfSlcbiAgICAgIC5za2lwKHBhZ2UgKiBsaW1pdClcbiAgICAgIC5saW1pdChsaW1pdCk7XG4gIH0sXG4gIGNvdW50TGlzdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBsZXQgcXVlcnkgPSB7fTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2VhcmNoICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2VhcmNoID09PSBcInN0cmluZ1wiICYmIG9wdGlvbnMuc2VhcmNoLnRyaW0oKSAhPT0gXCJcIikge1xuICAgICAgICBpZiAoW1wibmFtZVwiLCBcInVzZXJuYW1lXCJdLmluY2x1ZGVzKG9wdGlvbnMuaXRlbSkpIHtcbiAgICAgICAgICAvLyDmqKHns4rljLnphY1cbiAgICAgICAgICBxdWVyeVtvcHRpb25zLml0ZW1dID0geyAkcmVnZXg6IG5ldyBSZWdFeHAob3B0aW9ucy5zZWFyY2gpIH07XG4gICAgICAgICAgLy8gPeOAiyB7IG5hbWU6IHsgJHJlZ2V4OiAvYWRtaW4vIH0gfSA9PiBteXNxbCBsaWtlICVhZG1pbiVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyByYWRpb1xuICAgICAgICAgIHF1ZXJ5W29wdGlvbnMuaXRlbV0gPSBvcHRpb25zLnNlYXJjaDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuaXRlbSA9PT0gXCJyb2xlc1wiKSB7XG4gICAgICAgIHF1ZXJ5ID0geyByb2xlczogeyAkaW46IG9wdGlvbnMuc2VhcmNoIH0gfTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLml0ZW0gPT09IFwiY3JlYXRlZFwiKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gb3B0aW9ucy5zZWFyY2hbMF07XG4gICAgICAgIGNvbnN0IGVuZCA9IG9wdGlvbnMuc2VhcmNoWzFdO1xuICAgICAgICBxdWVyeSA9IHsgY3JlYXRlZDogeyAkZ3RlOiBuZXcgRGF0ZShzdGFydCksICRsdDogbmV3IERhdGUoZW5kKSB9IH07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZpbmQocXVlcnkpLmNvdW50RG9jdW1lbnRzKCk7XG4gIH0sXG4gIC8vIGdldFRvdGFsU2lnbjogZnVuY3Rpb24gKHBhZ2UsIGxpbWl0KSB7XG4gIC8vICAgcmV0dXJuIHRoaXMuZmluZCh7fSlcbiAgLy8gICAgIC5za2lwKHBhZ2UgKiBsaW1pdClcbiAgLy8gICAgIC5saW1pdChsaW1pdClcbiAgLy8gICAgIC5zb3J0KHsgY291bnQ6IC0xIH0pXG4gIC8vIH0sXG4gIC8vIGdldFRvdGFsU2lnbkNvdW50OiBmdW5jdGlvbiAocGFnZSwgbGltaXQpIHtcbiAgLy8gICByZXR1cm4gdGhpcy5maW5kKHt9KS5jb3VudERvY3VtZW50cygpXG4gIC8vIH1cbn07XG5cbmNvbnN0IFVzZXJNb2RlbCA9IG1vbmdvb3NlLm1vZGVsKFwidXNlcnNcIiwgVXNlclNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJNb2RlbDtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "User.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "UserSchema",
        "username",
        "type",
        "String",
        "name",
        "password",
        "created",
        "Date",
        "update",
        "gender",
        "default",
        "fav",
        "Number",
        "roles",
        "Array",
        "pic",
        "mobile",
        "match",
        "status",
        "location",
        "regmark",
        "isVip",
        "count",
        "pre",
        "next",
        "updated",
        "statics",
        "findByID",
        "id",
        "findOne",
        "_id",
        "getList",
        "options",
        "sort",
        "page",
        "limit",
        "query",
        "search",
        "trim",
        "includes",
        "item",
        "$regex",
        "RegExp",
        "$in",
        "start",
        "end",
        "$gte",
        "$lt",
        "find",
        "skip",
        "countList",
        "countDocuments",
        "UserModel",
        "model"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "sourcesContent": [
        "import mongoose from \"../config/DBHelper\";\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n  username: { type: String },\n  name: { type: String },\n  password: { type: String },\n  created: { type: Date },\n  update: { type: Date },\n  gender: { type: String, default: \"\" },\n  fav: { type: Number, default: 100 },\n  roles: { type: Array, default: [\"user\"] },\n  pic: { type: String, default: \"/img/default.png\" },\n  mobile: { type: String, match: /^1[3-9](\\d{9})$/, default: \"\" },\n  status: { type: String, default: \"0\" },\n  location: { type: String, default: \"\" },\n  regmark: { type: String, default: \"\" },\n  isVip: { type: String, default: \"0\" },\n  count: { type: Number, default: 0 },\n});\n\nUserSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\n\nUserSchema.pre(\"update\", function (next) {\n  this.updated = new Date();\n  next();\n});\n\nUserSchema.statics = {\n  findByID: function (id) {\n    return this.findOne(\n      { _id: id },\n      {\n        password: 0,\n        username: 0,\n        mobile: 0,\n      }\n    );\n  },\n  getList: function (options, sort, page, limit) {\n    // 1. datepicker -> item: string, search -> array  startitme,endtime\n    // 2. radio -> key-value $in\n    // 3. select -> key-array $in\n    let query = {};\n    if (typeof options.search !== \"undefined\") {\n      if (typeof options.search === \"string\" && options.search.trim() !== \"\") {\n        if ([\"name\", \"username\"].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = { $regex: new RegExp(options.search) };\n          // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n      if (options.item === \"roles\") {\n        query = { roles: { $in: options.search } };\n      }\n      if (options.item === \"created\") {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = { created: { $gte: new Date(start), $lt: new Date(end) } };\n      }\n    }\n    return this.find(query, { password: 0, mobile: 0 })\n      .sort({ [sort]: -1 })\n      .skip(page * limit)\n      .limit(limit);\n  },\n  countList: function (options) {\n    let query = {};\n    if (typeof options.search !== \"undefined\") {\n      if (typeof options.search === \"string\" && options.search.trim() !== \"\") {\n        if ([\"name\", \"username\"].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = { $regex: new RegExp(options.search) };\n          // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n      if (options.item === \"roles\") {\n        query = { roles: { $in: options.search } };\n      }\n      if (options.item === \"created\") {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = { created: { $gte: new Date(start), $lt: new Date(end) } };\n      }\n    }\n    return this.find(query).countDocuments();\n  },\n  // getTotalSign: function (page, limit) {\n  //   return this.find({})\n  //     .skip(page * limit)\n  //     .limit(limit)\n  //     .sort({ count: -1 })\n  // },\n  // getTotalSignCount: function (page, limit) {\n  //   return this.find({}).countDocuments()\n  // }\n};\n\nconst UserModel = mongoose.model(\"users\", UserSchema);\n\nexport default UserModel;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640144050351
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/config/DBHelper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/config/DBHelper.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/config/DBHelper.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/config/DBHelper.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
        "sourceFileName": "DBHelper.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _index = _interopRequireDefault(require(\"./index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 创建连接\n_mongoose.default.connect(_index.default.DB_URL, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n}); // 连接成功\n\n\n_mongoose.default.connection.on(\"connected\", () => {\n  console.log(\"mongoose connection open to \" + _index.default.DB_URL);\n}); // 连接异常\n\n\n_mongoose.default.connection.on(\"error\", err => {\n  console.log(\"mongoose connection error: \" + err);\n}); // 断开连接\n\n\n_mongoose.default.connection.on(\"disconnected\", () => {\n  console.log(\"mongoose connection disconnected\");\n});\n\nvar _default = _mongoose.default;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRCSGVscGVyLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiY29ubmVjdCIsImNvbmZpZyIsIkRCX1VSTCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNvbm5lY3Rpb24iLCJvbiIsImNvbnNvbGUiLCJsb2ciLCJlcnIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBO0FBQ0FBLGtCQUFTQyxPQUFULENBQWlCQyxlQUFPQyxNQUF4QixFQUFnQztBQUM5QkMsRUFBQUEsZUFBZSxFQUFFLElBRGE7QUFFOUJDLEVBQUFBLGtCQUFrQixFQUFFO0FBRlUsQ0FBaEMsRSxDQUtBOzs7QUFDQUwsa0JBQVNNLFVBQVQsQ0FBb0JDLEVBQXBCLENBQXVCLFdBQXZCLEVBQW9DLE1BQU07QUFDeENDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGlDQUFpQ1AsZUFBT0MsTUFBcEQ7QUFDRCxDQUZELEUsQ0FJQTs7O0FBQ0FILGtCQUFTTSxVQUFULENBQW9CQyxFQUFwQixDQUF1QixPQUF2QixFQUFpQ0csR0FBRCxJQUFTO0FBQ3ZDRixFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxnQ0FBZ0NDLEdBQTVDO0FBQ0QsQ0FGRCxFLENBSUE7OztBQUNBVixrQkFBU00sVUFBVCxDQUFvQkMsRUFBcEIsQ0FBdUIsY0FBdkIsRUFBdUMsTUFBTTtBQUMzQ0MsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksa0NBQVo7QUFDRCxDQUZEOztlQUllVCxpQiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL2NvbmZpZy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuL2luZGV4XCI7XG5cbi8vIOWIm+W7uui/nuaOpVxubW9uZ29vc2UuY29ubmVjdChjb25maWcuREJfVVJMLCB7XG4gIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxufSk7XG5cbi8vIOi/nuaOpeaIkOWKn1xubW9uZ29vc2UuY29ubmVjdGlvbi5vbihcImNvbm5lY3RlZFwiLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwibW9uZ29vc2UgY29ubmVjdGlvbiBvcGVuIHRvIFwiICsgY29uZmlnLkRCX1VSTCk7XG59KTtcblxuLy8g6L+e5o6l5byC5bi4XG5tb25nb29zZS5jb25uZWN0aW9uLm9uKFwiZXJyb3JcIiwgKGVycikgPT4ge1xuICBjb25zb2xlLmxvZyhcIm1vbmdvb3NlIGNvbm5lY3Rpb24gZXJyb3I6IFwiICsgZXJyKTtcbn0pO1xuXG4vLyDmlq3lvIDov57mjqVcbm1vbmdvb3NlLmNvbm5lY3Rpb24ub24oXCJkaXNjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhcIm1vbmdvb3NlIGNvbm5lY3Rpb24gZGlzY29ubmVjdGVkXCIpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "DBHelper.js"
      ],
      "names": [
        "mongoose",
        "connect",
        "config",
        "DB_URL",
        "useNewUrlParser",
        "useUnifiedTopology",
        "connection",
        "on",
        "console",
        "log",
        "err"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA;AACAA,kBAASC,OAAT,CAAiBC,eAAOC,MAAxB,EAAgC;AAC9BC,EAAAA,eAAe,EAAE,IADa;AAE9BC,EAAAA,kBAAkB,EAAE;AAFU,CAAhC,E,CAKA;;;AACAL,kBAASM,UAAT,CAAoBC,EAApB,CAAuB,WAAvB,EAAoC,MAAM;AACxCC,EAAAA,OAAO,CAACC,GAAR,CAAY,iCAAiCP,eAAOC,MAApD;AACD,CAFD,E,CAIA;;;AACAH,kBAASM,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAAiCG,GAAD,IAAS;AACvCF,EAAAA,OAAO,CAACC,GAAR,CAAY,gCAAgCC,GAA5C;AACD,CAFD,E,CAIA;;;AACAV,kBAASM,UAAT,CAAoBC,EAApB,CAAuB,cAAvB,EAAuC,MAAM;AAC3CC,EAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AACD,CAFD;;eAIeT,iB",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/config/",
      "sourcesContent": [
        "import mongoose from \"mongoose\";\nimport config from \"./index\";\n\n// 创建连接\nmongoose.connect(config.DB_URL, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n});\n\n// 连接成功\nmongoose.connection.on(\"connected\", () => {\n  console.log(\"mongoose connection open to \" + config.DB_URL);\n});\n\n// 连接异常\nmongoose.connection.on(\"error\", (err) => {\n  console.log(\"mongoose connection error: \" + err);\n});\n\n// 断开连接\nmongoose.connection.on(\"disconnected\", () => {\n  console.log(\"mongoose connection disconnected\");\n});\n\nexport default mongoose;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638452248985
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/common/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/common/errorHandle.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/common/errorHandle.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/common/errorHandle.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/common/errorHandle.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
        "sourceFileName": "errorHandle.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _default = (ctx, next) => {\n  return next().catch(err => {\n    if (401 == err.status) {\n      ctx.status = 401;\n      ctx.body = {\n        code: 401,\n        msg: \"Protected resource, use Authorization header to get access\\n\"\n      };\n    } else {\n      ctx.status = err.status || 500;\n      ctx.body = Object.assign({\n        code: 500,\n        msg: err.message\n      }, process.env.NODE_ENV === \"dev\" ? {\n        stack: err.stack\n      } : {});\n    }\n  });\n};\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9ySGFuZGxlLmpzIl0sIm5hbWVzIjpbImN0eCIsIm5leHQiLCJjYXRjaCIsImVyciIsInN0YXR1cyIsImJvZHkiLCJjb2RlIiwibXNnIiwiT2JqZWN0IiwiYXNzaWduIiwibWVzc2FnZSIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsInN0YWNrIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O2VBQWUsQ0FBQ0EsR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDNUIsU0FBT0EsSUFBSSxHQUFHQyxLQUFQLENBQWNDLEdBQUQsSUFBUztBQUMzQixRQUFJLE9BQU9BLEdBQUcsQ0FBQ0MsTUFBZixFQUF1QjtBQUNyQkosTUFBQUEsR0FBRyxDQUFDSSxNQUFKLEdBQWEsR0FBYjtBQUNBSixNQUFBQSxHQUFHLENBQUNLLElBQUosR0FBVztBQUNUQyxRQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUQyxRQUFBQSxHQUFHLEVBQUU7QUFGSSxPQUFYO0FBSUQsS0FORCxNQU1PO0FBQ0xQLE1BQUFBLEdBQUcsQ0FBQ0ksTUFBSixHQUFhRCxHQUFHLENBQUNDLE1BQUosSUFBYyxHQUEzQjtBQUNBSixNQUFBQSxHQUFHLENBQUNLLElBQUosR0FBV0csTUFBTSxDQUFDQyxNQUFQLENBQ1Q7QUFDRUgsUUFBQUEsSUFBSSxFQUFFLEdBRFI7QUFFRUMsUUFBQUEsR0FBRyxFQUFFSixHQUFHLENBQUNPO0FBRlgsT0FEUyxFQUtUQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBWixLQUF5QixLQUF6QixHQUFpQztBQUFFQyxRQUFBQSxLQUFLLEVBQUVYLEdBQUcsQ0FBQ1c7QUFBYixPQUFqQyxHQUF3RCxFQUwvQyxDQUFYO0FBT0Q7QUFDRixHQWpCTSxDQUFQO0FBa0JELEMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9jb21tb24vIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgKGN0eCwgbmV4dCkgPT4ge1xuICByZXR1cm4gbmV4dCgpLmNhdGNoKChlcnIpID0+IHtcbiAgICBpZiAoNDAxID09IGVyci5zdGF0dXMpIHtcbiAgICAgIGN0eC5zdGF0dXMgPSA0MDE7XG4gICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtc2c6IFwiUHJvdGVjdGVkIHJlc291cmNlLCB1c2UgQXV0aG9yaXphdGlvbiBoZWFkZXIgdG8gZ2V0IGFjY2Vzc1xcblwiLFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LnN0YXR1cyA9IGVyci5zdGF0dXMgfHwgNTAwO1xuICAgICAgY3R4LmJvZHkgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICB7XG4gICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgIG1zZzogZXJyLm1lc3NhZ2UsXG4gICAgICAgIH0sXG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldlwiID8geyBzdGFjazogZXJyLnN0YWNrIH0gOiB7fVxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "errorHandle.js"
      ],
      "names": [
        "ctx",
        "next",
        "catch",
        "err",
        "status",
        "body",
        "code",
        "msg",
        "Object",
        "assign",
        "message",
        "process",
        "env",
        "NODE_ENV",
        "stack"
      ],
      "mappings": ";;;;;;;eAAe,CAACA,GAAD,EAAMC,IAAN,KAAe;AAC5B,SAAOA,IAAI,GAAGC,KAAP,CAAcC,GAAD,IAAS;AAC3B,QAAI,OAAOA,GAAG,CAACC,MAAf,EAAuB;AACrBJ,MAAAA,GAAG,CAACI,MAAJ,GAAa,GAAb;AACAJ,MAAAA,GAAG,CAACK,IAAJ,GAAW;AACTC,QAAAA,IAAI,EAAE,GADG;AAETC,QAAAA,GAAG,EAAE;AAFI,OAAX;AAID,KAND,MAMO;AACLP,MAAAA,GAAG,CAACI,MAAJ,GAAaD,GAAG,CAACC,MAAJ,IAAc,GAA3B;AACAJ,MAAAA,GAAG,CAACK,IAAJ,GAAWG,MAAM,CAACC,MAAP,CACT;AACEH,QAAAA,IAAI,EAAE,GADR;AAEEC,QAAAA,GAAG,EAAEJ,GAAG,CAACO;AAFX,OADS,EAKTC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,KAAzB,GAAiC;AAAEC,QAAAA,KAAK,EAAEX,GAAG,CAACW;AAAb,OAAjC,GAAwD,EAL/C,CAAX;AAOD;AACF,GAjBM,CAAP;AAkBD,C",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/common/",
      "sourcesContent": [
        "export default (ctx, next) => {\n  return next().catch((err) => {\n    if (401 == err.status) {\n      ctx.status = 401;\n      ctx.body = {\n        code: 401,\n        msg: \"Protected resource, use Authorization header to get access\\n\",\n      };\n    } else {\n      ctx.status = err.status || 500;\n      ctx.body = Object.assign(\n        {\n          code: 500,\n          msg: err.message,\n        },\n        process.env.NODE_ENV === \"dev\" ? { stack: err.stack } : {}\n      );\n    }\n  });\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1638950117174
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/model/Post.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/model/Post.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/model/Post.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/model/Post.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
        "sourceFileName": "Post.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelper = _interopRequireDefault(require(\"../config/DBHelper\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelper.default.Schema;\nconst PostSchema = new Schema({\n  uid: {\n    type: String,\n    ref: \"users\"\n  },\n  title: {\n    type: String\n  },\n  content: {\n    type: String\n  },\n  catalog: {\n    type: String\n  },\n  isEnd: {\n    type: String,\n    default: \"0\"\n  },\n  isTop: {\n    type: String,\n    default: \"0\"\n  },\n  reads: {\n    type: String,\n    default: 0\n  },\n  answer: {\n    type: Number,\n    default: 0\n  },\n  status: {\n    type: String,\n    default: \"0\"\n  },\n  topNum: {\n    type: String\n  },\n  tags: {\n    type: Array,\n    default: []\n  },\n  fav: {\n    type: Number\n  },\n  created: {\n    type: Date\n  },\n  sort: {\n    type: String,\n    default: 100\n  }\n});\nPostSchema.virtual(\"user\", {\n  ref: \"users\",\n  localField: \"uid\",\n  foreignField: \"_id\"\n});\nPostSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\nPostSchema.statics = {\n  /**\n   * 获取文章列表数据\n   * @param {Object} options 筛选条件\n   * @param {String} sort 排序方式\n   * @param {Number} page 分页页数\n   * @param {Number} limit 分页条数\n   */\n  getList: function (options, sort, page, limit) {\n    return this.find(options).sort({\n      [sort]: -1\n    }).skip(page * limit).limit(limit).populate({\n      path: \"uid\",\n      select: \"name isVip pic\"\n    });\n  },\n  countList: function (options) {\n    return this.find(options).countDocuments();\n  },\n  getTopWeek: function () {\n    return this.find({\n      // $gte 大于等于\n      created: {\n        $gte: (0, _dayjs.default)().subtract(7, \"days\")\n      }\n    }, {\n      answer: 1,\n      title: 1\n    }).sort({\n      answer: -1\n    }).limit(15);\n  }\n};\n\nconst PostModel = _DBHelper.default.model(\"posts\", PostSchema);\n\nvar _default = PostModel;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBvc3QuanMiXSwibmFtZXMiOlsiU2NoZW1hIiwibW9uZ29vc2UiLCJQb3N0U2NoZW1hIiwidWlkIiwidHlwZSIsIlN0cmluZyIsInJlZiIsInRpdGxlIiwiY29udGVudCIsImNhdGFsb2ciLCJpc0VuZCIsImRlZmF1bHQiLCJpc1RvcCIsInJlYWRzIiwiYW5zd2VyIiwiTnVtYmVyIiwic3RhdHVzIiwidG9wTnVtIiwidGFncyIsIkFycmF5IiwiZmF2IiwiY3JlYXRlZCIsIkRhdGUiLCJzb3J0IiwidmlydHVhbCIsImxvY2FsRmllbGQiLCJmb3JlaWduRmllbGQiLCJwcmUiLCJuZXh0Iiwic3RhdGljcyIsImdldExpc3QiLCJvcHRpb25zIiwicGFnZSIsImxpbWl0IiwiZmluZCIsInNraXAiLCJwb3B1bGF0ZSIsInBhdGgiLCJzZWxlY3QiLCJjb3VudExpc3QiLCJjb3VudERvY3VtZW50cyIsImdldFRvcFdlZWsiLCIkZ3RlIiwic3VidHJhY3QiLCJQb3N0TW9kZWwiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHQyxrQkFBU0QsTUFBeEI7QUFFQSxNQUFNRSxVQUFVLEdBQUcsSUFBSUYsTUFBSixDQUFXO0FBQzVCRyxFQUFBQSxHQUFHLEVBQUU7QUFBRUMsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxHQUFHLEVBQUU7QUFBckIsR0FEdUI7QUFFNUJDLEVBQUFBLEtBQUssRUFBRTtBQUFFSCxJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FGcUI7QUFHNUJHLEVBQUFBLE9BQU8sRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FIbUI7QUFJNUJJLEVBQUFBLE9BQU8sRUFBRTtBQUFFTCxJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FKbUI7QUFLNUJLLEVBQUFBLEtBQUssRUFBRTtBQUFFTixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JNLElBQUFBLE9BQU8sRUFB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QUFTNEMsS0FBVCxDQUFlLE9BQWYsRUFBd0IzQyxVQUF4QixDQUFsQjs7ZUFFZTBDLFMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9tb2RlbC8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIi4uL2NvbmZpZy9EQkhlbHBlclwiO1xuaW1wb3J0IG1vbWVudCBmcm9tIFwiZGF5anNcIjtcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xuXG5jb25zdCBQb3N0U2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHVpZDogeyB0eXBlOiBTdHJpbmcsIHJlZjogXCJ1c2Vyc1wiIH0sXG4gIHRpdGxlOiB7IHR5cGU6IFN0cmluZyB9LFxuICBjb250ZW50OiB7IHR5cGU6IFN0cmluZyB9LFxuICBjYXRhbG9nOiB7IHR5cGU6IFN0cmluZyB9LFxuICBpc0VuZDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiMFwiIH0sXG4gIGlzVG9wOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCIwXCIgfSxcbiAgcmVhZHM6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAwIH0sXG4gIGFuc3dlcjogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCIwXCIgfSxcbiAgdG9wTnVtOiB7IHR5cGU6IFN0cmluZyB9LFxuICB0YWdzOiB7IHR5cGU6IEFycmF5LCBkZWZhdWx0OiBbXSB9LFxuICBmYXY6IHsgdHlwZTogTnVtYmVyIH0sXG4gIGNyZWF0ZWQ6IHsgdHlwZTogRGF0ZSB9LFxuICBzb3J0OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogMTAwIH0sXG59KTtcblxuUG9zdFNjaGVtYS52aXJ0dWFsKFwidXNlclwiLCB7XG4gIHJlZjogXCJ1c2Vyc1wiLFxuICBsb2NhbEZpZWxkOiBcInVpZFwiLFxuICBmb3JlaWduRmllbGQ6IFwiX2lkXCIsXG59KTtcblxuUG9zdFNjaGVtYS5wcmUoXCJzYXZlXCIsIGZ1bmN0aW9uIChuZXh0KSB7XG4gIHRoaXMuY3JlYXRlZCA9IG5ldyBEYXRlKCk7XG4gIG5leHQoKTtcbn0pO1xuXG5Qb3N0U2NoZW1hLnN0YXRpY3MgPSB7XG4gIC8qKlxuICAgKiDojrflj5bmlofnq6DliJfooajmlbDmja5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMg562b6YCJ5p2h5Lu2XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzb3J0IOaOkuW6j+aWueW8j1xuICAgKiBAcGFyYW0ge051bWJlcn0gcGFnZSDliIbpobXpobXmlbBcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGxpbWl0IOWIhumhteadoeaVsFxuICAgKi9cbiAgZ2V0TGlzdDogZnVuY3Rpb24gKG9wdGlvbnMsIHNvcnQsIHBhZ2UsIGxpbWl0KSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZChvcHRpb25zKVxuICAgICAgLnNvcnQoeyBbc29ydF06IC0xIH0pXG4gICAgICAuc2tpcChwYWdlICogbGltaXQpXG4gICAgICAubGltaXQobGltaXQpXG4gICAgICAucG9wdWxhdGUoe1xuICAgICAgICBwYXRoOiBcInVpZFwiLFxuICAgICAgICBzZWxlY3Q6IFwibmFtZSBpc1ZpcCBwaWNcIixcbiAgICAgIH0pO1xuICB9LFxuICBjb3VudExpc3Q6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZChvcHRpb25zKS5jb3VudERvY3VtZW50cygpO1xuICB9LFxuICBnZXRUb3BXZWVrOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZChcbiAgICAgIHtcbiAgICAgICAgLy8gJGd0ZSDlpKfkuo7nrYnkuo5cbiAgICAgICAgY3JlYXRlZDoge1xuICAgICAgICAgICRndGU6IG1vbWVudCgpLnN1YnRyYWN0KDcsIFwiZGF5c1wiKSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFuc3dlcjogMSxcbiAgICAgICAgdGl0bGU6IDEsXG4gICAgICB9XG4gICAgKVxuICAgICAgLnNvcnQoeyBhbnN3ZXI6IC0xIH0pXG4gICAgICAubGltaXQoMTUpO1xuICB9LFxufTtcblxuY29uc3QgUG9zdE1vZGVsID0gbW9uZ29vc2UubW9kZWwoXCJwb3N0c1wiLCBQb3N0U2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgUG9zdE1vZGVsO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "Post.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "PostSchema",
        "uid",
        "type",
        "String",
        "ref",
        "title",
        "content",
        "catalog",
        "isEnd",
        "default",
        "isTop",
        "reads",
        "answer",
        "Number",
        "status",
        "topNum",
        "tags",
        "Array",
        "fav",
        "created",
        "Date",
        "sort",
        "virtual",
        "localField",
        "foreignField",
        "pre",
        "next",
        "statics",
        "getList",
        "options",
        "page",
        "limit",
        "find",
        "skip",
        "populate",
        "path",
        "select",
        "countList",
        "countDocuments",
        "getTopWeek",
        "$gte",
        "subtract",
        "PostModel",
        "model"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "sourcesContent": [
        "import mongoose from \"../config/DBHelper\";\nimport moment from \"dayjs\";\n\nconst Schema = mongoose.Schema;\n\nconst PostSchema = new Schema({\n  uid: { type: String, ref: \"users\" },\n  title: { type: String },\n  content: { type: String },\n  catalog: { type: String },\n  isEnd: { type: String, default: \"0\" },\n  isTop: { type: String, default: \"0\" },\n  reads: { type: String, default: 0 },\n  answer: { type: Number, default: 0 },\n  status: { type: String, default: \"0\" },\n  topNum: { type: String },\n  tags: { type: Array, default: [] },\n  fav: { type: Number },\n  created: { type: Date },\n  sort: { type: String, default: 100 },\n});\n\nPostSchema.virtual(\"user\", {\n  ref: \"users\",\n  localField: \"uid\",\n  foreignField: \"_id\",\n});\n\nPostSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\n\nPostSchema.statics = {\n  /**\n   * 获取文章列表数据\n   * @param {Object} options 筛选条件\n   * @param {String} sort 排序方式\n   * @param {Number} page 分页页数\n   * @param {Number} limit 分页条数\n   */\n  getList: function (options, sort, page, limit) {\n    return this.find(options)\n      .sort({ [sort]: -1 })\n      .skip(page * limit)\n      .limit(limit)\n      .populate({\n        path: \"uid\",\n        select: \"name isVip pic\",\n      });\n  },\n  countList: function (options) {\n    return this.find(options).countDocuments();\n  },\n  getTopWeek: function () {\n    return this.find(\n      {\n        // $gte 大于等于\n        created: {\n          $gte: moment().subtract(7, \"days\"),\n        },\n      },\n      {\n        answer: 1,\n        title: 1,\n      }\n    )\n      .sort({ answer: -1 })\n      .limit(15);\n  },\n};\n\nconst PostModel = mongoose.model(\"posts\", PostSchema);\n\nexport default PostModel;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640138752566
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/contentRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/contentRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/contentRouter.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/contentRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "contentRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _contentController = _interopRequireDefault(require(\"../api/contentController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.prefix(\"/content\");\nrouter.post(\"/upload\", _contentController.default.uploadImg);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRlbnRSb3V0ZXIuanMiXSwibmFtZXMiOlsicm91dGVyIiwiUm91dGVyIiwicHJlZml4IiwicG9zdCIsImNvbnRlbnRDb250cm9sbGVyIiwidXBsb2FkSW1nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsa0JBQUosRUFBZjtBQUVBRCxNQUFNLENBQUNFLE1BQVAsQ0FBYyxVQUFkO0FBRUFGLE1BQU0sQ0FBQ0csSUFBUCxDQUFZLFNBQVosRUFBdUJDLDJCQUFrQkMsU0FBekM7ZUFFZUwsTSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUm91dGVyIGZyb20gXCJrb2Etcm91dGVyXCI7XG5pbXBvcnQgY29udGVudENvbnRyb2xsZXIgZnJvbSBcIi4uL2FwaS9jb250ZW50Q29udHJvbGxlclwiO1xuXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKCk7XG5cbnJvdXRlci5wcmVmaXgoXCIvY29udGVudFwiKTtcblxucm91dGVyLnBvc3QoXCIvdXBsb2FkXCIsIGNvbnRlbnRDb250cm9sbGVyLnVwbG9hZEltZyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "contentRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "post",
        "contentController",
        "uploadImg"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,UAAd;AAEAF,MAAM,CAACG,IAAP,CAAY,SAAZ,EAAuBC,2BAAkBC,SAAzC;eAEeL,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport contentController from \"../api/contentController\";\n\nconst router = new Router();\n\nrouter.prefix(\"/content\");\n\nrouter.post(\"/upload\", contentController.uploadImg);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640331962896
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/contentController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/contentController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/contentController.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/contentController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "contentController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Post = _interopRequireDefault(require(\"../model/Post\"));\n\nvar _Links = _interopRequireDefault(require(\"../model/Links\"));\n\nvar _qs = _interopRequireDefault(require(\"qs\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _uuid = require(\"uuid\");\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass ContentController {\n  // 获取文章列表\n  async getPostList(ctx) {\n    const body = _qs.default.parse(ctx.query);\n\n    const sort = body.sort ? body.sort : \"created\";\n    const page = body.page ? parseInt(body.page) : 0;\n    const limit = body.limit ? parseInt(body.limit) : 20;\n    const options = {};\n\n    if (body.title) {\n      options.title = {\n        $regex: body.title\n      };\n    }\n\n    if (body.catalog && body.catalog.length > 0) {\n      options.catalog = {\n        $in: body.catalog\n      };\n    }\n\n    if (body.isTop) {\n      options.isTop = body.isTop;\n    }\n\n    if (body.isEnd) {\n      options.isEnd = body.isEnd;\n    }\n\n    if (body.status) {\n      options.status = body.status;\n    }\n\n    if (typeof body.tag !== \"undefined\" && body.tag !== \"\") {\n      options.tags = {\n        $elemMatch: {\n          name: body.tag\n        }\n      };\n    }\n\n    const result = await _Post.default.getList(options, sort, page, limit);\n    const total = await _Post.default.countList(options);\n    ctx.body = {\n      code: 200,\n      data: result,\n      msg: \"获取文章列表成功\",\n      total: total\n    };\n  } // 查询友情链接\n\n\n  async getLinks(ctx) {\n    const result = await _Links.default.find({\n      type: \"links\"\n    });\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  } // 查询温馨提醒\n\n\n  async getTips(ctx) {\n    const result = await _Links.default.find({\n      type: \"tips\"\n    });\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  } // 本周热议\n\n\n  async getTopWeek(ctx) {\n    const result = await _Post.default.getTopWeek();\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  } // 上传图片\n\n\n  async uploadImg(ctx) {\n    // const file = ctx.request.files.file;\n    console.log(\"ctx.request\", ctx.request); // const ext = file.name.split(\".\").pop();\n    // const dir = `${config.uploadPath}/${moment().format(\"YYYYMMDD\")}`;\n    // console.log(\"ext\", ext);\n    // console.log(\"dir\", dir);\n    // ctx.body = {\n    //   code: 200,\n    //   data: result,\n    // };\n  }\n\n}\n\nvar _default = new ContentController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRlbnRDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkNvbnRlbnRDb250cm9sbGVyIiwiZ2V0UG9zdExpc3QiLCJjdHgiLCJib2R5IiwicXMiLCJwYXJzZSIsInF1ZXJ5Iiwic29ydCIsInBhZ2UiLCJwYXJzZUludCIsImxpbWl0Iiwib3B0aW9ucyIsInRpdGxlIiwiJHJlZ2V4IiwiY2F0YWxvZyIsImxlbmd0aCIsIiRpbiIsImlzVG9wIiwiaXNFbmQiLCJzdGF0dXMiLCJ0YWciLCJ0YWdzIiwiJGVsZW1NYXRjaCIsIm5hbWUiLCJyZXN1bHQiLCJQb3N0IiwiZ2V0TGlzdCIsInRvdGFsIiwiY291bnRMaXN0IiwiY29kZSIsImRhdGEiLCJtc2ciLCJnZXRMaW5rcyIsIkxpbmtzIiwiZmluZCIsInR5cGUiLCJnZXRUaXBzIiwiZ2V0VG9wV2VlayIsInVwbG9hZEltZyIsImNvbnNvbGUiLCJsb2ciLCJyZXF1ZXN0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxpQkFBTixDQUF3QjtBQUN0QjtBQUNpQixRQUFYQyxXQUFXLENBQUNDLEdBQUQsRUFBTTtBQUNyQixVQUFNQyxJQUFJLEdBQUdDLFlBQUdDLEtBQUgsQ0FBU0gsR0FBRyxDQUFDSSxLQUFiLENBQWI7O0FBRUEsVUFBTUMsSUFBSSxHQUFHSixJQUFJLENBQUNJLElBQUwsR0FBWUosSUFBSSxDQUFDSSxJQUFqQixHQUF3QixTQUFyQztBQUNBLFVBQU1DLElBQUksR0FBR0wsSUFBSSxDQUFDSyxJQUFMLEdBQVlDLFFBQVEsQ0FBQ04sSUFBSSxDQUFDSyxJQUFOLENBQXBCLEdBQWtDLENBQS9DO0FBQ0EsVUFBTUUsS0FBSyxHQUFHUCxJQUFJLENBQUNPLEtBQUwsR0FBYUQsUUFBUSxDQUFDTixJQUFJLENBQUNPLEtBQU4sQ0FBckIsR0FBb0MsRUFBbEQ7QUFDQSxVQUFNQyxPQUFPLEdBQUcsRUFBaEI7O0FBRUEs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QUFSLENBQVksYUFBWixFQUEyQnRDLEdBQUcsQ0FBQ3VDLE9BQS9CLEVBRm1CLENBR25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDs7QUE3RXFCOztlQWdGVCxJQUFJekMsaUJBQUosRSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL2FwaS8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUG9zdCBmcm9tIFwiLi4vbW9kZWwvUG9zdFwiO1xuaW1wb3J0IExpbmsgZnJvbSBcIi4uL21vZGVsL0xpbmtzXCI7XG5pbXBvcnQgcXMgZnJvbSBcInFzXCI7XG5pbXBvcnQgTGlua3MgZnJvbSBcIi4uL21vZGVsL0xpbmtzXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IG1vbWVudCBmcm9tIFwiZGF5anNcIjtcbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZ1wiO1xuXG5jbGFzcyBDb250ZW50Q29udHJvbGxlciB7XG4gIC8vIOiOt+WPluaWh+eroOWIl+ihqFxuICBhc3luYyBnZXRQb3N0TGlzdChjdHgpIHtcbiAgICBjb25zdCBib2R5ID0gcXMucGFyc2UoY3R4LnF1ZXJ5KTtcblxuICAgIGNvbnN0IHNvcnQgPSBib2R5LnNvcnQgPyBib2R5LnNvcnQgOiBcImNyZWF0ZWRcIjtcbiAgICBjb25zdCBwYWdlID0gYm9keS5wYWdlID8gcGFyc2VJbnQoYm9keS5wYWdlKSA6IDA7XG4gICAgY29uc3QgbGltaXQgPSBib2R5LmxpbWl0ID8gcGFyc2VJbnQoYm9keS5saW1pdCkgOiAyMDtcbiAgICBjb25zdCBvcHRpb25zID0ge307XG5cbiAgICBpZiAoYm9keS50aXRsZSkge1xuICAgICAgb3B0aW9ucy50aXRsZSA9IHsgJHJlZ2V4OiBib2R5LnRpdGxlIH07XG4gICAgfVxuICAgIGlmIChib2R5LmNhdGFsb2cgJiYgYm9keS5jYXRhbG9nLmxlbmd0aCA+IDApIHtcbiAgICAgIG9wdGlvbnMuY2F0YWxvZyA9IHsgJGluOiBib2R5LmNhdGFsb2cgfTtcbiAgICB9XG4gICAgaWYgKGJvZHkuaXNUb3ApIHtcbiAgICAgIG9wdGlvbnMuaXNUb3AgPSBib2R5LmlzVG9wO1xuICAgIH1cbiAgICBpZiAoYm9keS5pc0VuZCkge1xuICAgICAgb3B0aW9ucy5pc0VuZCA9IGJvZHkuaXNFbmQ7XG4gICAgfVxuICAgIGlmIChib2R5LnN0YXR1cykge1xuICAgICAgb3B0aW9ucy5zdGF0dXMgPSBib2R5LnN0YXR1cztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBib2R5LnRhZyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBib2R5LnRhZyAhPT0gXCJcIikge1xuICAgICAgb3B0aW9ucy50YWdzID0geyAkZWxlbU1hdGNoOiB7IG5hbWU6IGJvZHkudGFnIH0gfTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9zdC5nZXRMaXN0KG9wdGlvbnMsIHNvcnQsIHBhZ2UsIGxpbWl0KTtcbiAgICBjb25zdCB0b3RhbCA9IGF3YWl0IFBvc3QuY291bnRMaXN0KG9wdGlvbnMpO1xuICAgIGN0eC5ib2R5ID0ge1xuICAgICAgY29kZTogMjAwLFxuICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgbXNnOiBcIuiOt+WPluaWh+eroOWIl+ihqOaIkOWKn1wiLFxuICAgICAgdG90YWw6IHRvdGFsLFxuICAgIH07XG4gIH1cblxuICAvLyDmn6Xor6Llj4vmg4Xpk77mjqVcbiAgYXN5bmMgZ2V0TGlua3MoY3R4KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTGlua3MuZmluZCh7IHR5cGU6IFwibGlua3NcIiB9KTtcbiAgICBjdHguYm9keSA9IHtcbiAgICAgIGNvZGU6IDIwMCxcbiAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICB9O1xuICB9XG5cbiAgLy8g5p+l6K+i5rip6aao5o+Q6YaSXG4gIGFzeW5jIGdldFRpcHMoY3R4KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTGlua3MuZmluZCh7IHR5cGU6IFwidGlwc1wiIH0pO1xuICAgIGN0eC5ib2R5ID0ge1xuICAgICAgY29kZTogMjAwLFxuICAgICAgZGF0YTogcmVzdWx0LFxuICAgIH07XG4gIH1cblxuICAvLyDmnKzlkajng63orq5cbiAgYXN5bmMgZ2V0VG9wV2VlayhjdHgpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQb3N0LmdldFRvcFdlZWsoKTtcbiAgICBjdHguYm9keSA9IHtcbiAgICAgIGNvZGU6IDIwMCxcbiAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICB9O1xuICB9XG5cbiAgLy8g5LiK5Lyg5Zu+54mHXG4gIGFzeW5jIHVwbG9hZEltZyhjdHgpIHtcbiAgICAvLyBjb25zdCBmaWxlID0gY3R4LnJlcXVlc3QuZmlsZXMuZmlsZTtcbiAgICBjb25zb2xlLmxvZyhcImN0eC5yZXF1ZXN0XCIsIGN0eC5yZXF1ZXN0KTtcbiAgICAvLyBjb25zdCBleHQgPSBmaWxlLm5hbWUuc3BsaXQoXCIuXCIpLnBvcCgpO1xuICAgIC8vIGNvbnN0IGRpciA9IGAke2NvbmZpZy51cGxvYWRQYXRofS8ke21vbWVudCgpLmZvcm1hdChcIllZWVlNTUREXCIpfWA7XG4gICAgLy8gY29uc29sZS5sb2coXCJleHRcIiwgZXh0KTtcbiAgICAvLyBjb25zb2xlLmxvZyhcImRpclwiLCBkaXIpO1xuICAgIC8vIGN0eC5ib2R5ID0ge1xuICAgIC8vICAgY29kZTogMjAwLFxuICAgIC8vICAgZGF0YTogcmVzdWx0LFxuICAgIC8vIH07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IENvbnRlbnRDb250cm9sbGVyKCk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "contentController.js"
      ],
      "names": [
        "ContentController",
        "getPostList",
        "ctx",
        "body",
        "qs",
        "parse",
        "query",
        "sort",
        "page",
        "parseInt",
        "limit",
        "options",
        "title",
        "$regex",
        "catalog",
        "length",
        "$in",
        "isTop",
        "isEnd",
        "status",
        "tag",
        "tags",
        "$elemMatch",
        "name",
        "result",
        "Post",
        "getList",
        "total",
        "countList",
        "code",
        "data",
        "msg",
        "getLinks",
        "Links",
        "find",
        "type",
        "getTips",
        "getTopWeek",
        "uploadImg",
        "console",
        "log",
        "request"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "import Post from \"../model/Post\";\nimport Link from \"../model/Links\";\nimport qs from \"qs\";\nimport Links from \"../model/Links\";\nimport fs from \"fs\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport moment from \"dayjs\";\nimport config from \"../config\";\n\nclass ContentController {\n  // 获取文章列表\n  async getPostList(ctx) {\n    const body = qs.parse(ctx.query);\n\n    const sort = body.sort ? body.sort : \"created\";\n    const page = body.page ? parseInt(body.page) : 0;\n    const limit = body.limit ? parseInt(body.limit) : 20;\n    const options = {};\n\n    if (body.title) {\n      options.title = { $regex: body.title };\n    }\n    if (body.catalog && body.catalog.length > 0) {\n      options.catalog = { $in: body.catalog };\n    }\n    if (body.isTop) {\n      options.isTop = body.isTop;\n    }\n    if (body.isEnd) {\n      options.isEnd = body.isEnd;\n    }\n    if (body.status) {\n      options.status = body.status;\n    }\n    if (typeof body.tag !== \"undefined\" && body.tag !== \"\") {\n      options.tags = { $elemMatch: { name: body.tag } };\n    }\n    const result = await Post.getList(options, sort, page, limit);\n    const total = await Post.countList(options);\n    ctx.body = {\n      code: 200,\n      data: result,\n      msg: \"获取文章列表成功\",\n      total: total,\n    };\n  }\n\n  // 查询友情链接\n  async getLinks(ctx) {\n    const result = await Links.find({ type: \"links\" });\n    ctx.body = {\n      code: 200,\n      data: result,\n    };\n  }\n\n  // 查询温馨提醒\n  async getTips(ctx) {\n    const result = await Links.find({ type: \"tips\" });\n    ctx.body = {\n      code: 200,\n      data: result,\n    };\n  }\n\n  // 本周热议\n  async getTopWeek(ctx) {\n    const result = await Post.getTopWeek();\n    ctx.body = {\n      code: 200,\n      data: result,\n    };\n  }\n\n  // 上传图片\n  async uploadImg(ctx) {\n    // const file = ctx.request.files.file;\n    console.log(\"ctx.request\", ctx.request);\n    // const ext = file.name.split(\".\").pop();\n    // const dir = `${config.uploadPath}/${moment().format(\"YYYYMMDD\")}`;\n    // console.log(\"ext\", ext);\n    // console.log(\"dir\", dir);\n    // ctx.body = {\n    //   code: 200,\n    //   data: result,\n    // };\n  }\n}\n\nexport default new ContentController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640332086397
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/model/Post.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/model/Post.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/model/Post.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/model/Post.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
        "sourceFileName": "Post.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelper = _interopRequireDefault(require(\"../config/DBHelper\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelper.default.Schema;\nconst PostSchema = new Schema({\n  uid: {\n    type: String,\n    ref: \"users\"\n  },\n  title: {\n    type: String\n  },\n  content: {\n    type: String\n  },\n  catalog: {\n    type: String\n  },\n  isEnd: {\n    type: String,\n    default: \"0\"\n  },\n  isTop: {\n    type: String,\n    default: \"0\"\n  },\n  reads: {\n    type: String,\n    default: 0\n  },\n  answer: {\n    type: Number,\n    default: 0\n  },\n  status: {\n    type: String,\n    default: \"0\"\n  },\n  topNum: {\n    type: String\n  },\n  tags: {\n    type: Array,\n    default: []\n  },\n  fav: {\n    type: Number\n  },\n  created: {\n    type: Date\n  },\n  sort: {\n    type: String,\n    default: 100\n  }\n});\nPostSchema.virtual(\"user\", {\n  ref: \"users\",\n  localField: \"uid\",\n  foreignField: \"_id\"\n});\nPostSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\nPostSchema.statics = {\n  /**\n   * 获取文章列表数据\n   * @param {Object} options 筛选条件\n   * @param {String} sort 排序方式\n   * @param {Number} page 分页页数\n   * @param {Number} limit 分页条数\n   */\n  getList: function (options, sort, page, limit) {\n    return this.find(options).sort({\n      [sort]: -1\n    }).skip(page * limit).limit(limit).populate({\n      path: \"uid\",\n      select: \"name isVip pic\"\n    });\n  },\n  countList: function (options) {\n    return this.find(options).countDocuments();\n  },\n  getTopWeek: function () {\n    return this.find({\n      // $gte 大于等于\n      created: {\n        $gte: (0, _dayjs.default)().subtract(7, \"days\")\n      }\n    }, {\n      answer: 1,\n      title: 1\n    }).sort({\n      answer: -1\n    }).limit(15);\n  }\n};\n\nconst PostModel = _DBHelper.default.model(\"posts\", PostSchema);\n\nvar _default = PostModel;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBvc3QuanMiXSwibmFtZXMiOlsiU2NoZW1hIiwibW9uZ29vc2UiLCJQb3N0U2NoZW1hIiwidWlkIiwidHlwZSIsIlN0cmluZyIsInJlZiIsInRpdGxlIiwiY29udGVudCIsImNhdGFsb2ciLCJpc0VuZCIsImRlZmF1bHQiLCJpc1RvcCIsInJlYWRzIiwiYW5zd2VyIiwiTnVtYmVyIiwic3RhdHVzIiwidG9wTnVtIiwidGFncyIsIkFycmF5IiwiZmF2IiwiY3JlYXRlZCIsIkRhdGUiLCJzb3J0IiwidmlydHVhbCIsImxvY2FsRmllbGQiLCJmb3JlaWduRmllbGQiLCJwcmUiLCJuZXh0Iiwic3RhdGljcyIsImdldExpc3QiLCJvcHRpb25zIiwicGFnZSIsImxpbWl0IiwiZmluZCIsInNraXAiLCJwb3B1bGF0ZSIsInBhdGgiLCJzZWxlY3QiLCJjb3VudExpc3QiLCJjb3VudERvY3VtZW50cyIsImdldFRvcFdlZWsiLCIkZ3RlIiwic3VidHJhY3QiLCJQb3N0TW9kZWwiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHQyxrQkFBU0QsTUFBeEI7QUFFQSxNQUFNRSxVQUFVLEdBQUcsSUFBSUYsTUFBSixDQUFXO0FBQzVCRyxFQUFBQSxHQUFHLEVBQUU7QUFBRUMsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxHQUFHLEVBQUU7QUFBckIsR0FEdUI7QUFFNUJDLEVBQUFBLEtBQUssRUFBRTtBQUFFSCxJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FGcUI7QUFHNUJHLEVBQUFBLE9BQU8sRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FIbUI7QUFJNUJJLEVBQUFBLE9BQU8sRUFBRTtBQUFFTCxJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FKbUI7QUFLNUJLLEVBQUFBLEtBQUssRUFBRTtBQUFFTixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JNLElBQUFBLE9BQU8sRUFB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QUFTNEMsS0FBVCxDQUFlLE9BQWYsRUFBd0IzQyxVQUF4QixDQUFsQjs7ZUFFZTBDLFMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9tb2RlbC8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIi4uL2NvbmZpZy9EQkhlbHBlclwiO1xuaW1wb3J0IG1vbWVudCBmcm9tIFwiZGF5anNcIjtcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xuXG5jb25zdCBQb3N0U2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHVpZDogeyB0eXBlOiBTdHJpbmcsIHJlZjogXCJ1c2Vyc1wiIH0sXG4gIHRpdGxlOiB7IHR5cGU6IFN0cmluZyB9LFxuICBjb250ZW50OiB7IHR5cGU6IFN0cmluZyB9LFxuICBjYXRhbG9nOiB7IHR5cGU6IFN0cmluZyB9LFxuICBpc0VuZDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiMFwiIH0sXG4gIGlzVG9wOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCIwXCIgfSxcbiAgcmVhZHM6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAwIH0sXG4gIGFuc3dlcjogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCIwXCIgfSxcbiAgdG9wTnVtOiB7IHR5cGU6IFN0cmluZyB9LFxuICB0YWdzOiB7IHR5cGU6IEFycmF5LCBkZWZhdWx0OiBbXSB9LFxuICBmYXY6IHsgdHlwZTogTnVtYmVyIH0sXG4gIGNyZWF0ZWQ6IHsgdHlwZTogRGF0ZSB9LFxuICBzb3J0OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogMTAwIH0sXG59KTtcblxuUG9zdFNjaGVtYS52aXJ0dWFsKFwidXNlclwiLCB7XG4gIHJlZjogXCJ1c2Vyc1wiLFxuICBsb2NhbEZpZWxkOiBcInVpZFwiLFxuICBmb3JlaWduRmllbGQ6IFwiX2lkXCIsXG59KTtcblxuUG9zdFNjaGVtYS5wcmUoXCJzYXZlXCIsIGZ1bmN0aW9uIChuZXh0KSB7XG4gIHRoaXMuY3JlYXRlZCA9IG5ldyBEYXRlKCk7XG4gIG5leHQoKTtcbn0pO1xuXG5Qb3N0U2NoZW1hLnN0YXRpY3MgPSB7XG4gIC8qKlxuICAgKiDojrflj5bmlofnq6DliJfooajmlbDmja5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMg562b6YCJ5p2h5Lu2XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzb3J0IOaOkuW6j+aWueW8j1xuICAgKiBAcGFyYW0ge051bWJlcn0gcGFnZSDliIbpobXpobXmlbBcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGxpbWl0IOWIhumhteadoeaVsFxuICAgKi9cbiAgZ2V0TGlzdDogZnVuY3Rpb24gKG9wdGlvbnMsIHNvcnQsIHBhZ2UsIGxpbWl0KSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZChvcHRpb25zKVxuICAgICAgLnNvcnQoeyBbc29ydF06IC0xIH0pXG4gICAgICAuc2tpcChwYWdlICogbGltaXQpXG4gICAgICAubGltaXQobGltaXQpXG4gICAgICAucG9wdWxhdGUoe1xuICAgICAgICBwYXRoOiBcInVpZFwiLFxuICAgICAgICBzZWxlY3Q6IFwibmFtZSBpc1ZpcCBwaWNcIixcbiAgICAgIH0pO1xuICB9LFxuICBjb3VudExpc3Q6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZChvcHRpb25zKS5jb3VudERvY3VtZW50cygpO1xuICB9LFxuICBnZXRUb3BXZWVrOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZChcbiAgICAgIHtcbiAgICAgICAgLy8gJGd0ZSDlpKfkuo7nrYnkuo5cbiAgICAgICAgY3JlYXRlZDoge1xuICAgICAgICAgICRndGU6IG1vbWVudCgpLnN1YnRyYWN0KDcsIFwiZGF5c1wiKSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFuc3dlcjogMSxcbiAgICAgICAgdGl0bGU6IDEsXG4gICAgICB9XG4gICAgKVxuICAgICAgLnNvcnQoeyBhbnN3ZXI6IC0xIH0pXG4gICAgICAubGltaXQoMTUpO1xuICB9LFxufTtcblxuY29uc3QgUG9zdE1vZGVsID0gbW9uZ29vc2UubW9kZWwoXCJwb3N0c1wiLCBQb3N0U2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgUG9zdE1vZGVsO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "Post.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "PostSchema",
        "uid",
        "type",
        "String",
        "ref",
        "title",
        "content",
        "catalog",
        "isEnd",
        "default",
        "isTop",
        "reads",
        "answer",
        "Number",
        "status",
        "topNum",
        "tags",
        "Array",
        "fav",
        "created",
        "Date",
        "sort",
        "virtual",
        "localField",
        "foreignField",
        "pre",
        "next",
        "statics",
        "getList",
        "options",
        "page",
        "limit",
        "find",
        "skip",
        "populate",
        "path",
        "select",
        "countList",
        "countDocuments",
        "getTopWeek",
        "$gte",
        "subtract",
        "PostModel",
        "model"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "sourcesContent": [
        "import mongoose from \"../config/DBHelper\";\nimport moment from \"dayjs\";\n\nconst Schema = mongoose.Schema;\n\nconst PostSchema = new Schema({\n  uid: { type: String, ref: \"users\" },\n  title: { type: String },\n  content: { type: String },\n  catalog: { type: String },\n  isEnd: { type: String, default: \"0\" },\n  isTop: { type: String, default: \"0\" },\n  reads: { type: String, default: 0 },\n  answer: { type: Number, default: 0 },\n  status: { type: String, default: \"0\" },\n  topNum: { type: String },\n  tags: { type: Array, default: [] },\n  fav: { type: Number },\n  created: { type: Date },\n  sort: { type: String, default: 100 },\n});\n\nPostSchema.virtual(\"user\", {\n  ref: \"users\",\n  localField: \"uid\",\n  foreignField: \"_id\",\n});\n\nPostSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\n\nPostSchema.statics = {\n  /**\n   * 获取文章列表数据\n   * @param {Object} options 筛选条件\n   * @param {String} sort 排序方式\n   * @param {Number} page 分页页数\n   * @param {Number} limit 分页条数\n   */\n  getList: function (options, sort, page, limit) {\n    return this.find(options)\n      .sort({ [sort]: -1 })\n      .skip(page * limit)\n      .limit(limit)\n      .populate({\n        path: \"uid\",\n        select: \"name isVip pic\",\n      });\n  },\n  countList: function (options) {\n    return this.find(options).countDocuments();\n  },\n  getTopWeek: function () {\n    return this.find(\n      {\n        // $gte 大于等于\n        created: {\n          $gte: moment().subtract(7, \"days\"),\n        },\n      },\n      {\n        answer: 1,\n        title: 1,\n      }\n    )\n      .sort({ answer: -1 })\n      .limit(15);\n  },\n};\n\nconst PostModel = mongoose.model(\"posts\", PostSchema);\n\nexport default PostModel;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640138752566
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/contentController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/contentController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/contentController.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/contentController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "contentController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Post = _interopRequireDefault(require(\"../model/Post\"));\n\nvar _Links = _interopRequireDefault(require(\"../model/Links\"));\n\nvar _qs = _interopRequireDefault(require(\"qs\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _uuid = require(\"uuid\");\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nvar _makeDir = _interopRequireDefault(require(\"make-dir\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 方法1:\n// import { dirExists } from \"../common/utils\";\n// 方法2:\nclass ContentController {\n  // 获取文章列表\n  async getPostList(ctx) {\n    const body = _qs.default.parse(ctx.query);\n\n    const sort = body.sort ? body.sort : \"created\";\n    const page = body.page ? parseInt(body.page) : 0;\n    const limit = body.limit ? parseInt(body.limit) : 20;\n    const options = {};\n\n    if (body.title) {\n      options.title = {\n        $regex: body.title\n      };\n    }\n\n    if (body.catalog && body.catalog.length > 0) {\n      options.catalog = {\n        $in: body.catalog\n      };\n    }\n\n    if (body.isTop) {\n      options.isTop = body.isTop;\n    }\n\n    if (body.isEnd) {\n      options.isEnd = body.isEnd;\n    }\n\n    if (body.status) {\n      options.status = body.status;\n    }\n\n    if (typeof body.tag !== \"undefined\" && body.tag !== \"\") {\n      options.tags = {\n        $elemMatch: {\n          name: body.tag\n        }\n      };\n    }\n\n    const result = await _Post.default.getList(options, sort, page, limit);\n    const total = await _Post.default.countList(options);\n    ctx.body = {\n      code: 200,\n      data: result,\n      msg: \"获取文章列表成功\",\n      total: total\n    };\n  } // 查询友情链接\n\n\n  async getLinks(ctx) {\n    const result = await _Links.default.find({\n      type: \"links\"\n    });\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  } // 查询温馨提醒\n\n\n  async getTips(ctx) {\n    const result = await _Links.default.find({\n      type: \"tips\"\n    });\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  } // 本周热议\n\n\n  async getTopWeek(ctx) {\n    const result = await _Post.default.getTopWeek();\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  } // 上传图片\n\n\n  async uploadImg(ctx) {\n    const file = ctx.request.files.file;\n    const ext = file.name.split(\".\").pop();\n    const dir = `${_config.default.uploadPath}/${(0, _dayjs.default)().format(\"YYYYMMDD\")}`;\n    console.log(\"dir\", dir); // 判断路径是否存在，不存在则创建\n    // 方法1:\n    // await dirExists(dir);\n    // 方法2:\n\n    await (0, _makeDir.default)(dir); // 给文件唯一名称\n\n    const picname = (0, _uuid.v4)();\n    const destPath = `${dir}/${picname}.${ext}`;\n\n    const reader = _fs.default.createReadStream(file.path);\n\n    const upStream = _fs.default.createWriteStream(destPath);\n\n    const filePath = `/${(0, _dayjs.default)().format(\"YYYYMMDD\")}/${picname}.${ext}`; // 存储文件到指定路径\n    // 方法1:\n\n    reader.pipe(upStream); // 方法2:\n    // let totalLength = 0;\n    // reader.on('data', (chunk) => {\n    //   totalLength += chunk.length\n    //   if (upStream.write(chunk) === false) {\n    //     reader.pause()\n    //   }\n    // })\n    // reader.on('drain', () => {\n    //   reader.resume()\n    // })\n    // reader.on('end', () => {\n    //   upStream.end()\n    // })\n\n    ctx.body = {\n      code: 200,\n      msg: \"图片上传成功！\",\n      data: filePath\n    };\n  }\n\n}\n\nvar _default = new ContentController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRlbnRDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkNvbnRlbnRDb250cm9sbGVyIiwiZ2V0UG9zdExpc3QiLCJjdHgiLCJib2R5IiwicXMiLCJwYXJzZSIsInF1ZXJ5Iiwic29ydCIsInBhZ2UiLCJwYXJzZUludCIsImxpbWl0Iiwib3B0aW9ucyIsInRpdGxlIiwiJHJlZ2V4IiwiY2F0YWxvZyIsImxlbmd0aCIsIiRpbiIsImlzVG9wIiwiaXNFbmQiLCJzdGF0dXMiLCJ0YWciLCJ0YWdzIiwiJGVsZW1NYXRjaCIsIm5hbWUiLCJyZXN1bHQiLCJQb3N0IiwiZ2V0TGlzdCIsInRvdGFsIiwiY291bnRMaXN0IiwiY29kZSIsImRhdGEiLCJtc2ciLCJnZXRMaW5rcyIsIkxpbmtzIiwiZmluZCIsInR5cGUiLCJnZXRUaXBzIiwiZ2V0VG9wV2VlayIsInVwbG9hZEltZyIsImZpbGUiLCJyZXF1ZXN0IiwiZmlsZXMiLCJleHQiLCJzcGxpdCIsInBvcCIsImRpciIsImNvbmZpZyIsInVwbG9hZFBhdGgiLCJmb3JtYXQiLCJjb25zb2xlIiwibG9nIiwicGljbmFtZSIsImRlc3RQYXRoIiwicmVhZGVyIiwiZnMiLCJjcmVhdGVSZWFkU3RyZWFtIiwicGF0aCIsInVwU3RyZWFtIiwiY3JlYXRlV3JpdGVTdHJlYW0iLCJmaWxlUGF0aCIsInBpcGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFJQTs7OztBQUhBO0FBQ0E7QUFDQTtBQUdBLE1BQU1BLGlCQUFOLENBQXdCO0FBQ3RCO0FBQ2lCLFFBQVhDLFdBQVcsQ0FBQ0MsR0FBRCxFQUFNO0FBQ3JCLFVBQU1DLElBQUksR0FBR0MsWUFBR0MsS0FBSCxDQUFTSCxHQUFHLENBQUNJLEtBQWIsQ0FBYjs7QUFFQSxVQUFNQyxJQUFJLEdBQUdKLElBQUksQ0FBQ0ksSUFBTCxHQUFZSixJQUFJLENBQUNJLElBQWpCLEdBQXdCLFNBQXJDO0FBQ0EsVUFB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQXZELElBQUFBLEdBQUcsQ0FBQ0MsSUFBSixHQUFXO0FBQ1QwQixNQUFBQSxJQUFJLEVBQUUsR0FERztBQUVURSxNQUFBQSxHQUFHLEVBQUUsU0FGSTtBQUdURCxNQUFBQSxJQUFJLEVBQUU2QjtBQUhHLEtBQVg7QUFLRDs7QUF4R3FCOztlQTJHVCxJQUFJM0QsaUJBQUosRSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL2FwaS8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUG9zdCBmcm9tIFwiLi4vbW9kZWwvUG9zdFwiO1xuaW1wb3J0IExpbmsgZnJvbSBcIi4uL21vZGVsL0xpbmtzXCI7XG5pbXBvcnQgcXMgZnJvbSBcInFzXCI7XG5pbXBvcnQgTGlua3MgZnJvbSBcIi4uL21vZGVsL0xpbmtzXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IG1vbWVudCBmcm9tIFwiZGF5anNcIjtcbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZ1wiO1xuLy8g5pa55rOVMTpcbi8vIGltcG9ydCB7IGRpckV4aXN0cyB9IGZyb20gXCIuLi9jb21tb24vdXRpbHNcIjtcbi8vIOaWueazlTI6XG5pbXBvcnQgbWtkaXIgZnJvbSBcIm1ha2UtZGlyXCI7XG5cbmNsYXNzIENvbnRlbnRDb250cm9sbGVyIHtcbiAgLy8g6I635Y+W5paH56ug5YiX6KGoXG4gIGFzeW5jIGdldFBvc3RMaXN0KGN0eCkge1xuICAgIGNvbnN0IGJvZHkgPSBxcy5wYXJzZShjdHgucXVlcnkpO1xuXG4gICAgY29uc3Qgc29ydCA9IGJvZHkuc29ydCA/IGJvZHkuc29ydCA6IFwiY3JlYXRlZFwiO1xuICAgIGNvbnN0IHBhZ2UgPSBib2R5LnBhZ2UgPyBwYXJzZUludChib2R5LnBhZ2UpIDogMDtcbiAgICBjb25zdCBsaW1pdCA9IGJvZHkubGltaXQgPyBwYXJzZUludChib2R5LmxpbWl0KSA6IDIwO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcblxuICAgIGlmIChib2R5LnRpdGxlKSB7XG4gICAgICBvcHRpb25zLnRpdGxlID0geyAkcmVnZXg6IGJvZHkudGl0bGUgfTtcbiAgICB9XG4gICAgaWYgKGJvZHkuY2F0YWxvZyAmJiBib2R5LmNhdGFsb2cubGVuZ3RoID4gMCkge1xuICAgICAgb3B0aW9ucy5jYXRhbG9nID0geyAkaW46IGJvZHkuY2F0YWxvZyB9O1xuICAgIH1cbiAgICBpZiAoYm9keS5pc1RvcCkge1xuICAgICAgb3B0aW9ucy5pc1RvcCA9IGJvZHkuaXNUb3A7XG4gICAgfVxuICAgIGlmIChib2R5LmlzRW5kKSB7XG4gICAgICBvcHRpb25zLmlzRW5kID0gYm9keS5pc0VuZDtcbiAgICB9XG4gICAgaWYgKGJvZHkuc3RhdHVzKSB7XG4gICAgICBvcHRpb25zLnN0YXR1cyA9IGJvZHkuc3RhdHVzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGJvZHkudGFnICE9PSBcInVuZGVmaW5lZFwiICYmIGJvZHkudGFnICE9PSBcIlwiKSB7XG4gICAgICBvcHRpb25zLnRhZ3MgPSB7ICRlbGVtTWF0Y2g6IHsgbmFtZTogYm9keS50YWcgfSB9O1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQb3N0LmdldExpc3Qob3B0aW9ucywgc29ydCwgcGFnZSwgbGltaXQpO1xuICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgUG9zdC5jb3VudExpc3Qob3B0aW9ucyk7XG4gICAgY3R4LmJvZHkgPSB7XG4gICAgICBjb2RlOiAyMDAsXG4gICAgICBkYXRhOiByZXN1bHQsXG4gICAgICBtc2c6IFwi6I635Y+W5paH56ug5YiX6KGo5oiQ5YqfXCIsXG4gICAgICB0b3RhbDogdG90YWwsXG4gICAgfTtcbiAgfVxuXG4gIC8vIOafpeivouWPi+aDhemTvuaOpVxuICBhc3luYyBnZXRMaW5rcyhjdHgpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBMaW5rcy5maW5kKHsgdHlwZTogXCJsaW5rc1wiIH0pO1xuICAgIGN0eC5ib2R5ID0ge1xuICAgICAgY29kZTogMjAwLFxuICAgICAgZGF0YTogcmVzdWx0LFxuICAgIH07XG4gIH1cblxuICAvLyDmn6Xor6LmuKnppqjmj5DphpJcbiAgYXN5bmMgZ2V0VGlwcyhjdHgpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBMaW5rcy5maW5kKHsgdHlwZTogXCJ0aXBzXCIgfSk7XG4gICAgY3R4LmJvZHkgPSB7XG4gICAgICBjb2RlOiAyMDAsXG4gICAgICBkYXRhOiByZXN1bHQsXG4gICAgfTtcbiAgfVxuXG4gIC8vIOacrOWRqOeDreiurlxuICBhc3luYyBnZXRUb3BXZWVrKGN0eCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFBvc3QuZ2V0VG9wV2VlaygpO1xuICAgIGN0eC5ib2R5ID0ge1xuICAgICAgY29kZTogMjAwLFxuICAgICAgZGF0YTogcmVzdWx0LFxuICAgIH07XG4gIH1cblxuICAvLyDkuIrkvKDlm77niYdcbiAgYXN5bmMgdXBsb2FkSW1nKGN0eCkge1xuICAgIGNvbnN0IGZpbGUgPSBjdHgucmVxdWVzdC5maWxlcy5maWxlO1xuICAgIGNvbnN0IGV4dCA9IGZpbGUubmFtZS5zcGxpdChcIi5cIikucG9wKCk7XG4gICAgY29uc3QgZGlyID0gYCR7Y29uZmlnLnVwbG9hZFBhdGh9LyR7bW9tZW50KCkuZm9ybWF0KFwiWVlZWU1NRERcIil9YDtcbiAgICBjb25zb2xlLmxvZyhcImRpclwiLCBkaXIpO1xuICAgIC8vIOWIpOaWrei3r+W+hOaYr+WQpuWtmOWcqO+8jOS4jeWtmOWcqOWImeWIm+W7ulxuICAgIC8vIOaWueazlTE6XG4gICAgLy8gYXdhaXQgZGlyRXhpc3RzKGRpcik7XG4gICAgLy8g5pa55rOVMjpcbiAgICBhd2FpdCBta2RpcihkaXIpO1xuICAgIC8vIOe7meaWh+S7tuWUr+S4gOWQjeensFxuICAgIGNvbnN0IHBpY25hbWUgPSB1dWlkdjQoKTtcbiAgICBjb25zdCBkZXN0UGF0aCA9IGAke2Rpcn0vJHtwaWNuYW1lfS4ke2V4dH1gO1xuICAgIGNvbnN0IHJlYWRlciA9IGZzLmNyZWF0ZVJlYWRTdHJlYW0oZmlsZS5wYXRoKTtcbiAgICBjb25zdCB1cFN0cmVhbSA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKGRlc3RQYXRoKTtcbiAgICBjb25zdCBmaWxlUGF0aCA9IGAvJHttb21lbnQoKS5mb3JtYXQoXCJZWVlZTU1ERFwiKX0vJHtwaWNuYW1lfS4ke2V4dH1gO1xuICAgIC8vIOWtmOWCqOaWh+S7tuWIsOaMh+Wumui3r+W+hFxuICAgIC8vIOaWueazlTE6XG4gICAgcmVhZGVyLnBpcGUodXBTdHJlYW0pO1xuICAgIC8vIOaWueazlTI6XG4gICAgLy8gbGV0IHRvdGFsTGVuZ3RoID0gMDtcbiAgICAvLyByZWFkZXIub24oJ2RhdGEnLCAoY2h1bmspID0+IHtcbiAgICAvLyAgIHRvdGFsTGVuZ3RoICs9IGNodW5rLmxlbmd0aFxuICAgIC8vICAgaWYgKHVwU3RyZWFtLndyaXRlKGNodW5rKSA9PT0gZmFsc2UpIHtcbiAgICAvLyAgICAgcmVhZGVyLnBhdXNlKClcbiAgICAvLyAgIH1cbiAgICAvLyB9KVxuICAgIC8vIHJlYWRlci5vbignZHJhaW4nLCAoKSA9PiB7XG4gICAgLy8gICByZWFkZXIucmVzdW1lKClcbiAgICAvLyB9KVxuICAgIC8vIHJlYWRlci5vbignZW5kJywgKCkgPT4ge1xuICAgIC8vICAgdXBTdHJlYW0uZW5kKClcbiAgICAvLyB9KVxuICAgIGN0eC5ib2R5ID0ge1xuICAgICAgY29kZTogMjAwLFxuICAgICAgbXNnOiBcIuWbvueJh+S4iuS8oOaIkOWKn++8gVwiLFxuICAgICAgZGF0YTogZmlsZVBhdGgsXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgQ29udGVudENvbnRyb2xsZXIoKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "contentController.js"
      ],
      "names": [
        "ContentController",
        "getPostList",
        "ctx",
        "body",
        "qs",
        "parse",
        "query",
        "sort",
        "page",
        "parseInt",
        "limit",
        "options",
        "title",
        "$regex",
        "catalog",
        "length",
        "$in",
        "isTop",
        "isEnd",
        "status",
        "tag",
        "tags",
        "$elemMatch",
        "name",
        "result",
        "Post",
        "getList",
        "total",
        "countList",
        "code",
        "data",
        "msg",
        "getLinks",
        "Links",
        "find",
        "type",
        "getTips",
        "getTopWeek",
        "uploadImg",
        "file",
        "request",
        "files",
        "ext",
        "split",
        "pop",
        "dir",
        "config",
        "uploadPath",
        "format",
        "console",
        "log",
        "picname",
        "destPath",
        "reader",
        "fs",
        "createReadStream",
        "path",
        "upStream",
        "createWriteStream",
        "filePath",
        "pipe"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "import Post from \"../model/Post\";\nimport Link from \"../model/Links\";\nimport qs from \"qs\";\nimport Links from \"../model/Links\";\nimport fs from \"fs\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport moment from \"dayjs\";\nimport config from \"../config\";\n// 方法1:\n// import { dirExists } from \"../common/utils\";\n// 方法2:\nimport mkdir from \"make-dir\";\n\nclass ContentController {\n  // 获取文章列表\n  async getPostList(ctx) {\n    const body = qs.parse(ctx.query);\n\n    const sort = body.sort ? body.sort : \"created\";\n    const page = body.page ? parseInt(body.page) : 0;\n    const limit = body.limit ? parseInt(body.limit) : 20;\n    const options = {};\n\n    if (body.title) {\n      options.title = { $regex: body.title };\n    }\n    if (body.catalog && body.catalog.length > 0) {\n      options.catalog = { $in: body.catalog };\n    }\n    if (body.isTop) {\n      options.isTop = body.isTop;\n    }\n    if (body.isEnd) {\n      options.isEnd = body.isEnd;\n    }\n    if (body.status) {\n      options.status = body.status;\n    }\n    if (typeof body.tag !== \"undefined\" && body.tag !== \"\") {\n      options.tags = { $elemMatch: { name: body.tag } };\n    }\n    const result = await Post.getList(options, sort, page, limit);\n    const total = await Post.countList(options);\n    ctx.body = {\n      code: 200,\n      data: result,\n      msg: \"获取文章列表成功\",\n      total: total,\n    };\n  }\n\n  // 查询友情链接\n  async getLinks(ctx) {\n    const result = await Links.find({ type: \"links\" });\n    ctx.body = {\n      code: 200,\n      data: result,\n    };\n  }\n\n  // 查询温馨提醒\n  async getTips(ctx) {\n    const result = await Links.find({ type: \"tips\" });\n    ctx.body = {\n      code: 200,\n      data: result,\n    };\n  }\n\n  // 本周热议\n  async getTopWeek(ctx) {\n    const result = await Post.getTopWeek();\n    ctx.body = {\n      code: 200,\n      data: result,\n    };\n  }\n\n  // 上传图片\n  async uploadImg(ctx) {\n    const file = ctx.request.files.file;\n    const ext = file.name.split(\".\").pop();\n    const dir = `${config.uploadPath}/${moment().format(\"YYYYMMDD\")}`;\n    console.log(\"dir\", dir);\n    // 判断路径是否存在，不存在则创建\n    // 方法1:\n    // await dirExists(dir);\n    // 方法2:\n    await mkdir(dir);\n    // 给文件唯一名称\n    const picname = uuidv4();\n    const destPath = `${dir}/${picname}.${ext}`;\n    const reader = fs.createReadStream(file.path);\n    const upStream = fs.createWriteStream(destPath);\n    const filePath = `/${moment().format(\"YYYYMMDD\")}/${picname}.${ext}`;\n    // 存储文件到指定路径\n    // 方法1:\n    reader.pipe(upStream);\n    // 方法2:\n    // let totalLength = 0;\n    // reader.on('data', (chunk) => {\n    //   totalLength += chunk.length\n    //   if (upStream.write(chunk) === false) {\n    //     reader.pause()\n    //   }\n    // })\n    // reader.on('drain', () => {\n    //   reader.resume()\n    // })\n    // reader.on('end', () => {\n    //   upStream.end()\n    // })\n    ctx.body = {\n      code: 200,\n      msg: \"图片上传成功！\",\n      data: filePath,\n    };\n  }\n}\n\nexport default new ContentController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640343244565
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/model/Links.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/model/Links.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/model/Links.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/model/Links.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
        "sourceFileName": "Links.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelper = _interopRequireDefault(require(\"../config/DBHelper\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelper.default.Schema;\nconst LinksSchema = new Schema({\n  title: {\n    type: String,\n    default: \"\"\n  },\n  sort: {\n    type: String,\n    default: \"\"\n  },\n  link: {\n    type: String,\n    default: \"\"\n  },\n  isTop: {\n    type: String,\n    default: \"\"\n  },\n  created: {\n    type: Date\n  },\n  type: {\n    type: String,\n    default: \"links\"\n  }\n});\nLinksSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\n\nconst Links = _DBHelper.default.model(\"links\", LinksSchema);\n\nvar _default = Links;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxpbmtzLmpzIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vbmdvb3NlIiwiTGlua3NTY2hlbWEiLCJ0aXRsZSIsInR5cGUiLCJTdHJpbmciLCJkZWZhdWx0Iiwic29ydCIsImxpbmsiLCJpc1RvcCIsImNyZWF0ZWQiLCJEYXRlIiwicHJlIiwibmV4dCIsIkxpbmtzIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBR0Msa0JBQVNELE1BQXhCO0FBRUEsTUFBTUUsV0FBVyxHQUFHLElBQUlGLE1BQUosQ0FBVztBQUM3QkcsRUFBQUEsS0FBSyxFQUFFO0FBQUVDLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFO0FBQXpCLEdBRHNCO0FBRTdCQyxFQUFBQSxJQUFJLEVBQUU7QUFBRUgsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUU7QUFBekIsR0FGdUI7QUFHN0JFLEVBQUFBLElBQUksRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLE9BQU8sRUFBRTtBQUF6QixHQUh1QjtBQUk3QkcsRUFBQUEsS0FBSyxFQUFFO0FBQUVMLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFO0FBQXpCLEdBSnNCO0FBSzdCSSxFQUFBQSxPQUFPLEVBQUU7QUFBRU4sSUFBQUEsSUFBSSxFQUFFTztBQUFSLEdBTG9CO0FBTTdCUCxFQUFBQSxJQUFJLEVBQUU7QUFBRUEsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUU7QUFBekI7QUFOdUIsQ0FBWCxDQUFwQjtBQVNBSixXQUFXLENBQUNVLEdBQVosQ0FBZ0IsTUFBaEIsRUFBd0IsVUFBVUMsSUFBVixFQUFnQjtBQUN0QyxPQUFLSCxPQUFMLEdBQWUsSUFBSUMsSUFBSixFQUFmO0FBQ0FFLEVBQUFBLElBQUk7QUFDTCxDQUhEOztBQUtBLE1BQU1DLEtBQUssR0FBR2Isa0JBQVNjLEtBQVQsQ0FBZSxPQUFmLEVBQXdCYixXQUF4QixDQUFkOztlQUVlWSxLIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvbW9kZWwvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCIuLi9jb25maWcvREJIZWxwZXJcIjtcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xuXG5jb25zdCBMaW5rc1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICB0aXRsZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgc29ydDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgbGluazogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgaXNUb3A6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIlwiIH0sXG4gIGNyZWF0ZWQ6IHsgdHlwZTogRGF0ZSB9LFxuICB0eXBlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJsaW5rc1wiIH0sXG59KTtcblxuTGlua3NTY2hlbWEucHJlKFwic2F2ZVwiLCBmdW5jdGlvbiAobmV4dCkge1xuICB0aGlzLmNyZWF0ZWQgPSBuZXcgRGF0ZSgpO1xuICBuZXh0KCk7XG59KTtcblxuY29uc3QgTGlua3MgPSBtb25nb29zZS5tb2RlbChcImxpbmtzXCIsIExpbmtzU2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgTGlua3M7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "Links.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "LinksSchema",
        "title",
        "type",
        "String",
        "default",
        "sort",
        "link",
        "isTop",
        "created",
        "Date",
        "pre",
        "next",
        "Links",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEA,MAAMA,MAAM,GAAGC,kBAASD,MAAxB;AAEA,MAAME,WAAW,GAAG,IAAIF,MAAJ,CAAW;AAC7BG,EAAAA,KAAK,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GADsB;AAE7BC,EAAAA,IAAI,EAAE;AAAEH,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAFuB;AAG7BE,EAAAA,IAAI,EAAE;AAAEJ,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAHuB;AAI7BG,EAAAA,KAAK,EAAE;AAAEL,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAJsB;AAK7BI,EAAAA,OAAO,EAAE;AAAEN,IAAAA,IAAI,EAAEO;AAAR,GALoB;AAM7BP,EAAAA,IAAI,EAAE;AAAEA,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB;AANuB,CAAX,CAApB;AASAJ,WAAW,CAACU,GAAZ,CAAgB,MAAhB,EAAwB,UAAUC,IAAV,EAAgB;AACtC,OAAKH,OAAL,GAAe,IAAIC,IAAJ,EAAf;AACAE,EAAAA,IAAI;AACL,CAHD;;AAKA,MAAMC,KAAK,GAAGb,kBAASc,KAAT,CAAe,OAAf,EAAwBb,WAAxB,CAAd;;eAEeY,K",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "sourcesContent": [
        "import mongoose from \"../config/DBHelper\";\n\nconst Schema = mongoose.Schema;\n\nconst LinksSchema = new Schema({\n  title: { type: String, default: \"\" },\n  sort: { type: String, default: \"\" },\n  link: { type: String, default: \"\" },\n  isTop: { type: String, default: \"\" },\n  created: { type: Date },\n  type: { type: String, default: \"links\" },\n});\n\nLinksSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\n\nconst Links = mongoose.model(\"links\", LinksSchema);\n\nexport default Links;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640095226090
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/model/Links.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/model/Links.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/model/Links.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/model/Links.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
        "sourceFileName": "Links.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelper = _interopRequireDefault(require(\"../config/DBHelper\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelper.default.Schema;\nconst LinksSchema = new Schema({\n  title: {\n    type: String,\n    default: \"\"\n  },\n  sort: {\n    type: String,\n    default: \"\"\n  },\n  link: {\n    type: String,\n    default: \"\"\n  },\n  isTop: {\n    type: String,\n    default: \"\"\n  },\n  created: {\n    type: Date\n  },\n  type: {\n    type: String,\n    default: \"links\"\n  }\n});\nLinksSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\n\nconst Links = _DBHelper.default.model(\"links\", LinksSchema);\n\nvar _default = Links;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxpbmtzLmpzIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vbmdvb3NlIiwiTGlua3NTY2hlbWEiLCJ0aXRsZSIsInR5cGUiLCJTdHJpbmciLCJkZWZhdWx0Iiwic29ydCIsImxpbmsiLCJpc1RvcCIsImNyZWF0ZWQiLCJEYXRlIiwicHJlIiwibmV4dCIsIkxpbmtzIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBR0Msa0JBQVNELE1BQXhCO0FBRUEsTUFBTUUsV0FBVyxHQUFHLElBQUlGLE1BQUosQ0FBVztBQUM3QkcsRUFBQUEsS0FBSyxFQUFFO0FBQUVDLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFO0FBQXpCLEdBRHNCO0FBRTdCQyxFQUFBQSxJQUFJLEVBQUU7QUFBRUgsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUU7QUFBekIsR0FGdUI7QUFHN0JFLEVBQUFBLElBQUksRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLE9BQU8sRUFBRTtBQUF6QixHQUh1QjtBQUk3QkcsRUFBQUEsS0FBSyxFQUFFO0FBQUVMLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFO0FBQXpCLEdBSnNCO0FBSzdCSSxFQUFBQSxPQUFPLEVBQUU7QUFBRU4sSUFBQUEsSUFBSSxFQUFFTztBQUFSLEdBTG9CO0FBTTdCUCxFQUFBQSxJQUFJLEVBQUU7QUFBRUEsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUU7QUFBekI7QUFOdUIsQ0FBWCxDQUFwQjtBQVNBSixXQUFXLENBQUNVLEdBQVosQ0FBZ0IsTUFBaEIsRUFBd0IsVUFBVUMsSUFBVixFQUFnQjtBQUN0QyxPQUFLSCxPQUFMLEdBQWUsSUFBSUMsSUFBSixFQUFmO0FBQ0FFLEVBQUFBLElBQUk7QUFDTCxDQUhEOztBQUtBLE1BQU1DLEtBQUssR0FBR2Isa0JBQVNjLEtBQVQsQ0FBZSxPQUFmLEVBQXdCYixXQUF4QixDQUFkOztlQUVlWSxLIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvbW9kZWwvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCIuLi9jb25maWcvREJIZWxwZXJcIjtcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xuXG5jb25zdCBMaW5rc1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICB0aXRsZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgc29ydDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgbGluazogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcbiAgaXNUb3A6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIlwiIH0sXG4gIGNyZWF0ZWQ6IHsgdHlwZTogRGF0ZSB9LFxuICB0eXBlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJsaW5rc1wiIH0sXG59KTtcblxuTGlua3NTY2hlbWEucHJlKFwic2F2ZVwiLCBmdW5jdGlvbiAobmV4dCkge1xuICB0aGlzLmNyZWF0ZWQgPSBuZXcgRGF0ZSgpO1xuICBuZXh0KCk7XG59KTtcblxuY29uc3QgTGlua3MgPSBtb25nb29zZS5tb2RlbChcImxpbmtzXCIsIExpbmtzU2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgTGlua3M7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "Links.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "LinksSchema",
        "title",
        "type",
        "String",
        "default",
        "sort",
        "link",
        "isTop",
        "created",
        "Date",
        "pre",
        "next",
        "Links",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEA,MAAMA,MAAM,GAAGC,kBAASD,MAAxB;AAEA,MAAME,WAAW,GAAG,IAAIF,MAAJ,CAAW;AAC7BG,EAAAA,KAAK,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GADsB;AAE7BC,EAAAA,IAAI,EAAE;AAAEH,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAFuB;AAG7BE,EAAAA,IAAI,EAAE;AAAEJ,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAHuB;AAI7BG,EAAAA,KAAK,EAAE;AAAEL,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAJsB;AAK7BI,EAAAA,OAAO,EAAE;AAAEN,IAAAA,IAAI,EAAEO;AAAR,GALoB;AAM7BP,EAAAA,IAAI,EAAE;AAAEA,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB;AANuB,CAAX,CAApB;AASAJ,WAAW,CAACU,GAAZ,CAAgB,MAAhB,EAAwB,UAAUC,IAAV,EAAgB;AACtC,OAAKH,OAAL,GAAe,IAAIC,IAAJ,EAAf;AACAE,EAAAA,IAAI;AACL,CAHD;;AAKA,MAAMC,KAAK,GAAGb,kBAASc,KAAT,CAAe,OAAf,EAAwBb,WAAxB,CAAd;;eAEeY,K",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "sourcesContent": [
        "import mongoose from \"../config/DBHelper\";\n\nconst Schema = mongoose.Schema;\n\nconst LinksSchema = new Schema({\n  title: { type: String, default: \"\" },\n  sort: { type: String, default: \"\" },\n  link: { type: String, default: \"\" },\n  isTop: { type: String, default: \"\" },\n  created: { type: Date },\n  type: { type: String, default: \"links\" },\n});\n\nLinksSchema.pre(\"save\", function (next) {\n  this.created = new Date();\n  next();\n});\n\nconst Links = mongoose.model(\"links\", LinksSchema);\n\nexport default Links;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640095226090
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/contentRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/contentRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/contentRouter.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/contentRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "contentRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _contentController = _interopRequireDefault(require(\"../api/contentController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.prefix(\"/content\");\nrouter.post(\"/upload\", _contentController.default.uploadImg);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRlbnRSb3V0ZXIuanMiXSwibmFtZXMiOlsicm91dGVyIiwiUm91dGVyIiwicHJlZml4IiwicG9zdCIsImNvbnRlbnRDb250cm9sbGVyIiwidXBsb2FkSW1nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsa0JBQUosRUFBZjtBQUVBRCxNQUFNLENBQUNFLE1BQVAsQ0FBYyxVQUFkO0FBRUFGLE1BQU0sQ0FBQ0csSUFBUCxDQUFZLFNBQVosRUFBdUJDLDJCQUFrQkMsU0FBekM7ZUFFZUwsTSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHl3L0Rldi9CbG9nL3dlYi9lbmQvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUm91dGVyIGZyb20gXCJrb2Etcm91dGVyXCI7XG5pbXBvcnQgY29udGVudENvbnRyb2xsZXIgZnJvbSBcIi4uL2FwaS9jb250ZW50Q29udHJvbGxlclwiO1xuXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKCk7XG5cbnJvdXRlci5wcmVmaXgoXCIvY29udGVudFwiKTtcblxucm91dGVyLnBvc3QoXCIvdXBsb2FkXCIsIGNvbnRlbnRDb250cm9sbGVyLnVwbG9hZEltZyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "contentRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "post",
        "contentController",
        "uploadImg"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,UAAd;AAEAF,MAAM,CAACG,IAAP,CAAY,SAAZ,EAAuBC,2BAAkBC,SAAzC;eAEeL,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport contentController from \"../api/contentController\";\n\nconst router = new Router();\n\nrouter.prefix(\"/content\");\n\nrouter.post(\"/upload\", contentController.uploadImg);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640331962896
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/userRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/userRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/userRouter.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/userRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "userRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _userController = _interopRequireDefault(require(\"../api/userController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.prefix(\"/user\"); // 用户签到\n\nrouter.get(\"/fav\", _userController.default.userSignRecord); // 更新用户基本信息\n\nrouter.post(\"/basic\", _userController.default.updateUserInfo); // 修改密码\n\nrouter.post(\"/changePassword\", _userController.default.changePassword);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJSb3V0ZXIuanMiXSwibmFtZXMiOlsicm91dGVyIiwiUm91dGVyIiwicHJlZml4IiwiZ2V0IiwidXNlckNvbnRyb2xsZXIiLCJ1c2VyU2lnblJlY29yZCIsInBvc3QiLCJ1cGRhdGVVc2VySW5mbyIsImNoYW5nZVBhc3N3b3JkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsa0JBQUosRUFBZjtBQUVBRCxNQUFNLENBQUNFLE1BQVAsQ0FBYyxPQUFkLEUsQ0FFQTs7QUFDQUYsTUFBTSxDQUFDRyxHQUFQLENBQVcsTUFBWCxFQUFtQkMsd0JBQWVDLGNBQWxDLEUsQ0FFQTs7QUFDQUwsTUFBTSxDQUFDTSxJQUFQLENBQVksUUFBWixFQUFzQkYsd0JBQWVHLGNBQXJDLEUsQ0FFQTs7QUFDQVAsTUFBTSxDQUFDTSxJQUFQLENBQVksaUJBQVosRUFBK0JGLHdCQUFlSSxjQUE5QztlQUVlUixNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb3V0ZXIgZnJvbSBcImtvYS1yb3V0ZXJcIjtcbmltcG9ydCB1c2VyQ29udHJvbGxlciBmcm9tIFwiLi4vYXBpL3VzZXJDb250cm9sbGVyXCI7XG5cbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKTtcblxucm91dGVyLnByZWZpeChcIi91c2VyXCIpO1xuXG4vLyDnlKjmiLfnrb7liLBcbnJvdXRlci5nZXQoXCIvZmF2XCIsIHVzZXJDb250cm9sbGVyLnVzZXJTaWduUmVjb3JkKTtcblxuLy8g5pu05paw55So5oi35Z+65pys5L+h5oGvXG5yb3V0ZXIucG9zdChcIi9iYXNpY1wiLCB1c2VyQ29udHJvbGxlci51cGRhdGVVc2VySW5mbyk7XG5cbi8vIOS/ruaUueWvhueggVxucm91dGVyLnBvc3QoXCIvY2hhbmdlUGFzc3dvcmRcIiwgdXNlckNvbnRyb2xsZXIuY2hhbmdlUGFzc3dvcmQpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "userRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "get",
        "userController",
        "userSignRecord",
        "post",
        "updateUserInfo",
        "changePassword"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,OAAd,E,CAEA;;AACAF,MAAM,CAACG,GAAP,CAAW,MAAX,EAAmBC,wBAAeC,cAAlC,E,CAEA;;AACAL,MAAM,CAACM,IAAP,CAAY,QAAZ,EAAsBF,wBAAeG,cAArC,E,CAEA;;AACAP,MAAM,CAACM,IAAP,CAAY,iBAAZ,EAA+BF,wBAAeI,cAA9C;eAEeR,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport userController from \"../api/userController\";\n\nconst router = new Router();\n\nrouter.prefix(\"/user\");\n\n// 用户签到\nrouter.get(\"/fav\", userController.userSignRecord);\n\n// 更新用户基本信息\nrouter.post(\"/basic\", userController.updateUserInfo);\n\n// 修改密码\nrouter.post(\"/changePassword\", userController.changePassword);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640359088266
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/userController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/userController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/userController.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/userController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "userController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _SignRecord = _interopRequireDefault(require(\"../model/SignRecord\"));\n\nvar _utils = require(\"../common/utils\");\n\nvar _User = _interopRequireDefault(require(\"../model/User\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nvar _MailConfig = _interopRequireDefault(require(\"../config/MailConfig\"));\n\nvar _uuid = require(\"uuid\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _RedisConfig = require(\"../config/RedisConfig\");\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass UserController {\n  // 用户签到\n  async userSignRecord(ctx) {\n    // 取用户的id\n    const obj = await (0, _utils.getJWTPayload)(ctx.header.authorization); // 查用户上次签到记录\n\n    const record = await _SignRecord.default.findByUid(obj._id);\n    const user = await _User.default.findByID(obj._id);\n    let result = \"\";\n    let newRecord = {}; // 判断签到逻辑\n\n    if (record) {\n      // 有历史签到数据\n      // 判断上次签到是否与今天相同\n      if ((0, _dayjs.default)(record.created).format(\"YYYY-MM-DD\") === (0, _dayjs.default)().format(\"YYYY-MM-DD\")) {\n        // 用户今日已经签到\n        ctx.body = {\n          code: 500,\n          fav: user.fav,\n          count: user.count,\n          lastSign: record.created,\n          msg: \"您今日已签到！\"\n        };\n        return;\n      } else {\n        // 用户今日未签到\n        let count = user.count;\n        let fav = 0;\n\n        if ((0, _dayjs.default)(record.created).format(\"YYYY-MM-DD\") === (0, _dayjs.default)().subtract(1, \"days\").format(\"YYYY-MM-DD\")) {\n          count += 1; // 用户连续签到\n\n          if (count < 5) fav = 5;else if (count >= 5 && count < 15) fav = 10;else if (count >= 15 && count < 30) fav = 15;else if (count >= 30 && count < 100) fav = 20;else if (count >= 100 && count < 365) fav = 30;else if (count >= 365) fav = 50; // 更新user表\n\n          await _User.default.updateOne({\n            _id: obj._id\n          }, {\n            $inc: {\n              fav: fav,\n              // user.fav += fav\n              count: 1 // user.count += 1\n\n            }\n          });\n          result = {\n            fav: user.fav + fav,\n            count: user.count + 1\n          };\n        } else {\n          // 用户中断签到\n          fav = 5; // 更新user表\n\n          await _User.default.updateOne({\n            _id: obj._id\n          }, {\n            $set: {\n              count: 1\n            },\n            $inc: {\n              fav: fav\n            }\n          });\n          result = {\n            fav: user.fav + fav,\n            count: 1\n          };\n        } // 更新sign_record表\n\n\n        newRecord = new _SignRecord.default({\n          uid: obj._id,\n          fav: fav\n        });\n        await newRecord.save();\n      }\n    } else {\n      // 用户初次签到, 保存用户签到数据 - users表\n      await _User.default.updateOne({\n        _id: obj._id\n      }, {\n        $set: {\n          count: 1\n        },\n        $inc: {\n          fav: 5\n        }\n      }); // 保存签到记录 sign_record表\n\n      newRecord = new _SignRecord.default({\n        uid: obj._id,\n        fav: 5\n      });\n      await newRecord.save();\n      result = {\n        fav: user.fav + 5,\n        count: 1\n      };\n    }\n\n    ctx.body = {\n      code: 200,\n      msg: \"签到成功\",\n      ...result,\n      lastSign: newRecord.created\n    };\n  } // 更新用户基本信息\n\n\n  async updateUserInfo(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const obj = await (0, _utils.getJWTPayload)(ctx.header.authorization); // 判断用户是否修改了邮箱\n\n    const user = await _User.default.findOne({\n      _id: obj._id\n    });\n    let msg = \"\";\n\n    if (body.username && body.username !== user.username) {\n      // 用户修改了邮箱\n      // 发送reset邮件\n      // 判断用户的新邮箱是否已被注册\n      const tempUser = await _User.default.findOne({\n        username: body.username\n      });\n\n      if (tempUser && tempUser.password) {\n        ctx.body = {\n          code: 501,\n          msg: \"邮箱已经注册！\"\n        };\n        return;\n      }\n\n      const key = (0, _uuid.v4)();\n      (0, _RedisConfig.setValue)(key, _jsonwebtoken.default.sign({\n        _id: obj._id\n      }, _config.default.JWT_SECRET, {\n        expiresIn: \"30m\"\n      })); // const result =\n\n      await (0, _MailConfig.default)({\n        type: \"email\",\n        data: {\n          key: key,\n          username: body.username\n        },\n        code: \"\",\n        expire: (0, _dayjs.default)().add(30, \"minutes\").format(\"YYYY-MM-DD HH:mm:ss\"),\n        email: user.username,\n        user: user.name\n      }); // ctx.body = {\n      //   code: 500,\n      //   data: result,\n      //   msg: \"发送验证邮件成功，请点击链接确认修改邮件账号！\",\n      // };\n\n      msg = \"基本资料已更新，修改邮箱需邮件确认，请查收邮件！\";\n    }\n\n    const arr = [\"username\", \"mobile\", \"password\"];\n    arr.map(item => delete body[item]);\n    const result = await _User.default.updateOne({\n      _id: obj._id\n    }, body);\n    console.log(result); // result.modifiedCount === 1 &&\n\n    if (result.matchedCount === 1) {\n      ctx.body = {\n        code: 200,\n        msg: msg === \"\" ? \"更新成功！\" : msg\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: \"更新失败！\"\n      };\n    }\n  } // 更新用户名-邮箱\n\n\n  async updateUsername(ctx) {\n    const body = ctx.query;\n    console.log(\"body\", ctx.query);\n\n    if (body.key) {\n      const token = await (0, _RedisConfig.getValue)(body.key);\n      const obj = (0, _utils.getJWTPayload)(\"Bearer \" + token);\n      await _User.default.updateOne({\n        _id: obj._id\n      }, {\n        username: body.username\n      });\n      ctx.body = {\n        code: 200,\n        msg: \"更新用户名成功\"\n      };\n    }\n  }\n\n}\n\nvar _default = new UserController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIlVzZXJDb250cm9sbGVyIiwidXNlclNpZ25SZWNvcmQiLCJjdHgiLCJvYmoiLCJoZWFkZXIiLCJhdXRob3JpemF0aW9uIiwicmVjb3JkIiwiU2lnblJlY29yZCIsImZpbmRCeVVpZCIsIl9pZCIsInVzZXIiLCJVc2VyIiwiZmluZEJ5SUQiLCJyZXN1bHQiLCJuZXdSZWNvcmQiLCJjcmVhdGVkIiwiZm9ybWF0IiwiYm9keSIsImNvZGUiLCJmYXYiLCJjb3VudCIsImxhc3RTaWduIiwibXNnIiwic3VidHJhY3QiLCJ1cGRhdGVPbmUiLCIkaW5jIiwiJHNldCIsInVpZCIsInNhdmUiLCJ1cGRhdGVVc2VySW5mbyIsInJlcXVlc3QiLCJmaW5kT25lIiwidXNlcm5hbWUiLCJ0ZW1wVXNlciIsInBhc3N3b3JkIiwia2V5Iiwiand0Iiwic2lnbiIsImNvbmZpZyIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJ0eXBlIiwiZGF0YSIsImV4cGlyZSIsImFkZCIsImVtYWlsIiwibmFtZSIsImFyciIsIm1hcCIsIml0ZW0iLCJjb25zb2xlIiwibG9nIiwibWF0Y2hlZENvdW50IiwidXBkYXRlVXNlcm5hbWUiLCJxdWVyeSIsInRva2VuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxjQUFOLENBQXFCO0FBQ25CO0FBQ29CLFFBQWRDLGNBQWMsQ0FBQ0MsR0FBRCxFQUFNO0FBQ3hCO0FBQ0EsVUFBTUMsR0FBRyxHQUFHLE1BQU0sMEJBQWNELEdBQUcsQ0FBQ0UsTUFBSixDQUFXQyxhQUF6QixDQUFsQixDQUZ3QixDQUd4Qjs7QUFDQSxVQUFNQyxNQUFNLEdBQUcsTUFBTUMsb0JBQVdDLFNBQVgsQ0FBcUJMLEdBQUcsQ0FBQ00sR0FBekIsQ0FBckI7QUFDQSxVQUFNQyxJQUFJLEdBQUcsTUFBTUMsY0FBS0Ms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Q25ELEdBQUQsRUFBTTtBQUN4QixVQUFNZSxJQUFJLEdBQUdmLEdBQUcsQ0FBQ29ELEtBQWpCO0FBQ0FKLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLE1BQVosRUFBb0JqRCxHQUFHLENBQUNvRCxLQUF4Qjs7QUFDQSxRQUFJckMsSUFBSSxDQUFDa0IsR0FBVCxFQUFjO0FBQ1osWUFBTW9CLEtBQUssR0FBRyxNQUFNLDJCQUFTdEMsSUFBSSxDQUFDa0IsR0FBZCxDQUFwQjtBQUNBLFlBQU1oQyxHQUFHLEdBQUcsMEJBQWMsWUFBWW9ELEtBQTFCLENBQVo7QUFDQSxZQUFNNUMsY0FBS2EsU0FBTCxDQUFlO0FBQUVmLFFBQUFBLEdBQUcsRUFBRU4sR0FBRyxDQUFDTTtBQUFYLE9BQWYsRUFBaUM7QUFBRXVCLFFBQUFBLFFBQVEsRUFBRWYsSUFBSSxDQUFDZTtBQUFqQixPQUFqQyxDQUFOO0FBQ0E5QixNQUFBQSxHQUFHLENBQUNlLElBQUosR0FBVztBQUNUQyxRQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUSSxRQUFBQSxHQUFHLEVBQUU7QUFGSSxPQUFYO0FBSUQ7QUFDRjs7QUExTGtCOztlQTZMTixJQUFJdEIsY0FBSixFIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvYXBpLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTaWduUmVjb3JkIGZyb20gXCIuLi9tb2RlbC9TaWduUmVjb3JkXCI7XG5pbXBvcnQgeyBnZXRKV1RQYXlsb2FkIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsc1wiO1xuaW1wb3J0IFVzZXIgZnJvbSBcIi4uL21vZGVsL1VzZXJcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcImRheWpzXCI7XG5pbXBvcnQgc2VuZCBmcm9tIFwiLi4vY29uZmlnL01haWxDb25maWdcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCB7IGdldFZhbHVlLCBzZXRWYWx1ZSB9IGZyb20gXCIuLi9jb25maWcvUmVkaXNDb25maWdcIjtcbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZ1wiO1xuXG5jbGFzcyBVc2VyQ29udHJvbGxlciB7XG4gIC8vIOeUqOaIt+etvuWIsFxuICBhc3luYyB1c2VyU2lnblJlY29yZChjdHgpIHtcbiAgICAvLyDlj5bnlKjmiLfnmoRpZFxuICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcbiAgICAvLyDmn6XnlKjmiLfkuIrmrKHnrb7liLDorrDlvZVcbiAgICBjb25zdCByZWNvcmQgPSBhd2FpdCBTaWduUmVjb3JkLmZpbmRCeVVpZChvYmouX2lkKTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJRChvYmouX2lkKTtcbiAgICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgICBsZXQgbmV3UmVjb3JkID0ge307XG4gICAgLy8g5Yik5pat562+5Yiw6YC76L6RXG4gICAgaWYgKHJlY29yZCkge1xuICAgICAgLy8g5pyJ5Y6G5Y+y562+5Yiw5pWw5o2uXG4gICAgICAvLyDliKTmlq3kuIrmrKHnrb7liLDmmK/lkKbkuI7ku4rlpKnnm7jlkIxcbiAgICAgIGlmIChcbiAgICAgICAgbW9tZW50KHJlY29yZC5jcmVhdGVkKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpID09PVxuICAgICAgICBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpXG4gICAgICApIHtcbiAgICAgICAgLy8g55So5oi35LuK5pel5bey57uP562+5YiwXG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICBmYXY6IHVzZXIuZmF2LFxuICAgICAgICAgIGNvdW50OiB1c2VyLmNvdW50LFxuICAgICAgICAgIGxhc3RTaWduOiByZWNvcmQuY3JlYXRlZCxcbiAgICAgICAgICBtc2c6IFwi5oKo5LuK5pel5bey562+5Yiw77yBXCIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOeUqOaIt+S7iuaXpeacquetvuWIsFxuICAgICAgICBsZXQgY291bnQgPSB1c2VyLmNvdW50O1xuICAgICAgICBsZXQgZmF2ID0gMDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG1vbWVudChyZWNvcmQuY3JlYXRlZCkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKSA9PT1cbiAgICAgICAgICBtb21lbnQoKS5zdWJ0cmFjdCgxLCBcImRheXNcIikuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICAgIC8vIOeUqOaIt+i/nue7reetvuWIsFxuICAgICAgICAgIGlmIChjb3VudCA8IDUpIGZhdiA9IDU7XG4gICAgICAgICAgZWxzZSBpZiAoY291bnQgPj0gNSAmJiBjb3VudCA8IDE1KSBmYXYgPSAxMDtcbiAgICAgICAgICBlbHNlIGlmIChjb3VudCA+PSAxNSAmJiBjb3VudCA8IDMwKSBmYXYgPSAxNTtcbiAgICAgICAgICBlbHNlIGlmIChjb3VudCA+PSAzMCAmJiBjb3VudCA8IDEwMCkgZmF2ID0gMjA7XG4gICAgICAgICAgZWxzZSBpZiAoY291bnQgPj0gMTAwICYmIGNvdW50IDwgMzY1KSBmYXYgPSAzMDtcbiAgICAgICAgICBlbHNlIGlmIChjb3VudCA+PSAzNjUpIGZhdiA9IDUwO1xuICAgICAgICAgIC8vIOabtOaWsHVzZXLooahcbiAgICAgICAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZShcbiAgICAgICAgICAgIHsgX2lkOiBvYmouX2lkIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICRpbmM6IHtcbiAgICAgICAgICAgICAgICBmYXY6IGZhdiwgLy8gdXNlci5mYXYgKz0gZmF2XG4gICAgICAgICAgICAgICAgY291bnQ6IDEsIC8vIHVzZXIuY291bnQgKz0gMVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZmF2OiB1c2VyLmZhdiArIGZhdixcbiAgICAgICAgICAgIGNvdW50OiB1c2VyLmNvdW50ICsgMSxcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOeUqOaIt+S4reaWreetvuWIsFxuICAgICAgICAgIGZhdiA9IDU7XG4gICAgICAgICAgLy8g5pu05pawdXNlcuihqFxuICAgICAgICAgIGF3YWl0IFVzZXIudXBkYXRlT25lKFxuICAgICAgICAgICAgeyBfaWQ6IG9iai5faWQgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgJHNldDogeyBjb3VudDogMSB9LFxuICAgICAgICAgICAgICAkaW5jOiB7IGZhdjogZmF2IH0sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICBmYXY6IHVzZXIuZmF2ICsgZmF2LFxuICAgICAgICAgICAgY291bnQ6IDEsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyDmm7TmlrBzaWduX3JlY29yZOihqFxuICAgICAgICBuZXdSZWNvcmQgPSBuZXcgU2lnblJlY29yZCh7XG4gICAgICAgICAgdWlkOiBvYmouX2lkLFxuICAgICAgICAgIGZhdjogZmF2LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgbmV3UmVjb3JkLnNhdmUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8g55So5oi35Yid5qyh562+5YiwLCDkv53lrZjnlKjmiLfnrb7liLDmlbDmja4gLSB1c2Vyc+ihqFxuICAgICAgYXdhaXQgVXNlci51cGRhdGVPbmUoXG4gICAgICAgIHtcbiAgICAgICAgICBfaWQ6IG9iai5faWQsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAkc2V0OiB7IGNvdW50OiAxIH0sXG4gICAgICAgICAgJGluYzogeyBmYXY6IDUgfSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIC8vIOS/neWtmOetvuWIsOiusOW9lSBzaWduX3JlY29yZOihqFxuICAgICAgbmV3UmVjb3JkID0gbmV3IFNpZ25SZWNvcmQoe1xuICAgICAgICB1aWQ6IG9iai5faWQsXG4gICAgICAgIGZhdjogNSxcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgbmV3UmVjb3JkLnNhdmUoKTtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgZmF2OiB1c2VyLmZhdiArIDUsXG4gICAgICAgIGNvdW50OiAxLFxuICAgICAgfTtcbiAgICB9XG4gICAgY3R4LmJvZHkgPSB7XG4gICAgICBjb2RlOiAyMDAsXG4gICAgICBtc2c6IFwi562+5Yiw5oiQ5YqfXCIsXG4gICAgICAuLi5yZXN1bHQsXG4gICAgICBsYXN0U2lnbjogbmV3UmVjb3JkLmNyZWF0ZWQsXG4gICAgfTtcbiAgfVxuXG4gIC8vIOabtOaWsOeUqOaIt+WfuuacrOS/oeaBr1xuICBhc3luYyB1cGRhdGVVc2VySW5mbyhjdHgpIHtcbiAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcbiAgICAvLyDliKTmlq3nlKjmiLfmmK/lkKbkv67mlLnkuobpgq7nrrFcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgX2lkOiBvYmouX2lkIH0pO1xuICAgIGxldCBtc2cgPSBcIlwiO1xuICAgIGlmIChib2R5LnVzZXJuYW1lICYmIGJvZHkudXNlcm5hbWUgIT09IHVzZXIudXNlcm5hbWUpIHtcbiAgICAgIC8vIOeUqOaIt+S/ruaUueS6humCrueusVxuICAgICAgLy8g5Y+R6YCBcmVzZXTpgq7ku7ZcbiAgICAgIC8vIOWIpOaWreeUqOaIt+eahOaWsOmCrueuseaYr+WQpuW3suiiq+azqOWGjFxuICAgICAgY29uc3QgdGVtcFVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB1c2VybmFtZTogYm9keS51c2VybmFtZSB9KTtcbiAgICAgIGlmICh0ZW1wVXNlciAmJiB0ZW1wVXNlci5wYXNzd29yZCkge1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICBjb2RlOiA1MDEsXG4gICAgICAgICAgbXNnOiBcIumCrueuseW3sue7j+azqOWGjO+8gVwiLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBrZXkgPSB1dWlkdjQoKTtcbiAgICAgIHNldFZhbHVlKFxuICAgICAgICBrZXksXG4gICAgICAgIGp3dC5zaWduKHsgX2lkOiBvYmouX2lkIH0sIGNvbmZpZy5KV1RfU0VDUkVULCB7XG4gICAgICAgICAgZXhwaXJlc0luOiBcIjMwbVwiLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIC8vIGNvbnN0IHJlc3VsdCA9XG4gICAgICBhd2FpdCBzZW5kKHtcbiAgICAgICAgdHlwZTogXCJlbWFpbFwiLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgdXNlcm5hbWU6IGJvZHkudXNlcm5hbWUsXG4gICAgICAgIH0sXG4gICAgICAgIGNvZGU6IFwiXCIsXG4gICAgICAgIGV4cGlyZTogbW9tZW50KCkuYWRkKDMwLCBcIm1pbnV0ZXNcIikuZm9ybWF0KFwiWVlZWS1NTS1ERCBISDptbTpzc1wiKSxcbiAgICAgICAgZW1haWw6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgIHVzZXI6IHVzZXIubmFtZSxcbiAgICAgIH0pO1xuICAgICAgLy8gY3R4LmJvZHkgPSB7XG4gICAgICAvLyAgIGNvZGU6IDUwMCxcbiAgICAgIC8vICAgZGF0YTogcmVzdWx0LFxuICAgICAgLy8gICBtc2c6IFwi5Y+R6YCB6aqM6K+B6YKu5Lu25oiQ5Yqf77yM6K+354K55Ye76ZO+5o6l56Gu6K6k5L+u5pS56YKu5Lu26LSm5Y+377yBXCIsXG4gICAgICAvLyB9O1xuICAgICAgbXNnID0gXCLln7rmnKzotYTmlpnlt7Lmm7TmlrDvvIzkv67mlLnpgq7nrrHpnIDpgq7ku7bnoa7orqTvvIzor7fmn6XmlLbpgq7ku7bvvIFcIjtcbiAgICB9XG4gICAgY29uc3QgYXJyID0gW1widXNlcm5hbWVcIiwgXCJtb2JpbGVcIiwgXCJwYXNzd29yZFwiXTtcbiAgICBhcnIubWFwKChpdGVtKSA9PiBkZWxldGUgYm9keVtpdGVtXSk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlci51cGRhdGVPbmUoeyBfaWQ6IG9iai5faWQgfSwgYm9keSk7XG4gICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAvLyByZXN1bHQubW9kaWZpZWRDb3VudCA9PT0gMSAmJlxuICAgIGlmIChyZXN1bHQubWF0Y2hlZENvdW50ID09PSAxKSB7XG4gICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgY29kZTogMjAwLFxuICAgICAgICBtc2c6IG1zZyA9PT0gXCJcIiA/IFwi5pu05paw5oiQ5Yqf77yBXCIgOiBtc2csXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgY29kZTogNTAwLFxuICAgICAgICBtc2c6IFwi5pu05paw5aSx6LSl77yBXCIsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIOabtOaWsOeUqOaIt+WQjS3pgq7nrrFcbiAgYXN5bmMgdXBkYXRlVXNlcm5hbWUoY3R4KSB7XG4gICAgY29uc3QgYm9keSA9IGN0eC5xdWVyeTtcbiAgICBjb25zb2xlLmxvZyhcImJvZHlcIiwgY3R4LnF1ZXJ5KTtcbiAgICBpZiAoYm9keS5rZXkpIHtcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgZ2V0VmFsdWUoYm9keS5rZXkpO1xuICAgICAgY29uc3Qgb2JqID0gZ2V0SldUUGF5bG9hZChcIkJlYXJlciBcIiArIHRva2VuKTtcbiAgICAgIGF3YWl0IFVzZXIudXBkYXRlT25lKHsgX2lkOiBvYmouX2lkIH0sIHsgdXNlcm5hbWU6IGJvZHkudXNlcm5hbWUgfSk7XG4gICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgY29kZTogMjAwLFxuICAgICAgICBtc2c6IFwi5pu05paw55So5oi35ZCN5oiQ5YqfXCIsXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgVXNlckNvbnRyb2xsZXIoKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "userController.js"
      ],
      "names": [
        "UserController",
        "userSignRecord",
        "ctx",
        "obj",
        "header",
        "authorization",
        "record",
        "SignRecord",
        "findByUid",
        "_id",
        "user",
        "User",
        "findByID",
        "result",
        "newRecord",
        "created",
        "format",
        "body",
        "code",
        "fav",
        "count",
        "lastSign",
        "msg",
        "subtract",
        "updateOne",
        "$inc",
        "$set",
        "uid",
        "save",
        "updateUserInfo",
        "request",
        "findOne",
        "username",
        "tempUser",
        "password",
        "key",
        "jwt",
        "sign",
        "config",
        "JWT_SECRET",
        "expiresIn",
        "type",
        "data",
        "expire",
        "add",
        "email",
        "name",
        "arr",
        "map",
        "item",
        "console",
        "log",
        "matchedCount",
        "updateUsername",
        "query",
        "token"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "import SignRecord from \"../model/SignRecord\";\nimport { getJWTPayload } from \"../common/utils\";\nimport User from \"../model/User\";\nimport moment from \"dayjs\";\nimport send from \"../config/MailConfig\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport jwt from \"jsonwebtoken\";\nimport { getValue, setValue } from \"../config/RedisConfig\";\nimport config from \"../config\";\n\nclass UserController {\n  // 用户签到\n  async userSignRecord(ctx) {\n    // 取用户的id\n    const obj = await getJWTPayload(ctx.header.authorization);\n    // 查用户上次签到记录\n    const record = await SignRecord.findByUid(obj._id);\n    const user = await User.findByID(obj._id);\n    let result = \"\";\n    let newRecord = {};\n    // 判断签到逻辑\n    if (record) {\n      // 有历史签到数据\n      // 判断上次签到是否与今天相同\n      if (\n        moment(record.created).format(\"YYYY-MM-DD\") ===\n        moment().format(\"YYYY-MM-DD\")\n      ) {\n        // 用户今日已经签到\n        ctx.body = {\n          code: 500,\n          fav: user.fav,\n          count: user.count,\n          lastSign: record.created,\n          msg: \"您今日已签到！\",\n        };\n        return;\n      } else {\n        // 用户今日未签到\n        let count = user.count;\n        let fav = 0;\n        if (\n          moment(record.created).format(\"YYYY-MM-DD\") ===\n          moment().subtract(1, \"days\").format(\"YYYY-MM-DD\")\n        ) {\n          count += 1;\n          // 用户连续签到\n          if (count < 5) fav = 5;\n          else if (count >= 5 && count < 15) fav = 10;\n          else if (count >= 15 && count < 30) fav = 15;\n          else if (count >= 30 && count < 100) fav = 20;\n          else if (count >= 100 && count < 365) fav = 30;\n          else if (count >= 365) fav = 50;\n          // 更新user表\n          await User.updateOne(\n            { _id: obj._id },\n            {\n              $inc: {\n                fav: fav, // user.fav += fav\n                count: 1, // user.count += 1\n              },\n            }\n          );\n          result = {\n            fav: user.fav + fav,\n            count: user.count + 1,\n          };\n        } else {\n          // 用户中断签到\n          fav = 5;\n          // 更新user表\n          await User.updateOne(\n            { _id: obj._id },\n            {\n              $set: { count: 1 },\n              $inc: { fav: fav },\n            }\n          );\n          result = {\n            fav: user.fav + fav,\n            count: 1,\n          };\n        }\n        // 更新sign_record表\n        newRecord = new SignRecord({\n          uid: obj._id,\n          fav: fav,\n        });\n        await newRecord.save();\n      }\n    } else {\n      // 用户初次签到, 保存用户签到数据 - users表\n      await User.updateOne(\n        {\n          _id: obj._id,\n        },\n        {\n          $set: { count: 1 },\n          $inc: { fav: 5 },\n        }\n      );\n      // 保存签到记录 sign_record表\n      newRecord = new SignRecord({\n        uid: obj._id,\n        fav: 5,\n      });\n      await newRecord.save();\n      result = {\n        fav: user.fav + 5,\n        count: 1,\n      };\n    }\n    ctx.body = {\n      code: 200,\n      msg: \"签到成功\",\n      ...result,\n      lastSign: newRecord.created,\n    };\n  }\n\n  // 更新用户基本信息\n  async updateUserInfo(ctx) {\n    const { body } = ctx.request;\n    const obj = await getJWTPayload(ctx.header.authorization);\n    // 判断用户是否修改了邮箱\n    const user = await User.findOne({ _id: obj._id });\n    let msg = \"\";\n    if (body.username && body.username !== user.username) {\n      // 用户修改了邮箱\n      // 发送reset邮件\n      // 判断用户的新邮箱是否已被注册\n      const tempUser = await User.findOne({ username: body.username });\n      if (tempUser && tempUser.password) {\n        ctx.body = {\n          code: 501,\n          msg: \"邮箱已经注册！\",\n        };\n        return;\n      }\n      const key = uuidv4();\n      setValue(\n        key,\n        jwt.sign({ _id: obj._id }, config.JWT_SECRET, {\n          expiresIn: \"30m\",\n        })\n      );\n      // const result =\n      await send({\n        type: \"email\",\n        data: {\n          key: key,\n          username: body.username,\n        },\n        code: \"\",\n        expire: moment().add(30, \"minutes\").format(\"YYYY-MM-DD HH:mm:ss\"),\n        email: user.username,\n        user: user.name,\n      });\n      // ctx.body = {\n      //   code: 500,\n      //   data: result,\n      //   msg: \"发送验证邮件成功，请点击链接确认修改邮件账号！\",\n      // };\n      msg = \"基本资料已更新，修改邮箱需邮件确认，请查收邮件！\";\n    }\n    const arr = [\"username\", \"mobile\", \"password\"];\n    arr.map((item) => delete body[item]);\n    const result = await User.updateOne({ _id: obj._id }, body);\n    console.log(result);\n    // result.modifiedCount === 1 &&\n    if (result.matchedCount === 1) {\n      ctx.body = {\n        code: 200,\n        msg: msg === \"\" ? \"更新成功！\" : msg,\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: \"更新失败！\",\n      };\n    }\n  }\n\n  // 更新用户名-邮箱\n  async updateUsername(ctx) {\n    const body = ctx.query;\n    console.log(\"body\", ctx.query);\n    if (body.key) {\n      const token = await getValue(body.key);\n      const obj = getJWTPayload(\"Bearer \" + token);\n      await User.updateOne({ _id: obj._id }, { username: body.username });\n      ctx.body = {\n        code: 200,\n        msg: \"更新用户名成功\",\n      };\n    }\n  }\n}\n\nexport default new UserController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640328257547
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/routes/userRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/userRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/routes/userRouter.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/routes/userRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
        "sourceFileName": "userRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _userController = _interopRequireDefault(require(\"../api/userController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.prefix(\"/user\"); // 用户签到\n\nrouter.get(\"/fav\", _userController.default.userSignRecord); // 更新用户基本信息\n\nrouter.post(\"/basic\", _userController.default.updateUserInfo); // 修改密码\n\nrouter.post(\"/changePassword\", _userController.default.changePassword);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJSb3V0ZXIuanMiXSwibmFtZXMiOlsicm91dGVyIiwiUm91dGVyIiwicHJlZml4IiwiZ2V0IiwidXNlckNvbnRyb2xsZXIiLCJ1c2VyU2lnblJlY29yZCIsInBvc3QiLCJ1cGRhdGVVc2VySW5mbyIsImNoYW5nZVBhc3N3b3JkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsa0JBQUosRUFBZjtBQUVBRCxNQUFNLENBQUNFLE1BQVAsQ0FBYyxPQUFkLEUsQ0FFQTs7QUFDQUYsTUFBTSxDQUFDRyxHQUFQLENBQVcsTUFBWCxFQUFtQkMsd0JBQWVDLGNBQWxDLEUsQ0FFQTs7QUFDQUwsTUFBTSxDQUFDTSxJQUFQLENBQVksUUFBWixFQUFzQkYsd0JBQWVHLGNBQXJDLEUsQ0FFQTs7QUFDQVAsTUFBTSxDQUFDTSxJQUFQLENBQVksaUJBQVosRUFBK0JGLHdCQUFlSSxjQUE5QztlQUVlUixNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb3V0ZXIgZnJvbSBcImtvYS1yb3V0ZXJcIjtcbmltcG9ydCB1c2VyQ29udHJvbGxlciBmcm9tIFwiLi4vYXBpL3VzZXJDb250cm9sbGVyXCI7XG5cbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKTtcblxucm91dGVyLnByZWZpeChcIi91c2VyXCIpO1xuXG4vLyDnlKjmiLfnrb7liLBcbnJvdXRlci5nZXQoXCIvZmF2XCIsIHVzZXJDb250cm9sbGVyLnVzZXJTaWduUmVjb3JkKTtcblxuLy8g5pu05paw55So5oi35Z+65pys5L+h5oGvXG5yb3V0ZXIucG9zdChcIi9iYXNpY1wiLCB1c2VyQ29udHJvbGxlci51cGRhdGVVc2VySW5mbyk7XG5cbi8vIOS/ruaUueWvhueggVxucm91dGVyLnBvc3QoXCIvY2hhbmdlUGFzc3dvcmRcIiwgdXNlckNvbnRyb2xsZXIuY2hhbmdlUGFzc3dvcmQpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "userRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "get",
        "userController",
        "userSignRecord",
        "post",
        "updateUserInfo",
        "changePassword"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,OAAd,E,CAEA;;AACAF,MAAM,CAACG,GAAP,CAAW,MAAX,EAAmBC,wBAAeC,cAAlC,E,CAEA;;AACAL,MAAM,CAACM,IAAP,CAAY,QAAZ,EAAsBF,wBAAeG,cAArC,E,CAEA;;AACAP,MAAM,CAACM,IAAP,CAAY,iBAAZ,EAA+BF,wBAAeI,cAA9C;eAEeR,M",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/routes/",
      "sourcesContent": [
        "import Router from \"koa-router\";\nimport userController from \"../api/userController\";\n\nconst router = new Router();\n\nrouter.prefix(\"/user\");\n\n// 用户签到\nrouter.get(\"/fav\", userController.userSignRecord);\n\n// 更新用户基本信息\nrouter.post(\"/basic\", userController.updateUserInfo);\n\n// 修改密码\nrouter.post(\"/changePassword\", userController.changePassword);\n\nexport default router;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640359088266
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/api/userController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/api/userController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/api/userController.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/api/userController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
        "sourceFileName": "userController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _SignRecord = _interopRequireDefault(require(\"../model/SignRecord\"));\n\nvar _utils = require(\"../common/utils\");\n\nvar _User = _interopRequireDefault(require(\"../model/User\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nvar _MailConfig = _interopRequireDefault(require(\"../config/MailConfig\"));\n\nvar _uuid = require(\"uuid\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nvar _RedisConfig = require(\"../config/RedisConfig\");\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass UserController {\n  // 用户签到\n  async userSignRecord(ctx) {\n    // 取用户的id\n    const obj = await (0, _utils.getJWTPayload)(ctx.header.authorization); // 查用户上次签到记录\n\n    const record = await _SignRecord.default.findByUid(obj._id);\n    const user = await _User.default.findByID(obj._id);\n    let result = \"\";\n    let newRecord = {}; // 判断签到逻辑\n\n    if (record) {\n      // 有历史签到数据\n      // 判断上次签到是否与今天相同\n      if ((0, _dayjs.default)(record.created).format(\"YYYY-MM-DD\") === (0, _dayjs.default)().format(\"YYYY-MM-DD\")) {\n        // 用户今日已经签到\n        ctx.body = {\n          code: 500,\n          fav: user.fav,\n          count: user.count,\n          lastSign: record.created,\n          msg: \"您今日已签到！\"\n        };\n        return;\n      } else {\n        // 用户今日未签到\n        let count = user.count;\n        let fav = 0;\n\n        if ((0, _dayjs.default)(record.created).format(\"YYYY-MM-DD\") === (0, _dayjs.default)().subtract(1, \"days\").format(\"YYYY-MM-DD\")) {\n          count += 1; // 用户连续签到\n\n          if (count < 5) fav = 5;else if (count >= 5 && count < 15) fav = 10;else if (count >= 15 && count < 30) fav = 15;else if (count >= 30 && count < 100) fav = 20;else if (count >= 100 && count < 365) fav = 30;else if (count >= 365) fav = 50; // 更新user表\n\n          await _User.default.updateOne({\n            _id: obj._id\n          }, {\n            $inc: {\n              fav: fav,\n              // user.fav += fav\n              count: 1 // user.count += 1\n\n            }\n          });\n          result = {\n            fav: user.fav + fav,\n            count: user.count + 1\n          };\n        } else {\n          // 用户中断签到\n          fav = 5; // 更新user表\n\n          await _User.default.updateOne({\n            _id: obj._id\n          }, {\n            $set: {\n              count: 1\n            },\n            $inc: {\n              fav: fav\n            }\n          });\n          result = {\n            fav: user.fav + fav,\n            count: 1\n          };\n        } // 更新sign_record表\n\n\n        newRecord = new _SignRecord.default({\n          uid: obj._id,\n          fav: fav\n        });\n        await newRecord.save();\n      }\n    } else {\n      // 用户初次签到, 保存用户签到数据 - users表\n      await _User.default.updateOne({\n        _id: obj._id\n      }, {\n        $set: {\n          count: 1\n        },\n        $inc: {\n          fav: 5\n        }\n      }); // 保存签到记录 sign_record表\n\n      newRecord = new _SignRecord.default({\n        uid: obj._id,\n        fav: 5\n      });\n      await newRecord.save();\n      result = {\n        fav: user.fav + 5,\n        count: 1\n      };\n    }\n\n    ctx.body = {\n      code: 200,\n      msg: \"签到成功\",\n      ...result,\n      lastSign: newRecord.created\n    };\n  } // 更新用户基本信息\n\n\n  async updateUserInfo(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const obj = await (0, _utils.getJWTPayload)(ctx.header.authorization); // 判断用户是否修改了邮箱\n\n    const user = await _User.default.findOne({\n      _id: obj._id\n    });\n    let msg = \"\";\n\n    if (body.username && body.username !== user.username) {\n      // 用户修改了邮箱\n      // 发送reset邮件\n      // 判断用户的新邮箱是否已被注册\n      const tempUser = await _User.default.findOne({\n        username: body.username\n      });\n\n      if (tempUser && tempUser.password) {\n        ctx.body = {\n          code: 501,\n          msg: \"邮箱已经注册！\"\n        };\n        return;\n      }\n\n      const key = (0, _uuid.v4)();\n      (0, _RedisConfig.setValue)(key, _jsonwebtoken.default.sign({\n        _id: obj._id\n      }, _config.default.JWT_SECRET, {\n        expiresIn: \"30m\"\n      })); // const result =\n\n      await (0, _MailConfig.default)({\n        type: \"email\",\n        data: {\n          key: key,\n          username: body.username\n        },\n        code: \"\",\n        expire: (0, _dayjs.default)().add(30, \"minutes\").format(\"YYYY-MM-DD HH:mm:ss\"),\n        email: user.username,\n        user: user.name\n      }); // ctx.body = {\n      //   code: 500,\n      //   data: result,\n      //   msg: \"发送验证邮件成功，请点击链接确认修改邮件账号！\",\n      // };\n\n      msg = \"基本资料已更新，修改邮箱需邮件确认，请查收邮件！\";\n    }\n\n    const arr = [\"username\", \"mobile\", \"password\"];\n    arr.map(item => delete body[item]);\n    const result = await _User.default.updateOne({\n      _id: obj._id\n    }, body);\n    console.log(result); // result.modifiedCount === 1 &&\n\n    if (result.matchedCount === 1) {\n      ctx.body = {\n        code: 200,\n        msg: msg === \"\" ? \"更新成功！\" : msg\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: \"更新失败！\"\n      };\n    }\n  } // 更新用户名-邮箱\n\n\n  async updateUsername(ctx) {\n    const body = ctx.query;\n    console.log(\"body\", ctx.query);\n\n    if (body.key) {\n      const token = await (0, _RedisConfig.getValue)(body.key);\n      const obj = (0, _utils.getJWTPayload)(\"Bearer \" + token);\n      await _User.default.updateOne({\n        _id: obj._id\n      }, {\n        username: body.username\n      });\n      ctx.body = {\n        code: 200,\n        msg: \"更新用户名成功\"\n      };\n    }\n  } // 修改密码\n\n\n  async changePassword(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const obj = await (0, _utils.getJWTPayload)(ctx.header.authorization);\n    const user = await _User.default.findOne({\n      _id: obj._id\n    });\n\n    if (await _bcrypt.default.compare(body.oldpwd, user.password)) {\n      const newPassword = await _bcrypt.default.hash(body.newpwd, 5);\n      await _User.default.updateOne({\n        _id: obj._id\n      }, {\n        $set: {\n          password: newPassword\n        }\n      });\n      ctx.body = {\n        code: 200,\n        msg: \"更新密码成功\"\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: \"更新密码错误，请检查！\"\n      };\n    }\n  }\n\n}\n\nvar _default = new UserController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIlVzZXJDb250cm9sbGVyIiwidXNlclNpZ25SZWNvcmQiLCJjdHgiLCJvYmoiLCJoZWFkZXIiLCJhdXRob3JpemF0aW9uIiwicmVjb3JkIiwiU2lnblJlY29yZCIsImZpbmRCeVVpZCIsIl9pZCIsInVzZXIiLCJVc2VyIiwiZmluZEJ5SUQiLCJyZXN1bHQiLCJuZXdSZWNvcmQiLCJjcmVhdGVkIiwiZm9ybWF0IiwiYm9keSIsImNvZGUiLCJmYXYiLCJjb3VudCIsImxhc3RTaWduIiwibXNnIiwic3VidHJhY3QiLCJ1cGRhdGVPbmUiLCIkaW5jIiwiJHNldCIsInVpZCIsInNhdmUiLCJ1cGRhdGVVc2VySW5mbyIsInJlcXVlc3QiLCJmaW5kT25lIiwidXNlcm5hbWUiLCJ0ZW1wVXNlciIsInBhc3N3b3JkIiwia2V5Iiwiand0Iiwic2lnbiIsImNvbmZpZyIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJ0eXBlIiwiZGF0YSIsImV4cGlyZSIsImFkZCIsImVtYWlsIiwibmFtZSIsImFyciIsIm1hcCIsIml0ZW0iLCJjb25zb2xlIiwibG9nIiwibWF0Y2hlZENvdW50IiwidXBkYXRlVXNlcm5hbWUiLCJxdWVyeSIsInRva2VuIiwiY2hhbmdlUGFzc3dvcmQiLCJiY3J5cHQiLCJjb21wYXJlIiwib2xkcHdkIiwibmV3UGFzc3dvcmQiLCJoYXNoIiwibmV3cHdkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxjQUFOLENBQXFCO0FBQ25CO0FBQ29CLFFBQWRDLGNBQWMsQ0FBQ0MsR0FBRCxFQUFNO0FBQ3hCO0FBQ0EsVUFBTUMsR0FBRyxHQUFHLE1BQU0sMEJBQWNELEdBQUcsQ0FBQ0UsTUFBSixDQUFXQyxhQUF6QixDQUFsQixDQUZ3QixDQUd4Qjs7QUFDQSxVQUFNQyxNQUFNLEdBQUcs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LElBQUksQ0FBQ3dCLFFBQWpDLENBQVYsRUFBc0Q7QUFDcEQsWUFBTTBCLFdBQVcsR0FBRyxNQUFNSCxnQkFBT0ksSUFBUCxDQUFZNUMsSUFBSSxDQUFDNkMsTUFBakIsRUFBeUIsQ0FBekIsQ0FBMUI7QUFDQSxZQUFNbkQsY0FBS2EsU0FBTCxDQUNKO0FBQUVmLFFBQUFBLEdBQUcsRUFBRU4sR0FBRyxDQUFDTTtBQUFYLE9BREksRUFFSjtBQUNFaUIsUUFBQUEsSUFBSSxFQUFFO0FBQUVRLFVBQUFBLFFBQVEsRUFBRTBCO0FBQVo7QUFEUixPQUZJLENBQU47QUFNQTFELE1BQUFBLEdBQUcsQ0FBQ2UsSUFBSixHQUFXO0FBQ1RDLFFBQUFBLElBQUksRUFBRSxHQURHO0FBRVRJLFFBQUFBLEdBQUcsRUFBRTtBQUZJLE9BQVg7QUFJRCxLQVpELE1BWU87QUFDTHBCLE1BQUFBLEdBQUcsQ0FBQ2UsSUFBSixHQUFXO0FBQ1RDLFFBQUFBLElBQUksRUFBRSxHQURHO0FBRVRJLFFBQUFBLEdBQUcsRUFBRTtBQUZJLE9BQVg7QUFJRDtBQUNGOztBQW5Oa0I7O2VBc05OLElBQUl0QixjQUFKLEUiLCJzb3VyY2VSb290IjoiL1VzZXJzL2x5dy9EZXYvQmxvZy93ZWIvZW5kL3NyYy9hcGkvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNpZ25SZWNvcmQgZnJvbSBcIi4uL21vZGVsL1NpZ25SZWNvcmRcIjtcbmltcG9ydCB7IGdldEpXVFBheWxvYWQgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxzXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWwvVXNlclwiO1xuaW1wb3J0IG1vbWVudCBmcm9tIFwiZGF5anNcIjtcbmltcG9ydCBzZW5kIGZyb20gXCIuLi9jb25maWcvTWFpbENvbmZpZ1wiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XG5pbXBvcnQgeyBnZXRWYWx1ZSwgc2V0VmFsdWUgfSBmcm9tIFwiLi4vY29uZmlnL1JlZGlzQ29uZmlnXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWdcIjtcblxuY2xhc3MgVXNlckNvbnRyb2xsZXIge1xuICAvLyDnlKjmiLfnrb7liLBcbiAgYXN5bmMgdXNlclNpZ25SZWNvcmQoY3R4KSB7XG4gICAgLy8g5Y+W55So5oi355qEaWRcbiAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgLy8g5p+l55So5oi35LiK5qyh562+5Yiw6K6w5b2VXG4gICAgY29uc3QgcmVjb3JkID0gYXdhaXQgU2lnblJlY29yZC5maW5kQnlVaWQob2JqLl9pZCk7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SUQob2JqLl9pZCk7XG4gICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgbGV0IG5ld1JlY29yZCA9IHt9O1xuICAgIC8vIOWIpOaWreetvuWIsOmAu+i+kVxuICAgIGlmIChyZWNvcmQpIHtcbiAgICAgIC8vIOacieWOhuWPsuetvuWIsOaVsOaNrlxuICAgICAgLy8g5Yik5pat5LiK5qyh562+5Yiw5piv5ZCm5LiO5LuK5aSp55u45ZCMXG4gICAgICBpZiAoXG4gICAgICAgIG1vbWVudChyZWNvcmQuY3JlYXRlZCkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKSA9PT1cbiAgICAgICAgbW9tZW50KCkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKVxuICAgICAgKSB7XG4gICAgICAgIC8vIOeUqOaIt+S7iuaXpeW3sue7j+etvuWIsFxuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgZmF2OiB1c2VyLmZhdixcbiAgICAgICAgICBjb3VudDogdXNlci5jb3VudCxcbiAgICAgICAgICBsYXN0U2lnbjogcmVjb3JkLmNyZWF0ZWQsXG4gICAgICAgICAgbXNnOiBcIuaCqOS7iuaXpeW3suetvuWIsO+8gVwiLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDnlKjmiLfku4rml6XmnKrnrb7liLBcbiAgICAgICAgbGV0IGNvdW50ID0gdXNlci5jb3VudDtcbiAgICAgICAgbGV0IGZhdiA9IDA7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBtb21lbnQocmVjb3JkLmNyZWF0ZWQpLmZvcm1hdChcIllZWVktTU0tRERcIikgPT09XG4gICAgICAgICAgbW9tZW50KCkuc3VidHJhY3QoMSwgXCJkYXlzXCIpLmZvcm1hdChcIllZWVktTU0tRERcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgY291bnQgKz0gMTtcbiAgICAgICAgICAvLyDnlKjmiLfov57nu63nrb7liLBcbiAgICAgICAgICBpZiAoY291bnQgPCA1KSBmYXYgPSA1O1xuICAgICAgICAgIGVsc2UgaWYgKGNvdW50ID49IDUgJiYgY291bnQgPCAxNSkgZmF2ID0gMTA7XG4gICAgICAgICAgZWxzZSBpZiAoY291bnQgPj0gMTUgJiYgY291bnQgPCAzMCkgZmF2ID0gMTU7XG4gICAgICAgICAgZWxzZSBpZiAoY291bnQgPj0gMzAgJiYgY291bnQgPCAxMDApIGZhdiA9IDIwO1xuICAgICAgICAgIGVsc2UgaWYgKGNvdW50ID49IDEwMCAmJiBjb3VudCA8IDM2NSkgZmF2ID0gMzA7XG4gICAgICAgICAgZWxzZSBpZiAoY291bnQgPj0gMzY1KSBmYXYgPSA1MDtcbiAgICAgICAgICAvLyDmm7TmlrB1c2Vy6KGoXG4gICAgICAgICAgYXdhaXQgVXNlci51cGRhdGVPbmUoXG4gICAgICAgICAgICB7IF9pZDogb2JqLl9pZCB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAkaW5jOiB7XG4gICAgICAgICAgICAgICAgZmF2OiBmYXYsIC8vIHVzZXIuZmF2ICs9IGZhdlxuICAgICAgICAgICAgICAgIGNvdW50OiAxLCAvLyB1c2VyLmNvdW50ICs9IDFcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGZhdjogdXNlci5mYXYgKyBmYXYsXG4gICAgICAgICAgICBjb3VudDogdXNlci5jb3VudCArIDEsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDnlKjmiLfkuK3mlq3nrb7liLBcbiAgICAgICAgICBmYXYgPSA1O1xuICAgICAgICAgIC8vIOabtOaWsHVzZXLooahcbiAgICAgICAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZShcbiAgICAgICAgICAgIHsgX2lkOiBvYmouX2lkIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICRzZXQ6IHsgY291bnQ6IDEgfSxcbiAgICAgICAgICAgICAgJGluYzogeyBmYXY6IGZhdiB9LFxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZmF2OiB1c2VyLmZhdiArIGZhdixcbiAgICAgICAgICAgIGNvdW50OiAxLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8g5pu05pawc2lnbl9yZWNvcmTooahcbiAgICAgICAgbmV3UmVjb3JkID0gbmV3IFNpZ25SZWNvcmQoe1xuICAgICAgICAgIHVpZDogb2JqLl9pZCxcbiAgICAgICAgICBmYXY6IGZhdixcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IG5ld1JlY29yZC5zYXZlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOeUqOaIt+WIneasoeetvuWIsCwg5L+d5a2Y55So5oi3562+5Yiw5pWw5o2uIC0gdXNlcnPooahcbiAgICAgIGF3YWl0IFVzZXIudXBkYXRlT25lKFxuICAgICAgICB7XG4gICAgICAgICAgX2lkOiBvYmouX2lkLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJHNldDogeyBjb3VudDogMSB9LFxuICAgICAgICAgICRpbmM6IHsgZmF2OiA1IH0sXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICAvLyDkv53lrZjnrb7liLDorrDlvZUgc2lnbl9yZWNvcmTooahcbiAgICAgIG5ld1JlY29yZCA9IG5ldyBTaWduUmVjb3JkKHtcbiAgICAgICAgdWlkOiBvYmouX2lkLFxuICAgICAgICBmYXY6IDUsXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IG5ld1JlY29yZC5zYXZlKCk7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIGZhdjogdXNlci5mYXYgKyA1LFxuICAgICAgICBjb3VudDogMSxcbiAgICAgIH07XG4gICAgfVxuICAgIGN0eC5ib2R5ID0ge1xuICAgICAgY29kZTogMjAwLFxuICAgICAgbXNnOiBcIuetvuWIsOaIkOWKn1wiLFxuICAgICAgLi4ucmVzdWx0LFxuICAgICAgbGFzdFNpZ246IG5ld1JlY29yZC5jcmVhdGVkLFxuICAgIH07XG4gIH1cblxuICAvLyDmm7TmlrDnlKjmiLfln7rmnKzkv6Hmga9cbiAgYXN5bmMgdXBkYXRlVXNlckluZm8oY3R4KSB7XG4gICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgLy8g5Yik5pat55So5oi35piv5ZCm5L+u5pS55LqG6YKu566xXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogb2JqLl9pZCB9KTtcbiAgICBsZXQgbXNnID0gXCJcIjtcbiAgICBpZiAoYm9keS51c2VybmFtZSAmJiBib2R5LnVzZXJuYW1lICE9PSB1c2VyLnVzZXJuYW1lKSB7XG4gICAgICAvLyDnlKjmiLfkv67mlLnkuobpgq7nrrFcbiAgICAgIC8vIOWPkemAgXJlc2V06YKu5Lu2XG4gICAgICAvLyDliKTmlq3nlKjmiLfnmoTmlrDpgq7nrrHmmK/lkKblt7Looqvms6jlhoxcbiAgICAgIGNvbnN0IHRlbXBVc2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWU6IGJvZHkudXNlcm5hbWUgfSk7XG4gICAgICBpZiAodGVtcFVzZXIgJiYgdGVtcFVzZXIucGFzc3dvcmQpIHtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgY29kZTogNTAxLFxuICAgICAgICAgIG1zZzogXCLpgq7nrrHlt7Lnu4/ms6jlhozvvIFcIixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qga2V5ID0gdXVpZHY0KCk7XG4gICAgICBzZXRWYWx1ZShcbiAgICAgICAga2V5LFxuICAgICAgICBqd3Quc2lnbih7IF9pZDogb2JqLl9pZCB9LCBjb25maWcuSldUX1NFQ1JFVCwge1xuICAgICAgICAgIGV4cGlyZXNJbjogXCIzMG1cIixcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICAvLyBjb25zdCByZXN1bHQgPVxuICAgICAgYXdhaXQgc2VuZCh7XG4gICAgICAgIHR5cGU6IFwiZW1haWxcIixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgIHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lLFxuICAgICAgICB9LFxuICAgICAgICBjb2RlOiBcIlwiLFxuICAgICAgICBleHBpcmU6IG1vbWVudCgpLmFkZCgzMCwgXCJtaW51dGVzXCIpLmZvcm1hdChcIllZWVktTU0tREQgSEg6bW06c3NcIiksXG4gICAgICAgIGVtYWlsOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICB1c2VyOiB1c2VyLm5hbWUsXG4gICAgICB9KTtcbiAgICAgIC8vIGN0eC5ib2R5ID0ge1xuICAgICAgLy8gICBjb2RlOiA1MDAsXG4gICAgICAvLyAgIGRhdGE6IHJlc3VsdCxcbiAgICAgIC8vICAgbXNnOiBcIuWPkemAgemqjOivgemCruS7tuaIkOWKn++8jOivt+eCueWHu+mTvuaOpeehruiupOS/ruaUuemCruS7tui0puWPt++8gVwiLFxuICAgICAgLy8gfTtcbiAgICAgIG1zZyA9IFwi5Z+65pys6LWE5paZ5bey5pu05paw77yM5L+u5pS56YKu566x6ZyA6YKu5Lu256Gu6K6k77yM6K+35p+l5pS26YKu5Lu277yBXCI7XG4gICAgfVxuICAgIGNvbnN0IGFyciA9IFtcInVzZXJuYW1lXCIsIFwibW9iaWxlXCIsIFwicGFzc3dvcmRcIl07XG4gICAgYXJyLm1hcCgoaXRlbSkgPT4gZGVsZXRlIGJvZHlbaXRlbV0pO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXIudXBkYXRlT25lKHsgX2lkOiBvYmouX2lkIH0sIGJvZHkpO1xuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgLy8gcmVzdWx0Lm1vZGlmaWVkQ291bnQgPT09IDEgJiZcbiAgICBpZiAocmVzdWx0Lm1hdGNoZWRDb3VudCA9PT0gMSkge1xuICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgbXNnOiBtc2cgPT09IFwiXCIgPyBcIuabtOaWsOaIkOWKn++8gVwiIDogbXNnLFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgbXNnOiBcIuabtOaWsOWksei0pe+8gVwiLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyDmm7TmlrDnlKjmiLflkI0t6YKu566xXG4gIGFzeW5jIHVwZGF0ZVVzZXJuYW1lKGN0eCkge1xuICAgIGNvbnN0IGJvZHkgPSBjdHgucXVlcnk7XG4gICAgY29uc29sZS5sb2coXCJib2R5XCIsIGN0eC5xdWVyeSk7XG4gICAgaWYgKGJvZHkua2V5KSB7XG4gICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldFZhbHVlKGJvZHkua2V5KTtcbiAgICAgIGNvbnN0IG9iaiA9IGdldEpXVFBheWxvYWQoXCJCZWFyZXIgXCIgKyB0b2tlbik7XG4gICAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZSh7IF9pZDogb2JqLl9pZCB9LCB7IHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lIH0pO1xuICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgbXNnOiBcIuabtOaWsOeUqOaIt+WQjeaIkOWKn1wiLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyDkv67mlLnlr4bnoIFcbiAgYXN5bmMgY2hhbmdlUGFzc3dvcmQoY3R4KSB7XG4gICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogb2JqLl9pZCB9KTtcbiAgICBpZiAoYXdhaXQgYmNyeXB0LmNvbXBhcmUoYm9keS5vbGRwd2QsIHVzZXIucGFzc3dvcmQpKSB7XG4gICAgICBjb25zdCBuZXdQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKGJvZHkubmV3cHdkLCA1KTtcbiAgICAgIGF3YWl0IFVzZXIudXBkYXRlT25lKFxuICAgICAgICB7IF9pZDogb2JqLl9pZCB9LFxuICAgICAgICB7XG4gICAgICAgICAgJHNldDogeyBwYXNzd29yZDogbmV3UGFzc3dvcmQgfSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgIG1zZzogXCLmm7TmlrDlr4bnoIHmiJDlip9cIixcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgIG1zZzogXCLmm7TmlrDlr4bnoIHplJnor6/vvIzor7fmo4Dmn6XvvIFcIixcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBVc2VyQ29udHJvbGxlcigpO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "userController.js"
      ],
      "names": [
        "UserController",
        "userSignRecord",
        "ctx",
        "obj",
        "header",
        "authorization",
        "record",
        "SignRecord",
        "findByUid",
        "_id",
        "user",
        "User",
        "findByID",
        "result",
        "newRecord",
        "created",
        "format",
        "body",
        "code",
        "fav",
        "count",
        "lastSign",
        "msg",
        "subtract",
        "updateOne",
        "$inc",
        "$set",
        "uid",
        "save",
        "updateUserInfo",
        "request",
        "findOne",
        "username",
        "tempUser",
        "password",
        "key",
        "jwt",
        "sign",
        "config",
        "JWT_SECRET",
        "expiresIn",
        "type",
        "data",
        "expire",
        "add",
        "email",
        "name",
        "arr",
        "map",
        "item",
        "console",
        "log",
        "matchedCount",
        "updateUsername",
        "query",
        "token",
        "changePassword",
        "bcrypt",
        "compare",
        "oldpwd",
        "newPassword",
        "hash",
        "newpwd"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/api/",
      "sourcesContent": [
        "import SignRecord from \"../model/SignRecord\";\nimport { getJWTPayload } from \"../common/utils\";\nimport User from \"../model/User\";\nimport moment from \"dayjs\";\nimport send from \"../config/MailConfig\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport jwt from \"jsonwebtoken\";\nimport bcrypt from \"bcrypt\";\nimport { getValue, setValue } from \"../config/RedisConfig\";\nimport config from \"../config\";\n\nclass UserController {\n  // 用户签到\n  async userSignRecord(ctx) {\n    // 取用户的id\n    const obj = await getJWTPayload(ctx.header.authorization);\n    // 查用户上次签到记录\n    const record = await SignRecord.findByUid(obj._id);\n    const user = await User.findByID(obj._id);\n    let result = \"\";\n    let newRecord = {};\n    // 判断签到逻辑\n    if (record) {\n      // 有历史签到数据\n      // 判断上次签到是否与今天相同\n      if (\n        moment(record.created).format(\"YYYY-MM-DD\") ===\n        moment().format(\"YYYY-MM-DD\")\n      ) {\n        // 用户今日已经签到\n        ctx.body = {\n          code: 500,\n          fav: user.fav,\n          count: user.count,\n          lastSign: record.created,\n          msg: \"您今日已签到！\",\n        };\n        return;\n      } else {\n        // 用户今日未签到\n        let count = user.count;\n        let fav = 0;\n        if (\n          moment(record.created).format(\"YYYY-MM-DD\") ===\n          moment().subtract(1, \"days\").format(\"YYYY-MM-DD\")\n        ) {\n          count += 1;\n          // 用户连续签到\n          if (count < 5) fav = 5;\n          else if (count >= 5 && count < 15) fav = 10;\n          else if (count >= 15 && count < 30) fav = 15;\n          else if (count >= 30 && count < 100) fav = 20;\n          else if (count >= 100 && count < 365) fav = 30;\n          else if (count >= 365) fav = 50;\n          // 更新user表\n          await User.updateOne(\n            { _id: obj._id },\n            {\n              $inc: {\n                fav: fav, // user.fav += fav\n                count: 1, // user.count += 1\n              },\n            }\n          );\n          result = {\n            fav: user.fav + fav,\n            count: user.count + 1,\n          };\n        } else {\n          // 用户中断签到\n          fav = 5;\n          // 更新user表\n          await User.updateOne(\n            { _id: obj._id },\n            {\n              $set: { count: 1 },\n              $inc: { fav: fav },\n            }\n          );\n          result = {\n            fav: user.fav + fav,\n            count: 1,\n          };\n        }\n        // 更新sign_record表\n        newRecord = new SignRecord({\n          uid: obj._id,\n          fav: fav,\n        });\n        await newRecord.save();\n      }\n    } else {\n      // 用户初次签到, 保存用户签到数据 - users表\n      await User.updateOne(\n        {\n          _id: obj._id,\n        },\n        {\n          $set: { count: 1 },\n          $inc: { fav: 5 },\n        }\n      );\n      // 保存签到记录 sign_record表\n      newRecord = new SignRecord({\n        uid: obj._id,\n        fav: 5,\n      });\n      await newRecord.save();\n      result = {\n        fav: user.fav + 5,\n        count: 1,\n      };\n    }\n    ctx.body = {\n      code: 200,\n      msg: \"签到成功\",\n      ...result,\n      lastSign: newRecord.created,\n    };\n  }\n\n  // 更新用户基本信息\n  async updateUserInfo(ctx) {\n    const { body } = ctx.request;\n    const obj = await getJWTPayload(ctx.header.authorization);\n    // 判断用户是否修改了邮箱\n    const user = await User.findOne({ _id: obj._id });\n    let msg = \"\";\n    if (body.username && body.username !== user.username) {\n      // 用户修改了邮箱\n      // 发送reset邮件\n      // 判断用户的新邮箱是否已被注册\n      const tempUser = await User.findOne({ username: body.username });\n      if (tempUser && tempUser.password) {\n        ctx.body = {\n          code: 501,\n          msg: \"邮箱已经注册！\",\n        };\n        return;\n      }\n      const key = uuidv4();\n      setValue(\n        key,\n        jwt.sign({ _id: obj._id }, config.JWT_SECRET, {\n          expiresIn: \"30m\",\n        })\n      );\n      // const result =\n      await send({\n        type: \"email\",\n        data: {\n          key: key,\n          username: body.username,\n        },\n        code: \"\",\n        expire: moment().add(30, \"minutes\").format(\"YYYY-MM-DD HH:mm:ss\"),\n        email: user.username,\n        user: user.name,\n      });\n      // ctx.body = {\n      //   code: 500,\n      //   data: result,\n      //   msg: \"发送验证邮件成功，请点击链接确认修改邮件账号！\",\n      // };\n      msg = \"基本资料已更新，修改邮箱需邮件确认，请查收邮件！\";\n    }\n    const arr = [\"username\", \"mobile\", \"password\"];\n    arr.map((item) => delete body[item]);\n    const result = await User.updateOne({ _id: obj._id }, body);\n    console.log(result);\n    // result.modifiedCount === 1 &&\n    if (result.matchedCount === 1) {\n      ctx.body = {\n        code: 200,\n        msg: msg === \"\" ? \"更新成功！\" : msg,\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: \"更新失败！\",\n      };\n    }\n  }\n\n  // 更新用户名-邮箱\n  async updateUsername(ctx) {\n    const body = ctx.query;\n    console.log(\"body\", ctx.query);\n    if (body.key) {\n      const token = await getValue(body.key);\n      const obj = getJWTPayload(\"Bearer \" + token);\n      await User.updateOne({ _id: obj._id }, { username: body.username });\n      ctx.body = {\n        code: 200,\n        msg: \"更新用户名成功\",\n      };\n    }\n  }\n\n  // 修改密码\n  async changePassword(ctx) {\n    const { body } = ctx.request;\n    const obj = await getJWTPayload(ctx.header.authorization);\n    const user = await User.findOne({ _id: obj._id });\n    if (await bcrypt.compare(body.oldpwd, user.password)) {\n      const newPassword = await bcrypt.hash(body.newpwd, 5);\n      await User.updateOne(\n        { _id: obj._id },\n        {\n          $set: { password: newPassword },\n        }\n      );\n      ctx.body = {\n        code: 200,\n        msg: \"更新密码成功\",\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: \"更新密码错误，请检查！\",\n      };\n    }\n  }\n}\n\nexport default new UserController();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640359646900
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/model/SignRecord.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/model/SignRecord.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/model/SignRecord.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/model/SignRecord.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
        "sourceFileName": "SignRecord.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelper = _interopRequireDefault(require(\"../config/DBHelper\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelper.default.Schema;\nconst SignRecordSchema = new Schema({\n  uid: {\n    type: String,\n    ref: \"users\"\n  },\n  created: {\n    type: Date\n  },\n  fav: {\n    type: Number\n  }\n});\nSignRecordSchema.pre(\"save\", function (next) {\n  this.created = (0, _dayjs.default)().format(\"YYYY-MM-DD HH:mm:ss\");\n  next();\n});\nSignRecordSchema.statics = {\n  findByUid: function (uid) {\n    return this.findOne({\n      uid: uid\n    }).sort({\n      created: -1\n    });\n  }\n};\n\nconst SignRecord = _DBHelper.default.model(\"sign_record\", SignRecordSchema);\n\nvar _default = SignRecord;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNpZ25SZWNvcmQuanMiXSwibmFtZXMiOlsiU2NoZW1hIiwibW9uZ29vc2UiLCJTaWduUmVjb3JkU2NoZW1hIiwidWlkIiwidHlwZSIsIlN0cmluZyIsInJlZiIsImNyZWF0ZWQiLCJEYXRlIiwiZmF2IiwiTnVtYmVyIiwicHJlIiwibmV4dCIsImZvcm1hdCIsInN0YXRpY3MiLCJmaW5kQnlVaWQiLCJmaW5kT25lIiwic29ydCIsIlNpZ25SZWNvcmQiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHQyxrQkFBU0QsTUFBeEI7QUFFQSxNQUFNRSxnQkFBZ0IsR0FBRyxJQUFJRixNQUFKLENBQVc7QUFDbENHLEVBQUFBLEdBQUcsRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLEdBQUcsRUFBRTtBQUFyQixHQUQ2QjtBQUVsQ0MsRUFBQUEsT0FBTyxFQUFFO0FBQUVILElBQUFBLElBQUksRUFBRUk7QUFBUixHQUZ5QjtBQUdsQ0MsRUFBQUEsR0FBRyxFQUFFO0FBQUVMLElBQUFBLElBQUksRUFBRU07QUFBUjtBQUg2QixDQUFYLENBQXpCO0FBTUFSLGdCQUFnQixDQUFDUyxHQUFqQixDQUFxQixNQUFyQixFQUE2QixVQUFVQyxJQUFWLEVBQWdCO0FBQzNDLE9BQUtMLE9BQUwsR0FBZSxzQkFBU00sTUFBVCxDQUFnQixxQkFBaEIsQ0FBZjtBQUNBRCxFQUFBQSxJQUFJO0FBQ0wsQ0FIRDtBQUtBVixnQkFBZ0IsQ0FBQ1ksT0FBakIsR0FBMkI7QUFDekJDLEVBQUFBLFNBQVMsRUFBRSxVQUFVWixHQUFWLEVBQWU7QUFDeEIsV0FBTyxLQUFLYSxPQUFMLENBQWE7QUFBRWIsTUFBQUEsR0FBRyxFQUFFQTtBQUFQLEtBQWIsRUFBMkJjLElBQTNCLENBQWdDO0FBQUVWLE1BQUFBLE9BQU8sRUFBRSxDQUFDO0FBQVosS0FBaEMsQ0FBUDtBQUNEO0FBSHdCLENBQTNCOztBQU1BLE1BQU1XLFVBQVUsR0FBR2pCLGtCQUFTa0IsS0FBVCxDQUFlLGFBQWYsRUFBOEJqQixnQkFBOUIsQ0FBbkI7O2VBRWVnQixVIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvbW9kZWwvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCIuLi9jb25maWcvREJIZWxwZXJcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcImRheWpzXCI7XG5cbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTtcblxuY29uc3QgU2lnblJlY29yZFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICB1aWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6IFwidXNlcnNcIiB9LFxuICBjcmVhdGVkOiB7IHR5cGU6IERhdGUgfSxcbiAgZmF2OiB7IHR5cGU6IE51bWJlciB9LFxufSk7XG5cblNpZ25SZWNvcmRTY2hlbWEucHJlKFwic2F2ZVwiLCBmdW5jdGlvbiAobmV4dCkge1xuICB0aGlzLmNyZWF0ZWQgPSBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLUREIEhIOm1tOnNzXCIpO1xuICBuZXh0KCk7XG59KTtcblxuU2lnblJlY29yZFNjaGVtYS5zdGF0aWNzID0ge1xuICBmaW5kQnlVaWQ6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICByZXR1cm4gdGhpcy5maW5kT25lKHsgdWlkOiB1aWQgfSkuc29ydCh7IGNyZWF0ZWQ6IC0xIH0pO1xuICB9LFxufTtcblxuY29uc3QgU2lnblJlY29yZCA9IG1vbmdvb3NlLm1vZGVsKFwic2lnbl9yZWNvcmRcIiwgU2lnblJlY29yZFNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFNpZ25SZWNvcmQ7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "SignRecord.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "SignRecordSchema",
        "uid",
        "type",
        "String",
        "ref",
        "created",
        "Date",
        "fav",
        "Number",
        "pre",
        "next",
        "format",
        "statics",
        "findByUid",
        "findOne",
        "sort",
        "SignRecord",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,kBAASD,MAAxB;AAEA,MAAME,gBAAgB,GAAG,IAAIF,MAAJ,CAAW;AAClCG,EAAAA,GAAG,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,GAAG,EAAE;AAArB,GAD6B;AAElCC,EAAAA,OAAO,EAAE;AAAEH,IAAAA,IAAI,EAAEI;AAAR,GAFyB;AAGlCC,EAAAA,GAAG,EAAE;AAAEL,IAAAA,IAAI,EAAEM;AAAR;AAH6B,CAAX,CAAzB;AAMAR,gBAAgB,CAACS,GAAjB,CAAqB,MAArB,EAA6B,UAAUC,IAAV,EAAgB;AAC3C,OAAKL,OAAL,GAAe,sBAASM,MAAT,CAAgB,qBAAhB,CAAf;AACAD,EAAAA,IAAI;AACL,CAHD;AAKAV,gBAAgB,CAACY,OAAjB,GAA2B;AACzBC,EAAAA,SAAS,EAAE,UAAUZ,GAAV,EAAe;AACxB,WAAO,KAAKa,OAAL,CAAa;AAAEb,MAAAA,GAAG,EAAEA;AAAP,KAAb,EAA2Bc,IAA3B,CAAgC;AAAEV,MAAAA,OAAO,EAAE,CAAC;AAAZ,KAAhC,CAAP;AACD;AAHwB,CAA3B;;AAMA,MAAMW,UAAU,GAAGjB,kBAASkB,KAAT,CAAe,aAAf,EAA8BjB,gBAA9B,CAAnB;;eAEegB,U",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "sourcesContent": [
        "import mongoose from \"../config/DBHelper\";\nimport moment from \"dayjs\";\n\nconst Schema = mongoose.Schema;\n\nconst SignRecordSchema = new Schema({\n  uid: { type: String, ref: \"users\" },\n  created: { type: Date },\n  fav: { type: Number },\n});\n\nSignRecordSchema.pre(\"save\", function (next) {\n  this.created = moment().format(\"YYYY-MM-DD HH:mm:ss\");\n  next();\n});\n\nSignRecordSchema.statics = {\n  findByUid: function (uid) {\n    return this.findOne({ uid: uid }).sort({ created: -1 });\n  },\n};\n\nconst SignRecord = mongoose.model(\"sign_record\", SignRecordSchema);\n\nexport default SignRecord;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640230364461
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/lyw/Dev/Blog/web/end/src/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lyw/Dev/Blog/web/end\",\"filename\":\"/Users/lyw/Dev/Blog/web/end/src/model/SignRecord.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"dev\",\"root\":\"/Users/lyw/Dev/Blog/web/end\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0:dev": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lyw/Dev/Blog/web/end",
      "filename": "/Users/lyw/Dev/Blog/web/end/src/model/SignRecord.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "dev",
      "root": "/Users/lyw/Dev/Blog/web/end",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-static-block",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ClassBody": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lyw/Dev/Blog/web/end/src/model/SignRecord.js",
        "plugins": [
          "classStaticBlock",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lyw/Dev/Blog/web/end/src/model/SignRecord.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
        "sourceFileName": "SignRecord.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelper = _interopRequireDefault(require(\"../config/DBHelper\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelper.default.Schema;\nconst SignRecordSchema = new Schema({\n  uid: {\n    type: String,\n    ref: \"users\"\n  },\n  created: {\n    type: Date\n  },\n  fav: {\n    type: Number\n  }\n});\nSignRecordSchema.pre(\"save\", function (next) {\n  this.created = (0, _dayjs.default)().format(\"YYYY-MM-DD HH:mm:ss\");\n  next();\n});\nSignRecordSchema.statics = {\n  findByUid: function (uid) {\n    return this.findOne({\n      uid: uid\n    }).sort({\n      created: -1\n    });\n  }\n};\n\nconst SignRecord = _DBHelper.default.model(\"sign_record\", SignRecordSchema);\n\nvar _default = SignRecord;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNpZ25SZWNvcmQuanMiXSwibmFtZXMiOlsiU2NoZW1hIiwibW9uZ29vc2UiLCJTaWduUmVjb3JkU2NoZW1hIiwidWlkIiwidHlwZSIsIlN0cmluZyIsInJlZiIsImNyZWF0ZWQiLCJEYXRlIiwiZmF2IiwiTnVtYmVyIiwicHJlIiwibmV4dCIsImZvcm1hdCIsInN0YXRpY3MiLCJmaW5kQnlVaWQiLCJmaW5kT25lIiwic29ydCIsIlNpZ25SZWNvcmQiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHQyxrQkFBU0QsTUFBeEI7QUFFQSxNQUFNRSxnQkFBZ0IsR0FBRyxJQUFJRixNQUFKLENBQVc7QUFDbENHLEVBQUFBLEdBQUcsRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLEdBQUcsRUFBRTtBQUFyQixHQUQ2QjtBQUVsQ0MsRUFBQUEsT0FBTyxFQUFFO0FBQUVILElBQUFBLElBQUksRUFBRUk7QUFBUixHQUZ5QjtBQUdsQ0MsRUFBQUEsR0FBRyxFQUFFO0FBQUVMLElBQUFBLElBQUksRUFBRU07QUFBUjtBQUg2QixDQUFYLENBQXpCO0FBTUFSLGdCQUFnQixDQUFDUyxHQUFqQixDQUFxQixNQUFyQixFQUE2QixVQUFVQyxJQUFWLEVBQWdCO0FBQzNDLE9BQUtMLE9BQUwsR0FBZSxzQkFBU00sTUFBVCxDQUFnQixxQkFBaEIsQ0FBZjtBQUNBRCxFQUFBQSxJQUFJO0FBQ0wsQ0FIRDtBQUtBVixnQkFBZ0IsQ0FBQ1ksT0FBakIsR0FBMkI7QUFDekJDLEVBQUFBLFNBQVMsRUFBRSxVQUFVWixHQUFWLEVBQWU7QUFDeEIsV0FBTyxLQUFLYSxPQUFMLENBQWE7QUFBRWIsTUFBQUEsR0FBRyxFQUFFQTtBQUFQLEtBQWIsRUFBMkJjLElBQTNCLENBQWdDO0FBQUVWLE1BQUFBLE9BQU8sRUFBRSxDQUFDO0FBQVosS0FBaEMsQ0FBUDtBQUNEO0FBSHdCLENBQTNCOztBQU1BLE1BQU1XLFVBQVUsR0FBR2pCLGtCQUFTa0IsS0FBVCxDQUFlLGFBQWYsRUFBOEJqQixnQkFBOUIsQ0FBbkI7O2VBRWVnQixVIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9seXcvRGV2L0Jsb2cvd2ViL2VuZC9zcmMvbW9kZWwvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCIuLi9jb25maWcvREJIZWxwZXJcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcImRheWpzXCI7XG5cbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTtcblxuY29uc3QgU2lnblJlY29yZFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICB1aWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6IFwidXNlcnNcIiB9LFxuICBjcmVhdGVkOiB7IHR5cGU6IERhdGUgfSxcbiAgZmF2OiB7IHR5cGU6IE51bWJlciB9LFxufSk7XG5cblNpZ25SZWNvcmRTY2hlbWEucHJlKFwic2F2ZVwiLCBmdW5jdGlvbiAobmV4dCkge1xuICB0aGlzLmNyZWF0ZWQgPSBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLUREIEhIOm1tOnNzXCIpO1xuICBuZXh0KCk7XG59KTtcblxuU2lnblJlY29yZFNjaGVtYS5zdGF0aWNzID0ge1xuICBmaW5kQnlVaWQ6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICByZXR1cm4gdGhpcy5maW5kT25lKHsgdWlkOiB1aWQgfSkuc29ydCh7IGNyZWF0ZWQ6IC0xIH0pO1xuICB9LFxufTtcblxuY29uc3QgU2lnblJlY29yZCA9IG1vbmdvb3NlLm1vZGVsKFwic2lnbl9yZWNvcmRcIiwgU2lnblJlY29yZFNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFNpZ25SZWNvcmQ7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "SignRecord.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "SignRecordSchema",
        "uid",
        "type",
        "String",
        "ref",
        "created",
        "Date",
        "fav",
        "Number",
        "pre",
        "next",
        "format",
        "statics",
        "findByUid",
        "findOne",
        "sort",
        "SignRecord",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,kBAASD,MAAxB;AAEA,MAAME,gBAAgB,GAAG,IAAIF,MAAJ,CAAW;AAClCG,EAAAA,GAAG,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,GAAG,EAAE;AAArB,GAD6B;AAElCC,EAAAA,OAAO,EAAE;AAAEH,IAAAA,IAAI,EAAEI;AAAR,GAFyB;AAGlCC,EAAAA,GAAG,EAAE;AAAEL,IAAAA,IAAI,EAAEM;AAAR;AAH6B,CAAX,CAAzB;AAMAR,gBAAgB,CAACS,GAAjB,CAAqB,MAArB,EAA6B,UAAUC,IAAV,EAAgB;AAC3C,OAAKL,OAAL,GAAe,sBAASM,MAAT,CAAgB,qBAAhB,CAAf;AACAD,EAAAA,IAAI;AACL,CAHD;AAKAV,gBAAgB,CAACY,OAAjB,GAA2B;AACzBC,EAAAA,SAAS,EAAE,UAAUZ,GAAV,EAAe;AACxB,WAAO,KAAKa,OAAL,CAAa;AAAEb,MAAAA,GAAG,EAAEA;AAAP,KAAb,EAA2Bc,IAA3B,CAAgC;AAAEV,MAAAA,OAAO,EAAE,CAAC;AAAZ,KAAhC,CAAP;AACD;AAHwB,CAA3B;;AAMA,MAAMW,UAAU,GAAGjB,kBAASkB,KAAT,CAAe,aAAf,EAA8BjB,gBAA9B,CAAnB;;eAEegB,U",
      "sourceRoot": "/Users/lyw/Dev/Blog/web/end/src/model/",
      "sourcesContent": [
        "import mongoose from \"../config/DBHelper\";\nimport moment from \"dayjs\";\n\nconst Schema = mongoose.Schema;\n\nconst SignRecordSchema = new Schema({\n  uid: { type: String, ref: \"users\" },\n  created: { type: Date },\n  fav: { type: Number },\n});\n\nSignRecordSchema.pre(\"save\", function (next) {\n  this.created = moment().format(\"YYYY-MM-DD HH:mm:ss\");\n  next();\n});\n\nSignRecordSchema.statics = {\n  findByUid: function (uid) {\n    return this.findOne({ uid: uid }).sort({ created: -1 });\n  },\n};\n\nconst SignRecord = mongoose.model(\"sign_record\", SignRecordSchema);\n\nexport default SignRecord;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1640230364461
  }
}